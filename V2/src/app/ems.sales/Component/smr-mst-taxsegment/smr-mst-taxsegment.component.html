<div class="row justify-content-center align-items-center" style="margin-top: 10px;">
    <div class="col-lg-2 col-md-2 col-sm-2">
        <div class="cardHead radius-10 border-start border-0 border-3 border-darkgreen"
            style="background-color:#ffffff;">
            <div class="card-body12">
                <div class="d-flex align-items-center">
                    <div>
                        <h5 class="mb-0 text-secondary">Total Customer</h5>
                        <div *ngFor="let data of TaxSegmentCustomer_list">
                            <h4 class="badge-green badge-outline-green badge-secondary fs-4 mt-2">
                                {{data.total_customer}}</h4>
                        </div>
                    </div>
                    <div class="widgets-icons-2 rounded-circle bg-gradient-darkgreens text-white ms-auto">
                        <i class="fa-solid fa-people-roof fs-3"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-lg-2 col-md-2 col-sm-2">
        <div class="cardHead radius-10 border-start border-0 border-3 border-orange" style="background-color:#ffffff;">

            <div class="card-body12">
                <div class="d-flex align-items-center">
                    <div>
                        <h5 class="mb-0 text-secondary">Assigned</h5>
                        <div *ngFor="let data of TaxSegmentCustomer_list">
                            <h4 class="badge-orange  badge-outline-orange fs-4 mt-2">
                                {{data.assigncount}}</h4>
                        </div>
                    </div>
                    <div class="widgets-icons-2 rounded-circle bg-gradient-brown text-white ms-auto"><i
                            class="fa-solid fa fa-users"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="col-lg-2 col-md-2 col-sm-2">
        <div class="cardHead radius-10 border-start border-0 border-3 border-pink " style="background-color:#ffffff;">
            <div class="card-body12">
                <div class="d-flex align-items-center">
                    <div>
                        <h5 class="mb-0 text-secondary">Unassigned</h5>
                        <div *ngFor="let data of TaxSegmentCustomer_list">
                            <h4 class="badge1  badge-outline1 fs-4 mt-2 ">{{data.unassign_customer}}</h4>
                        </div>
                    </div>
                    <div class="widgets-icons-2 rounded-circle bg-gradient-violet text-white ms-auto"><i
                            class="fa-solid fa-users-slash"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<ng-container *ngIf="page==='tax'">
    <div class="card mt-4">
        <div class="row ms-3 mt-3 d-flex align-items-center">
            <div class="col">
                <h3 class="card-title fw-bold">Tax Segment Summary</h3>
            </div>

            <div class="col me-5">
                <button type="button" class="btn-primary btn-sm text-white me-4 float-end" data-bs-toggle="modal"
                    data-bs-target="#taxsegmentadd">
                    <span class="fa-solid fa-plus text-white fs-6 fw-bold"></span>&nbsp;Add Segment
                </button>
            </div>
        </div>

        <div class="table-responsive">
            <div class="mx-3 p-3 pt-0 pb-0 bg-white rounded mt-2">
                <table id="taxsegment_list"
                    class="table table-striped table-row-bordered border-bottom gs-7 align-middle">
                    <thead>

                        <tr class="fw-bolder fs-5 text-nowrap bg-lightblue text-blue align-middle">
                            <th style="width: 8px;">S.No</th>
                            <th style="width: 200px;">Prefix Code </th>
                            <th>Tax Segment</th>
                            <th>Description</th>
                            <th style="text-align: center;width: 200px;">Customers Assigned</th>
                            <th>Status</th>
                            <th class="text-center bg-lightblue ">Action</th> 
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let data of taxsegment_list; let i=index;" class="align-middle">
                            <td>{{i+1}}</td>
                            <td>{{data.taxsegment_code}}</td>
                            <td>{{data.taxsegment_name}}</td>
                            <td>{{data.taxsegment_description}}</td>
                            <td style="text-align: center;">
                                <a class="ms-6 count font-bold">{{data.taxsegment_count}}</a>
                            </td>
                            <td><span *ngIf="data.active_flag==='Y'"
                                    class="badge bg-success text-white ">Active</span><span
                                    *ngIf="data.active_flag==='N'" class="badge bg-danger text-white ">Inactive</span>
                            </td>
                            <td class="text-center text-nowrap">
                                <button title="Assign Customer" type="button" class="btn btn-icon
                                btn-sm bg-primary me-2" (click)="openModalAssignCustomer(data.taxsegment_gid)"
                                data-bs-toggle="modal">
                                <span><i class="fa-solid fas fa-users fs-3"></i></span>
                              </button>
                              <button title="UnAssign Customer" type="button" class="btn btn-icon
                              btn-sm bg-warning me-2" (click)="openModalunAssignCustomer(data.taxsegment_gid)"
                              data-bs-toggle="modal">
                              <span><i class="fa-solid fa-users-slash fs-3"></i></span>
                              
                            </button>
                              <button title="Edit" type="button" class="btn btn-icon
                                btn-sm bg-etdark me-2" (click)="openModaledit(data)"
                                data-bs-toggle="modal" data-bs-target="#taxsegmentedit">
                                  <span class="fa-solid fa-pencil fs-6 text-white"></span>
                              </button>                            
                              <!-- <button title="Delete" type="button" class="btn btn-icon btn-danger me-2"
                              (click)="openModaldelete(data.taxsegment_gid)" data-bs-toggle="modal"
                                            data-bs-target="#taxsegmentdelete">
                                  <span class="fa-solid fa-trash fs-6 text-white"></span>
                              </button> -->
                              <button title="Delete" type="button" data-bs-toggle="modal"  (click)="openModaldelete(data.taxsegment_gid)" data-bs-target="#taxsegmentdelete"
                              class="btn btn-icon btn-sm bg-danger  me-2"
                              >
                              <i class="fa-solid fa-trash text-white fs-6"></i>
                          </button>

                                <!-- <div (click)="toggleOptions(data.taxsegment_gid)" style="cursor: pointer;">
                                    <button class="btn me-2 p-1">
                                        <span class="fa-solid fa-ellipsis-vertical fs-1" style="color: #4d4d4d;"></span>
                                    </button>
                                    <div *ngIf="showOptionsDivId === data.taxsegment_gid"
                                        class="pb-0 rounded bg-white cursor-pointer icon_menu">
                                        <div class="d-flex p-3 pb-3 Icon_hover" (click)="openModaledit(data)"
                                            data-bs-toggle="modal" data-bs-target="#taxsegmentedit">
                                            <span><i class="fa-regular fas fa-pencil fs-3 me-5"></i></span>
                                            <span>Edit</span>
                                        </div>
                                        <div class="d-flex p-3 pb-3 Icon_hover"
                                            (click)="openModalAssignCustomer(data.taxsegment_gid)">
                                            <span><i class="fa-solid  fa-users fs-3 me-5"></i></span>
                                            <span>Assign Customer</span>
                                        </div>

                                        <div class="d-flex p-3 pb-3 Icon_hover"
                                            (click)="openModalunAssignCustomer(data.taxsegment_gid)">
                                            <span><i class="fa-solid  fa-users-slash fs-3 me-5"></i></span>
                                            <span>Unassign Customer</span>
                                        </div>

                                        <div class="d-flex p-3 pb-3 Icon_hover"
                                            (click)="openModaldelete(data.taxsegment_gid)" data-bs-toggle="modal"
                                            data-bs-target="#taxsegmentdelete">
                                            <span><i class="fa-regular fa-trash-can fs-3 me-5"></i></span>
                                            <span>Delete</span>
                                        </div>
                                    </div>
                                </div> -->
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

    </div>
</ng-container>
<!-- add -->
<form [formGroup]="reactiveForm" #form="ngForm">
    <div class="modal fade" id="taxsegmentadd" data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <!-- Modal Header -->
                <div class="card-header p-1 pb-2 pt-1  rounded-top bg-primary">
                    <h2 class="ms-2" style="margin-top:10px;color:white;font-weight: bold;"> <span
                            class="fa-solid fa-plus text-white fs-3"></span>&nbsp;Add Tax Segment</h2>
                </div>
                <!-- Modal body -->
                <div class="modal-body">
                    <div class="row"><span class="font-bold"
                            [ngClass]="{'error_input_field': taxsegment_code.invalid && taxsegment_code.touched }"><b>Tax
                                Segment Prefix</b><span class="ms-1 text-red">*</span></span>
                        <div class="col-lg-12 col-md-12 col-sm-12 fv-row mt-2 d-flex ">
                            <input formControlName="taxsegment_code" type="text" class="
                                             form-control form-control-lg form-control-solid
                                             custom-input
                                             mb-3 mb-lg-0
                                             bg-white
                                             custom-input
                                           " [ngStyle]="{
                                             'border-color':
                                             taxsegment_code.invalid && taxsegment_code.touched
                                                 ? 'red'
                                                 : 'rgb(209, 209, 209)'
                                           }"
                                            name="taxsegment_code"  required />
                                            <!-- pattern="^(?!\s*$)[A-Za-z0-9]+$" -->
                        </div>

                    </div>
                    <br>
                    <div class="row"><span class="font-bold"
                            [ngClass]="{'error_input_field': taxsegment_name.invalid && taxsegment_name.touched }"><b>Tax
                                Segment </b><span class="ms-1 text-red">*</span></span>
                        <div class="col-lg-12 col-md-12 col-sm-12 fv-row mt-2 d-flex ">
                            <input formControlName="taxsegment_name" type="text" class="
                                             form-control form-control-lg form-control-solid
                                             custom-input
                                             mb-3 mb-lg-0
                                             bg-white
                                             custom-input
                                           " [ngStyle]="{
                                             'border-color':
                                             taxsegment_name.invalid && taxsegment_name.touched
                                                 ? 'red'
                                                 : 'rgb(209, 209, 209)'
                                           }" name="taxsegment_name"  required />
                        </div>

                    </div>
                    <br>

                    <div class="row"><span class="font-bold"><b>Description </b></span>
                        <div class="col-lg-12 col-md-12 col-sm-12 fv-row mt-2 d-flex ">
                            <textarea formControlName="taxsegment_description" type="text" class="
                                                 form-control form-control-lg form-control-solid
                                                 custom-input
                                                 mb-3 mb-lg-0
                                                 bg-white
                                                 custom-input borderc-secondary
                                               " name="taxsegment_description" row="3"></textarea>
                        </div>

                    </div>


                    <br>
                    <div class="col-6">
                        <span class="fw-bold ">Active Flag</span><span class="ms-1 text-red">*</span>
                        <div class="col-lg-12 col-md-12 col-sm-12 fv-row mt-2 d-flex ">
                            <div
                                class="form-check form-check-custom mb-3 mb-lg-0 form-check-success form-check-solid form-check-sm">
                                <input class="form-check-input mb-3 mb-lg-0" type="radio" name="flagtracker" id="Y"
                                    formControlName="active_flag" value="Y">
                                <label class="form-check-label text-gray-700 text-nowrap" for="Yes">Yes</label>
                            </div>
                            <div
                                class="form-check form-check-custom mb-3 mb-lg-0 form-check-success form-check-solid form-check-sm ms-10">
                                <input class="form-check-input mb-3 mb-lg-0" type="radio" name="flagtracker"
                                    formControlName="active_flag" value="N" id="N">
                                <label class="form-check-label text-gray-700 text-nowrap" for="No">No</label>
                            </div>
                        </div>
                    </div>
                    <br>

                    <!-- Modal footer -->
                    <div class="text-center my-4">
                        <button (click)="onsubmit()" [disabled]="reactiveForm.invalid"
                            [ngStyle]="{ 'cursor': reactiveForm.invalid ? 'not-allowed' : 'pointer'}" [ngClass]="{ 'btn-success': !reactiveForm.invalid,
                        'btn-secondary text-white': reactiveForm.invalid }" data-bs-dismiss="modal">
                            <i class="fas fa-check text-white fs-5 "></i> &nbsp;Submit
                        </button> &nbsp;&nbsp;
                        <button class="btn-danger btn-sm text-white me-4" (click)="onclose()" data-bs-dismiss="modal">
                            <i class="fas fa-close text-white"></i> &nbsp;Close
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</form>
<form [formGroup]="reactiveFormEdit" #form="ngForm">
    <div class="modal fade" id="taxsegmentedit" data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">


                <div class="card-header p-1 pb-2 pt-1 rounded-top bg-primary">
                    <h2 style="margin-top:10px;color:white;font-weight: bold;">&nbsp;&nbsp;<span
                            class="fa-solid fa-pencil text-white  fs-3"></span> &nbsp;Edit Tax Segment </h2>

                </div>

                <div class="modal-body">

                    <div class="row"><span class="font-bold"><b>Tax Segment Prefix</b><span
                                class="ms-1 text-red"></span></span>
                        <div class="col-lg-12 col-md-12 col-sm-12 fv-row mt-2 d-flex ">


                            <input [readonly]="isReadOnly" formControlName="taxsegment_code_edit" type="" class="
                                             form-control form-control-lg form-control-solid
                                             custom-input
                                             mb-3 mb-lg-0
                                             bg-white
                                             custom-input
                                           " [ngStyle]="{
                                             'border-color':
                                             taxsegment_code_edit.invalid && taxsegment_code_edit.touched
                                                 ? 'red'
                                                 : 'rgb(209, 209, 209)'
                                           }" name="taxsegment_code_edit" required />
                        </div>
                    </div>
                    <div
                        *ngIf="taxsegment_code_edit.invalid && (taxsegment_code_edit.dirty || taxsegment_code_edit.touched)">
                        <div *ngIf="taxsegment_code_edit.errors?.['required']">
                            <span style="color:red;">Tax Segment Code is required.</span>
                        </div>
                    </div>

                    <br>

                    <div class="row"><span class="font-bold"
                            [ngClass]="{'error_input_field': taxsegment_name_edit.invalid && taxsegment_name_edit.touched }"><b>Tax
                                Segment </b><span class="ms-1 text-red">*</span></span>
                        <div class="col-lg-12 col-md-12 col-sm-12 fv-row mt-2 d-flex ">


                            <input formControlName="taxsegment_name_edit" type="text" class="
                                                 form-control form-control-lg form-control-solid
                                                 custom-input
                                                 mb-3 mb-lg-0
                                                 bg-white
                                                 custom-input
                                               " [ngStyle]="{
                                                 'border-color':
                                                 taxsegment_name_edit.invalid && taxsegment_name_edit.touched
                                                     ? 'red'
                                                     : 'rgb(209, 209, 209)'
                                               }" name="taxsegment_name_edit" required />
                        </div>

                    </div>
                    <br>
                    <div class="row"><span class="font-bold"><b>Description </b></span>
                        <div class="col-lg-12 col-md-12 col-sm-12 fv-row mt-2 d-flex ">


                            <textarea formControlName="taxsegment_description_edit" type="text" class="
                                         form-control form-control-lg form-control-solid
                                         custom-input
                                         mb-3 mb-lg-0
                                         bg-white
                                         custom-input
                                       " [ngStyle]="{
                                         'border-color':
                                         taxsegment_description_edit.invalid && taxsegment_description_edit.touched
                                             ? 'red'
                                             : 'rgb(209, 209, 209)'
                                       }" name="taxsegment_description_edit" row="3"></textarea>
                        </div>

                    </div>





                    <br>

                    <div class="col-6">
                        <span class="fw-bold ">Active Flag</span>
                        <div class="col-lg-12 col-md-12 col-sm-12 fv-row mt-2 d-flex ">
                            <div
                                class="form-check form-check-custom mb-3 mb-lg-0 form-check-success form-check-solid form-check-sm">
                                <input class="form-check-input mb-3 mb-lg-0" type="radio" name="flagtracker" id="Y"
                                    formControlName="active_flag_edit" value="Y">
                                <label class="form-check-label text-gray-700 text-nowrap" for="Yes">Yes</label>
                            </div>
                            <div
                                class="form-check form-check-custom mb-3 mb-lg-0 form-check-success form-check-solid form-check-sm ms-10">
                                <input class="form-check-input mb-3 mb-lg-0" type="radio" name="flagtracker"
                                    formControlName="active_flag_edit" value="N" id="N">
                                <label class="form-check-label text-gray-700 text-nowrap" for="No">No</label>
                            </div>
                        </div>
                    </div>
                    <br>

                    <div class="text-center my-4">
                        <button type="update" class="btn-success btn-sm text-white me-2" data-bs-dismiss="modal"
                            [disabled]="reactiveFormEdit.invalid"
                            [ngClass]="{'primary-button': !reactiveFormEdit.invalid,'secondary-button': reactiveFormEdit.invalid}"
                            (click)="onupdate()">
                            <i class="fas fa-check text-white fs-5"></i> &nbsp; Update
                        </button>
                        <button (click)="onclose()" class="btn-danger btn-sm text-white me-4" data-bs-dismiss="modal">
                            <i class="fas fa-close text-white"></i> &nbsp;Close
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</form>

<div class="modal" id="taxsegmentdelete" data-bs-backdrop="static" data-bs-keyboard="false">
    <div class="modal-dialog modal-md modal-dialog-centered">
      <div class="modal-content del_modal-content">
        <div class="text-center my-4">
          <h2><b>Are you sure?</b></h2>
          <p style="display: block;">Do You Want To Delete the Record ?</p>
          <div class="text-center my-4">
            <button class="btn-danger btn-sm text-white me-4" data-bs-dismiss="modal" (click)="ondelete()">
              <i class="bi bi-trash-fill text-white fs-5 me-2"></i>Delete
            </button>
            <button class="btn-primary btn-sm text-white me-2" data-bs-dismiss="modal">
              <i class="fas fa-close text-white me-2"></i>Close
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

<div class="modal fade" id="myModalUpdateimage9" tabindex="-1" data-bs-backdrop='static'
    aria-labelledby="editamlcategoryLabel" aria-hidden="true" data-bs-keyboard="false">
    <div class="modal-dialog modal-md modal-dialog-centered">
        <div class="modal-content  d-flex justify-content-center">
            <div class="card-header p-1 pb-1 pt-1 rounded-top bg-primary"
                style="display: flex; align-items: center; height: 40px;">

            </div>
            <div class="modal-body">
                <div class="table-responsive">
                    <div class="mx-3 p-3 pt-0 pb-0 bg-white rounded">
                        <table class="table table-striped table-bordered table-hover table-sm table-responsive mt-4">
                            <tbody>
                                <tr *ngFor="let data of tax_list; let i=index;">
                                    <td class="px-0 text-center">{{i+1}}</td>
                                    <td>{{data.tax_name}}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="text-center my-4">
                    <button class="btn-primary btn-sm text-white me-2" data-bs-dismiss="modal"
                        style="background-color: red;">
                        <i class="fas fa-arrow-left text-white"></i> &nbsp;Back
                    </button>&nbsp;
                </div>
            </div>
        </div>
    </div>
</div>
<!-- //Assign Customer// -->
<div class="modal modal-lg" id="myModalAssignCustomer" data-bs-backdrop="static" data-bs-keyboard="false">
    <div class="modal-dialog">
        <div class="modal-content">
            <!-- Modal Header -->
            <div class="card-header p-1 pb-2 pt-1 rounded-top bg-primary">
                <h2 class="fw-bolder ms-5 mt-4 text-white">
                    <i class="fa-solid fa-users me-3"></i>Assign Tax Segment to Customer
                </h2>
            </div>

            <div style="font-weight:bolder;font-size:16px;text-align: center;" class="mt-4">
                <span>Tax Segment:</span><span style="color:red;">{{teamname}}</span>
            </div>
            <br>
            <div class="container-fluid">
                <customer-assign-dual-list [sort]="keepSorted" [source]="source" [key]="key" [key1]="key1"
                    [display]="display" [filter]="filter" [(destination)]="confirmed" height="265px" [format]="format"
                    [disabled]="disabled" (parentApiCall)="getListFromEmployeeList($event)">
                </customer-assign-dual-list>
            </div>
        </div>
    </div>
</div>

<!-- //Assign Vendor// -->
<div class="modal modal-lg" id="myModalAssignVendor" data-bs-backdrop="static" data-bs-keyboard="false">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <!-- Modal Header -->

            <div class="card-header p-1 pb-2 pt-1 rounded-top bg-primary">
                <h2 style="margin-top:10px;color:white;font-weight: bold;">&nbsp;&nbsp;<i class="fa-solid fa-users"
                        style="font-size:20px;"></i> &nbsp;&nbsp;Assign Tax Segment to Vendor</h2>

            </div>
            <br>
            <div style="font-weight:bolder;font-size:16px;text-align: center;">
                <span>Tax Segment:</span><span style="color:red;">&nbsp;&nbsp;{{teamname}}</span>

            </div>
            <br>
            <div class="container-fluid">
                <vendor-assign-dual-list [sort1]="keepSorted1" [source1]="source1" [key2]="key2" [key3]="key3"
                    [display1]="display1" [filter1]="filter1" [(destination)]="confirmed1" height="265px"
                    [format1]="format1">
                </vendor-assign-dual-list>
            </div>
        </div>
    </div>
</div>

<ng-container *ngIf="page==='withinstatecustomer'">
    <app-smr-mst-taxsegmentwithinstatecustomer></app-smr-mst-taxsegmentwithinstatecustomer>
</ng-container>
<ng-container *ngIf="page==='intersate'">
    <app-smr-mst-taxsegmentinterstatecustomer></app-smr-mst-taxsegmentinterstatecustomer>
</ng-container>
<ng-container *ngIf="page==='totalcustomer'">
    <app-smr-mst-taxsegmenttotalcustomers></app-smr-mst-taxsegmenttotalcustomers>
</ng-container>
<ng-container *ngIf="page==='overseas'">
    <app-smr-mst-taxsegmentoverseascustomer></app-smr-mst-taxsegmentoverseascustomer>
</ng-container>
<ng-container *ngIf="page==='unassign'">
    <app-smr-mst-taxsegmentunassigncustomer></app-smr-mst-taxsegmentunassigncustomer>
</ng-container>
<ng-container *ngIf="page==='other'">
    <app-smr-mst-taxsegmentothersegments></app-smr-mst-taxsegmentothersegments>
</ng-container>