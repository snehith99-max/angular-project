<div class="card m-5">
    <div class="card-title p-5 pb-3 pt-3 rounded-top bg-primary d-flex justify-content-between align-items-center">
        <h1 class="fw-bolder text-white"><i class="fa fa-shopping-cart fs-2" aria-hidden="true"></i>&nbsp;&nbsp;Price Change Request</h1>
  
        <button style="color: black !important;" class="btn btn-icon btn-sm bg-secondary cursor-pointer " title="back"
            routerLink="/payable/PmrTrnInvoice"><i class="fa-solid fa-arrow-left-long fs-1 fw-bold"></i></button>
  
  
      </div>
      <!-- -------------- first Tab ------------- -->
       <div class="card mt-1 m-3 mb-0">
        <div class="card-header d-flex align-items-center mb-3 cursor-pointer no-arrow" style="background-color: #def0ff;">
          <div>
            <p class="card-title fw-bold fs-3 no-arrow" style="color: #2599ff;">
              <i class="fa-solid fa-clipboard fs-1"></i> &nbsp;&nbsp;Invoice Details
            </p>
          </div>
        
        </div>
    
        <div >
            <form [formGroup]="InvoiceForm">
                <div  class="d-flex flex-row m-2 flex-wrap">
                    <div class="col-12 col-lg-4 col-md-6 col-sm-12">
            <span class="font-bold">Entity</span>
            <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
              <input type="text" formControlName="branch_name"  
              class="form-control form-control-lg form-control-solid custom-input mb-3 mb-lg-0 borderc-secondary bg-white custom-input "
              placeholder="Entity" style="height:40px;"  class="form-control" readonly />
            </div>
          </div>             
                    
                      <!-- --------------PR Ref. No ------------- -->
          <div class="col-12 col-lg-4 col-md-6 col-sm-12">
            <span class="font-bold" >Invoice Ref. No<span class="ms-1 text-red">*</span></span>
            <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
              <input type="text" formControlName="invoice_ref_no"  
                class="form-control form-control-lg form-control-solid custom-input mb-3 mb-lg-0 borderc-secondary bg-white custom-input "
                placeholder="Invoice Ref. No" style="height:40px;"  class="form-control" />
            </div>
          </div>
                    
                                <!-- -------------- PO Date ------------- -->
          <div class="col-12 col-lg-4 col-md-6 col-sm-12">
            <span class="font-bold" >Invoice Date<span class="ms-1 text-red">*</span></span>
            <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                <input type="date"   pattern="^(?!\s*$).+" [ngStyle]="{ 'border-color': InvoiceForm.get('invoice_date')?.hasError('required')
                 && InvoiceForm.get('invoice_date')?.touched ? 'red' : 'rgb(209, 209, 209)'}"
                formControlName="invoice_date"
               class="form-control form-control-lg form-control-solid date-picker custom-input mb-3 mb-lg-0 bg-white
              custom-input date-picker "  placeholder="DD-MM-YYYY" style="height: 40px;"/>
            </div>
         </div>         
        </div>
               <!-- -------------- Vendor Name ------------- -->
        <div class="d-flex flex-row m-2 flex-wrap">
            <div class="col-12 col-lg-4 col-md-6 col-sm-12">
              <span class="font-bold">Vendor Name</span>
              <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">  
                <input type="text" formControlName="vendor_companyname"  
              class="form-control form-control-lg form-control-solid custom-input mb-3 mb-lg-0 borderc-secondary bg-white custom-input "
              placeholder="Vendor Name" style="height:40px;"  class="form-control" readonly />
              </div>
              <div class="col-11  fv-row mt-4 ">
                  <textarea type="text"
                  class="form-control form-control-lg form-control-solid custom-input mb-3 mb-lg-0 bg-secondary border-secondary custom-input"
                  placeholder="Shipment To" formControlName="vendor_details" class="form-control" readonly
                  rows="3"></textarea>
              </div>
            </div>
             <!-- -------------- bill To ------------- -->
            <div class="col-12 col-lg-4 col-md-3 col-sm-12">
              <span class="font-bold">Bill To</span>
              <div class="col-11 fv-row mt-4">
                <textarea type="text"
                  class="form-control mt-4 form-control-lg form-control-solid bg-secondary custom-input mb-1 mb-lg-2 border-secondary bg-white custom-input"
                  placeholder="Bill To"   formControlName="address1" class="form-control" rows="6" readonly></textarea>
              </div>
            </div>
            <!-- -------------- Shipment To ------------- -->
            <div class="col-12 col-lg-4 col-md-3 col-sm-12">
              <span class="font-bold">Shipment To</span>
              <div class="col-11 fv-row mt-4">
                <textarea type="text"
                  class="form-control form-control-lg form-control-solid custom-input mb-3 mb-lg-0 bg-secondary border-secondary custom-input"
                  placeholder="Shipment To" formControlName="shipping_address" class="form-control" readonly
                  rows="6"></textarea>
              </div>
            </div>       
          </div>                   
          <div class="d-flex flex-row m-2 flex-wrap">
            <!-- currency_code -->
            <div class="col-12 col-lg-4 col-md-3 col-sm-12">
                <span class="font-bold">Currency</span>
                <div class="d-flex align-items-center">
                  <input type="text" formControlName="currency_code"  
                  class="form-control form-control-lg form-control-solid custom-input mb-3 mb-lg-0 borderc-secondary bg-white custom-input"
                  placeholder="Currency" style="height:40px;width: 65%;margin-right: 20px;"  class="form-control" readonly />
                  <input type="text"  readonly
                    class="form-control form-control-lg form-control-solid custom-input mb-3 mb-lg-0 borderc-secondary custom-input"
                    formControlName="exchange_rate" class="form-control bg-secondary"
                    style="width: 20%; height: 40px;" />
                </div>
            </div>
  <!-- -------------- Delivery To ------------- -->
     <div class="col-12 col-lg-4 col-md-6 col-sm-12">
       <span class="font-bold">Delivery Terms</span>
       <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
      <input type="text"   formControlName="delivery_terms" 
        class="form-control form-control-lg form-control-solid custom-input mb-3 mb-lg-0 borderc-secondary bg-white custom-input "
        placeholder="Delivery" style="height:40px;"  class="form-control" readonly />
     </div>
      </div>
     <!-- -------------- Payment To ------------- -->
     <div class="col-12 col-lg-4 col-md-6 col-sm-12">
      <span class="font-bold">Payment Terms</span>
      <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
      <input type="text" formControlName="payment_terms" 
        class="form-control form-control-lg form-control-solid custom-input mb-3 mb-lg-0 borderc-secondary bg-white custom-input "
        placeholder="Payment" style="height:40px;"  class="form-control" readonly />
     </div>
      </div>
     </div>         
     <!-- Mode of Dispatch -->
        <div class="d-flex flex-row m-2 flex-wrap">
            <div class="col-12 col-lg-4 col-md-6 col-sm-12">
              <span class="font-bold">Mode of Dispatch</span>
              <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                <input type="text"  formControlName="dispatch_mode" 
                  class="form-control form-control-lg form-control-solid custom-input mb-3 mb-lg-0 borderc-secondary bg-white custom-input "
                  placeholder="Mode of Dispatch" style="height:40px;"  class="form-control" readonly />
              </div>
            </div>
             <!-- -------------- Due Date ------------- -->
             <div class="col-12 col-lg-4 col-md-6 col-sm-12">
              <span class="font-bold">Due Date</span>
              <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                <input type="date"   pattern="^(?!\s*$).+" [ngStyle]="{ 'border-color': InvoiceForm.get('due_date')?.hasError('required')
                 && InvoiceForm.get('due_date')?.touched ? 'red' : 'rgb(209, 209, 209)'}"
                formControlName="due_date"
               class="form-control form-control-lg form-control-solid date-picker custom-input mb-3 mb-lg-0 bg-white
              custom-input date-picker "  placeholder="DD-MM-YYYY" style="height: 40px;"/>
            </div>
            </div>
            <!-- -------------- Billing Email------------- -->
            <div class="col-12 col-lg-4 col-md-6 col-sm-12">
                <span class="font-bold">Billing Email</span>
                <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                  <input type="text" formControlName="billing_mail" 
                    class="form-control form-control-lg form-control-solid custom-input mb-3 mb-lg-0 borderc-secondary bg-white custom-input "
                    placeholder="Billing Email" style="height:40px;"  class="form-control"  readonly/>
                </div>
              </div>
          </div>                   
                              
                 <!-- -------------- PO Cover Note ------------- -->
        <div class="d-flex flex-row m-2 flex-wrap">
            <div class="col-12 col-lg-12 col-md-4 col-sm-11"><span class="font-bold">Remarks</span>
              <div class="col-lg-12 col-12 col-md-4 col-sm-11 fv-row mt-2">
                <textarea style="width: 98%;" type="text" class="
                  form-control form-control-lg form-control-solid custom-input
                  mb-3 mb-lg-0  borderc-secondary bg-white custom-input" formControlName="invoice_remarks"
                  placeholder="Enter Remarks" class="form-control " readonly rows="3"></textarea>
              </div>
            </div>         
          </div>                                  
            </form>
        </div>
  
     <!-- --------------Second Tab ------------- -->
  
     </div>
  
     <div class="card mt-1 ms-4 me-4">
      <div class="tab-content" id="myTabContent">
          <div class="tab-pane fade show active" id="kt_tab_pane_2" role="tabpanel">
              <div>
                      <table class="table table-striped table-bordered text-blue border-bottom gs-7 align-middle">
                          <thead>
                              <tr class="fw-bold fs-6 text-nowrap bg-lightblue text-blue align-middle">
                                  <th class="text-blue" style="width: 8%;">Product Group</th>
                                  <th class="text-blue" style="width: 6%;">Product Code</th>
                                  <th class="text-blue" style="width: 15%;">Product</th>
                                  <th class="text-blue" style="width: 15%;">Description</th>
                                  <th class="text-blue" style="width: 3%;">Quantity</th>
                                  <th class="text-blue" style="width: 1%;">Price</th>
                                  <th class="text-blue" style="width: 1%;">Invoice Price</th>
                                  <!-- <th class="text-blue" style="width: 6%;" colspan="2">Discount</th>
                                  <th class="text-blue" style="text-align:center;width: 5%;">Tax Rate</th>
                                  <th class="text-blue" style="text-align:center;width: 4%;">Tax</th> -->
                                  <th class="text-blue" style="width: 1%;">Total Amount</th>
                              </tr>
                          </thead>
                          <tbody>
                            <tr *ngFor="let data of purchaseorder_list; let i=index;">
                                <td style="width: 6%;">{{data.productgroup_name}}</td>
                                <td style="width: 6%;">{{data.product_code}}</td>
                                <td style="text-align: left;">{{data.product_name}}</td>
                                <td>{{data.display_field_name}}</td>
                                <td style="text-align: right;">{{data.qyt_unit}} {{data.productuom_name}}</td>
                                <td style="text-align: right;">{{data.product_price_L | number: '1.2-2'}}</td>
                                <td>
                                  <input type="text"
                                         class="form-control form-control-lg form-control-solid custom-input custom_height borderc-secondary bg-white custom-input"
                                         placeholder="0.00" 
                                         style="text-align: right;" 
                                         [(ngModel)]="data.invoice_amount" 
                                         (ngModelChange)="updateProductTotal(data)">
                                </td>
                                <td style="text-align: right;">{{data.product_total}}</td>
                              </tr>
                          </tbody>
                      </table> 
              </div>
          </div>
      </div>
  </div>
    <div class="text-center my-4">
      <button type="submit" class="btn-success btn-sm text-white me-2" (click)="onSubmit()">
          <i class="fa fa-check fs-5 me-3"></i>Submit
      </button>
   </div>
  </div>