

    <div class="card">
      <div class="row ms-3 mt-3 d-flex align-items-center">
        <!-- <div class="col">
          <h3 class="card-title">Select Invoice</h3>
        </div>
        <div class="col me-5 text-end">
         
          <button style="color: black !important;" class="btn btn-icon btn-sm bg-secondary cursor-pointer me-3"
          (click)="onback()" ><i class="fa-solid fa-arrow-left text-blue mb-1"></i></button>
        </div> -->
        <div class="card-title p-5 pb-3 pt-3 rounded-top bg-primary d-flex justify-content-between align-items-center">
          <h1 class="fw-bolder text-white"><i class="fa fa-plus fs-3"></i>&nbsp;&nbsp;Add Payment</h1>
          <button style="color: black !important;" class="btn btn-icon btn-sm bg-secondary cursor-pointer " title="back"
          (click)="onback()"><i class="fa-solid fa-arrow-left-long fs-1 fw-bold"></i></button>
        </div>
        

      <!-- <br>
        <div class="col-12 col-lg-3 col-md-3 col-sm-12">
          <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-5 ms-5">
            <b>Company Name</b>
            <input formControlName="Companyname" type="text" style="width:70%;" class="form-control form-control-lg form-control-solid  borderc-secondary custom-input mb-3 mt-3 mb-lg-0 bg-white custom-input"
            placeholder="Enter Company name"  name="from" required (ngModelChange)="GetpaymentSummary()"/>
          </div>
        </div>
        <br>
         -->
            <div class="table-responsive">
              <!-- <div class="card card-body m-1 shadow-lg p-3 mb-5 bg-white rounded"> -->
                <table id="Payment_addlist" class="table table-striped table-row-bordered gy-5 gs-7">
                  <thead>
                      <tr class="fw-bolder fs-5 text-nowrap bg-lightblue text-blue align-middle"> 
                        <th></th>             
                        <th style="font-size:11px;">S.No</th>
                        <th style="font-size:11px;">Vendor	</th>
                        <th style="font-size:11px;">Contact Details	</th>            
                        <th class="text-end">Invoice Amount</th>
                        <th class="text-end">Paid Amount	</th>
                        <th class="text-end">Outstanding Amount</th>
                        <th style="font-size:11px;">Action</th>
                    </tr>
                  </thead>
                  <tbody>
                      <tr *ngFor="let data of Payment_addlist; let i=index;">
                          <td (click)="ondetail(data.vendor_gid)" (click)="data.isExpand = !data.isExpand">
                              <i *ngIf="!data.isExpand" class="bi-chevron-right"></i>
                              <i *ngIf="data.isExpand" class="bi-chevron-up"></i>
                          </td>
                        <td style="font-size:11px;">{{i+1}}</td>
                        <td style="font-size:11px;">{{data.vendor_companyname}}</td>
                        <td style="font-size:11px;">{{data.contact}}</td>            
                        <td class="text-end">{{data.invoice_amount}}</td>
                        <td class="text-end">{{data.payment_amount}}</td>
                        <td class="text-end">{{data.outstanding}}</td>
                        <td class="text-center text-nowrap">
                          <button title="Make Payment" type="button" class="btn btn-icon btn-sm bg-success me-2" data-bs-toggle="modal" data-bs-target="#myModalmakepayment" (click)="addpayment(data.vendor_gid)">
                              <span class="fa-solid fa-money-bill-wave fs-6" style="color: #ffffff;"></span>
                            </button>
                        </td>

                        <td *ngIf="data.isExpand" >
                          <br> <br> <br>
                          <div class="table-responsive" style="margin-left:-1170px;">
                              <div class="card card-body m-3 shadow-lg p-3 mb-5 bg-white rounded">
                                  <table id="" 
                                      class="table table-striped table-row-bordered gy-5 gs-7 ">
                                      <thead>
                                          <tr class="fw-bold fs-5 text-nowrap bg-lightblue text-blue">
                                              <th>S.No</th>
                                              <th>Invoice Date</th>
                                              <th>Invoice Refno</th>
                                              <th>Due Date</th>
                                              <th class="text-end">Invoice Amount</th>
                                              <th class="text-end">Paid Amount	</th>
                                              <th class="text-end">Outstanding Amount	</th>
                                              <th>Details</th>
                                              <th>Status </th>
                                              <!-- <th>Invoice Remarks</th>                                           -->
                                              <th class="text-center me-6" style="width: 10px;">Action</th>                                          
                                              </tr>
                                      </thead>
                                      <tbody>
                                      <tr *ngFor="let data1 of Payment_expand; let i=index;">
                                              <td>{{i+1}}</td>
                                              <td hidden>{{data1.invoice_gid}}</td>
                                              <td>{{data1.invoice_date}}</td>
                                              <td>{{data1.invoice_refno}}</td>                                           
                                              <td>{{data1.due_date}}</td>
                                              <td class="text-end">{{data1.invoice_amount}}</td>
                                              <td class="text-end">{{data1.payed_amount}}</td>
                                              <td class="text-end">{{data1.outstanding}}</td>
                                              <!-- <td class="text-center text-nowrap">
                                                <a title="Select" href="#" class="btn-text-link me-2"
                                                (click)="Productdetails(data1)"  data-bs-toggle="modal" data-bs-target="#myadditional" >Product Details  </a>
                                              </td> -->
                                              <td class="text-center text-nowrap">
                                                <label title="Product Details" data-bs-toggle="modal" data-bs-target="#myadditional"
                                                    (click)="Productdetails(data1)">
                                                    <i class="fas fa-question-circle fa-5x text-primary fs-2"></i>
                                                </label>
                                              </td>

                                              <td>{{data1.overall_status}}</td>
                                              <!-- <td>{{data1.invoice_remarks}}</td> -->
                                              <td class="text-center text-nowrap">
                                                <button title="Make Payment" type="button" class="btn-lg btn-primary"  style="height: 20px; display: flex; align-items: center; justify-content: center;"
                                                data-bs-toggle="modal" data-bs-target="#myModalmakepayment" 
                                                (click)="addsinglepayment(data1.invoice_gid,data.vendor_gid)">
                                              Payment
                                                    <!-- <span class="fa-solid fa-money-bill-wave fs-6" style="color: #ffffff;"></span> -->
                                                  </button>
                                              </td>
                                          </tr> 
                                  </tbody>
                                  </table>
                              </div>
                          </div>
                      </td>     
                      </tr>
                  </tbody>
                   
                    <div>
                      <div class="modal" id="myadditional" data-bs-backdrop="static" data-bs-keyboard="false" style="align-items: center;">
                        <div class="modal-dialog modal-lg modal-dialog-centered">
                          <div class="modal-content  d-flex justify-content-center">
                            <div class="card-header p-1 pb-1 pt-1 rounded-top bg-primary"
                              style="display: flex; align-items: center; height: 40px;">
                                  <h3 style="margin-top: 10px; color: white; font-weight: bold">
                                    <!-- &nbsp;&nbsp;<i class="fa-solid  fs-5"></i> -->
                                    &nbsp;&nbsp; Product Details
                                  </h3>                            
                            </div> 
                            <div class="modal-body">
                              <div class="table-responsive">
                                <div class="mx-3 p-3 pt-0 pb-0 bg-white rounded" >
                                  <table class="table table-striped table-row-bordered gy-5 gs-7 ">
                                      <thead>
                                          <tr class="fw-bold fs-7 text-nowrap bg-lightblue text-blue align-middle">
                                              <th>S.No</th>
                                              <th>Invoice Ref No.</th>
                                              <th>Product Code</th>
                                              <th>Product Name</th>  
                                              <th class="text-end">Product Price</th>                                                               
                                             </tr>
                                      </thead>
                                      <tbody> 
                                          <tr *ngFor="let data of product_list; let i=index;"> 
                                              
                                              <td >{{i+1}}</td>
                                              <td>{{data.invoice_refno}}</td>
                                              <td>{{data.product_code}}</td>
                                              <td>{{data.product_name}}</td>
                                              <td class="text-end">{{data.product_total}}</td>
                                          </tr>
                                      </tbody> 
                                  </table>
                                </div>
                              </div>
                              <div class="text-center">
                              
                                  <button class="btn-danger btn-sm text-white me-4" data-bs-dismiss="modal">
                                      <i class="fas fa-close text-white"></i> &nbsp;Close
                                    </button>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                      
                      





                </table> 
            </div>     
      </div> 
    </div>