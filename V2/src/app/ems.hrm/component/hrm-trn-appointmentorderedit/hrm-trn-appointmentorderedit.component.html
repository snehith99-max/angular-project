<div class="card rounded-top">

    <div class="card-title p-5 pb-6 pt-6 rounded-top bg-primary">
        <h1 class="fw-bolder text-white">
            <i class="fa-solid fa-pen-to-square fs-2"></i> &nbsp;&nbsp; Edit Appointment Order
        </h1>
    </div>
    
    <div class="card mt-1 m-3 mb-0">
        <div class="card-header d-flex align-items-center mb-3 cursor-pointer" style="background-color: #def0ff;">
            <p class="card-title fw-bold fs-3 " style="color: #2599ff;">
                <i class="fa-solid fa-clipboard fs-1"></i> &nbsp;Personal Details
            </p>
        </div>


        <form [formGroup]="appointmentorderform" #form="ngForm">
            <input formControlName="appointmentorder_gid" hidden placeholder="Address Line 1" type="text" class="
                form-control form-control-lg form-control-solid
                bg-white
                custom-input
                mb-3 mb-lg-0
                borderc-secondary
              " name="appointmentorder_gid" />
            <div class="card p-4 border ms-5 me-5 mb-4">

                <div class="d-flex flex-row m-3 flex-wrap">

                    <div class="col-12 col-lg-4 col-md-6 col-sm-12"><span class="font-bold required">Branch</span>
                        <ng-select class="custom col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2"
                            formControlName="branch_name" bindLabel="branch_name" bindValue="branch_name"
                            [items]="branch_list"
                            [class.is-invalid]="appointmentorderform.get('branch_name')?.invalid && (appointmentorderform.get('branch_name')?.dirty || appointmentorderform.get('branch_name')?.touched)"
                            [ngClass]="{'invalid-border': appointmentorderform.get('branch_name')?.invalid && appointmentorderform.get('branch_name')?.touched}"
                            placeholder="Select an option" required></ng-select>
                        <div *ngIf="appointmentorderform.get('branch_name')?.hasError('required') && appointmentorderform.get('branch_name')?.touched || appointmentorderform.get('branch_name')?.hasError('pattern')"
                            class="text-red">Branch is required.</div>
                    </div>


                    <div class="col-12 col-lg-4 col-md-6 col-sm-12"><span class="font-bold">Appointment Ref No </span>
                        <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                            <input formControlName="appointmentorder_gid" type="text"
                                class="form-control form-control-lg form-control-solid custom-input mb-3 border-secondary mb-lg-0 bg-white custom-input"
                                placeholder="Appointment Ref No " />

                        </div>
                    </div>

                    <div class="col-12 col-lg-4 col-md-6 col-sm-12"><span class="font-bold required">Appointment
                            Date</span>
                        <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                            <input formControlName="appointment_date" type="text"
                                class="form-control form-control-lg form-control-solid borderc-secondary date-picker mb-3 mb-lg-0 bg-white custom-input"
                                [class.is-invalid]="appointmentorderform.get('appointment_date')?.invalid && (appointmentorderform.get('appointment_date')?.dirty || appointmentorderform.get('appointment_date')?.touched)"
                                [ngClass]="{'invalid-border': appointmentorderform.get('appointment_date')?.invalid && appointmentorderform.get('appointment_date')?.touched}"
                                placeholder="YYYY-MM-DD" name="appointment_date" />
                            <div *ngIf="appointmentorderform.get('appointment_date')?.hasError('required') && appointmentorderform.get('appointment_date')?.touched || appointmentorderform.get('appointment_date')?.hasError('pattern')"
                                class="text-red">Appointment Date is required.</div>
                        </div>
                    </div>

                </div>

                <div class="d-flex flex-row m-3 flex-wrap">

                    <div class="col-12 col-lg-4 col-md-6 col-sm-12"><span class="font-bold required">First Name</span>
                        <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row ">
                            <input formControlName="first_name" type="text"
                                class="form-control form-control-lg form-control-solid custom-input mb-3 mb-lg-0 bg-white custom-input"
                                [ngStyle]="{'border-color': first_name.invalid && first_name.touched ? 'red' : 'rgb(209, 209, 209)'}"
                                placeholder="Enter First Name" pattern="^(?!\s*$).+" name="first_name" required />
                            <div *ngIf="appointmentorderform.get('first_name')?.hasError('required') && appointmentorderform.get('first_name')?.touched || appointmentorderform.get('first_name')?.hasError('pattern')"
                                class="text-red">First name is required.</div>
                        </div>
                    </div>

                    <div class="col-12 col-lg-4 col-md-6 col-sm-12"><span class="font-bold">Last Name</span>
                        <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row ">
                            <input formControlName="last_name" type="text"
                                class="form-control form-control-lg form-control-solid custom-input mb-3 border-secondary mb-lg-0 bg-white custom-input"
                                placeholder="Enter Last Name" pattern="^(?!\s*$).+" />
                        </div>
                    </div>

                    <div class="col-12 col-lg-4 col-md-6 col-sm-12"><span class="font-bold">Gender</span>
                        <div class="d-flex justify-content-start mt-4 ms-2">
                            <!--begin::Check-->
                            <div class="
                              form-check
                              form-check-custom
                              form-check-primary
                              form-check-solid
                              form-check-sm
                            ">
                                <input class="form-check-input" type="radio" name="gender" checked="checked"
                                    formControlName="gender" value="male" />
                                <!--begin::Label-->
                                <label class="form-check-label text-gray-700 text-nowrap"
                                    for="kt_builder_header_content_menu">Male</label>
                                <!--end::Label-->
                            </div>
                            <!--end::Check-->
                            <!--begin::Check-->
                            <div class="
                              form-check
                              form-check-custom
                              form-check-primary
                              form-check-solid
                              form-check-sm
                              ms-10
                            ">
                                <input class="form-check-input" type="radio" name="gender" formControlName="gender"
                                    value="female" />
                                <!--begin::Label-->
                                <label class="form-check-label text-gray-700 text-nowrap"
                                    for="kt_builder_header_content_page-title">Female</label>
                                <!--end::Label-->
                            </div>
                            <!--end::Check-->
                        </div>
                    </div>
                </div>

                <div class="d-flex flex-row m-3 flex-wrap">


                    <div class="col-12 col-lg-4 col-md-6 col-sm-12"><span class="font-bold">Experience </span>
                        <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                            <input formControlName="experience_detail" type="text"
                                class="form-control form-control-lg form-control-solid custom-input mb-3  bg-white custom-input border-secondary mb-lg-0"
                                placeholder="Experience" />

                        </div>
                    </div>

                    <div class="col-12 col-lg-4 col-md-6 col-sm-12"><span class="font-bold">Date Of Birth</span>
                        <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">

                            <input formControlName="dob" type="text"
                                class="form-control form-control-lg form-control-solid borderc-secondary date-picker mb-3 mb-lg-0 bg-white custom-input"
                                placeholder="YYYY-MM-DD" name="dob" />
                        </div>
                    </div>

                    <div class="col-12 col-lg-4 col-md-6 col-sm-12"><span class="font-bold">Mobile</span>
                        <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                            <input formControlName="mobile_number" type="text"
                                class="form-control form-control-lg form-control-solid custom-input mb-3 border-secondary mb-lg-0 bg-white custom-input"
                                placeholder="Mobile Number" />

                        </div>
                    </div>

                </div>

                <div class="d-flex flex-row m-3 flex-wrap">
                    <div class="col-12 col-lg-4 col-md-6 col-sm-12"><span class="font-bold">E-mail</span>
                        <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                            <input [(ngModel)]="email_address" type="text" formControlName="email_address"
                                class="form-control form-control-lg form-control-solid mb-3 mb-lg-0 borderc-secondary bg-white custom-input"
                                placeholder="Personal Email Address" name="email_address" />
                        </div>

                    </div>

                    <div class="col-12 col-lg-4 col-md-6 col-sm-12"><span class="font-bold required">Date Of
                            Joining</span>
                        <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">

                            <input formControlName="joiningdate" type="text"
                                [ngStyle]="{ 'border-color': appointmentorderform.get('joiningdate')?.hasError('required') && appointmentorderform.get('joiningdate')?.touched || appointmentorderform.get('joiningdate')?.hasError('pattern') ? 'red' : 'rgb(209, 209, 209)' }"
                                class="form-control form-control-lg form-control-solid custom-input mb-3 mb-lg-0 bg-white custom-input  mb-3 mb-lg-0 "
                                placeholder="YYYY-MM-DD" name="joiningdate" />
                            <div *ngIf="appointmentorderform.get('joiningdate')?.hasError('required') && appointmentorderform.get('joiningdate')?.touched"
                                class="text-red ms-2">Date of joining is required.</div>
                        </div>
                    </div>


                    <div class="col-12 col-lg-4 col-md-6 col-sm-12"><span class="font-bold">Qualification</span>
                        <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                            <input formControlName="qualification" type="text"
                                class="form-control form-control-lg form-control-solid custom-input mb-3 border-secondary mb-lg-0 bg-white custom-input"
                                placeholder="Qualification" />

                        </div>
                    </div>

                </div>

                <div class="d-flex flex-row m-3 flex-wrap">
                    <div class="col-12 col-lg-4 col-md-6 col-sm-12"><span class="font-bold required">Department</span>
                        <ng-select class="custom col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2"
                            formControlName="department_name" bindLabel="department_name" bindValue="department_name"
                            [items]="department_list"
                            [class.is-invalid]="appointmentorderform.get('department_name')?.invalid && (appointmentorderform.get('department_name')?.dirty || appointmentorderform.get('department_name')?.touched)"
                            [ngClass]="{'invalid-border': appointmentorderform.get('department_name')?.invalid && appointmentorderform.get('department_name')?.touched}"
                            placeholder="Select an option" required></ng-select>
                        <div *ngIf="appointmentorderform.get('department_name')?.hasError('required') && appointmentorderform.get('department_name')?.touched || appointmentorderform.get('department_name')?.hasError('pattern')"
                            class="text-red">Deparment is required.</div>
                    </div>

                    <div class="col-12 col-lg-4 col-md-6 col-sm-12"><span class="font-bold required">Designation</span>
                        <ng-select class="custom col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2"
                            formControlName="designation_name" bindLabel="designation_name" bindValue="designation_name"
                            [items]="designation_list"
                            [class.is-invalid]="appointmentorderform.get('designation_name')?.invalid && (appointmentorderform.get('designation_name')?.dirty || appointmentorderform.get('designation_name')?.touched)"
                            [ngClass]="{'invalid-border': appointmentorderform.get('designation_name')?.invalid && appointmentorderform.get('designation_name')?.touched}"
                            placeholder="Select an option" required></ng-select>
                        <div *ngIf="appointmentorderform.get('designation_name')?.hasError('required') && appointmentorderform.get('designation_name')?.touched || appointmentorderform.get('designation_name')?.hasError('pattern')"
                            class="text-red">Designation is required.</div>
                    </div>


                    <div class="col-12 col-lg-4 col-md-6 col-sm-12"><span class="font-bold required">Salary</span>
                        <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                            <input formControlName="employee_salary" type="text"
                                [ngStyle]="{ 'border-color': appointmentorderform.get('employee_salary')?.hasError('required') && appointmentorderform.get('employee_salary')?.touched || appointmentorderform.get('employee_salary')?.hasError('pattern') ? 'red' : 'rgb(209, 209, 209)' }"
                                class="form-control form-control-lg form-control-solid custom-input mb-3 mb-lg-0 bg-white custom-input  mb-3 mb-lg-0 "
                                placeholder="Salary" />
                            <div *ngIf="appointmentorderform.get('employee_salary')?.hasError('required') && appointmentorderform.get('employee_salary')?.touched"
                                class="text-red ms-2">Salary is required.</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="card p-4 border ms-3 me-5 mb-4">

                <div class="card m-3 border">
                    <div class="card-header bg-lightblue card-height55">
                        <div class="card-title m-0">
                            <h3 class="fw-bolder text-blue">Address Details</h3>
                        </div>
                    </div>
                </div>

                <div class="d-flex flex-row m-3 mt-3 flex-wrap">
                    <div class="col-12 col-lg-6 col-md-6 col-sm-12">
                        <div class="card m-3 border">
                            <div class="card-header bg-lightblue" style="height:5px;">
                                <div class="card-title ">
                                    <h3 class="fw-bolder text-blue">Permanent Address</h3>
                                </div>
                            </div>
                        </div>

                        <div class="d-flex flex-row m-6 flex-wrap">
                            <div class="col-12 col-lg-6 col-md-6 col-sm-12"><span class="font-bold">Address Line
                                    1</span>
                                <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                                    <textarea type="text" pattern="^(?!\s*$).+" formControlName="perm_address1"
                                        class="form-control form-control-lg form-control-solid custom-input mb-3 mb-lg-0 bg-white border-secondary custom-input mt-2"
                                        rows="3"></textarea>
                                </div>
                            </div>

                            <div class="col-12 col-lg-6 col-md-6 col-sm-12"><span class="font-bold">Address Line
                                    2</span>
                                <div class="col-lg-12 col-12 col-md-11 col-sm-11 fv-row mt-2">
                                    <textarea type="text" pattern="^(?!\s*$).+" formControlName="perm_address2"
                                        class="form-control form-control-lg form-control-solid custom-input mb-3 mb-lg-0 bg-white border-secondary custom-input mt-2"
                                        rows="3"></textarea>
                                </div>
                            </div>
                        </div>

                        <div class="d-flex flex-row m-6 flex-wrap">
                            <div class="col-12 col-lg-6 col-md-6 col-sm-12"><span class="font-bold">City</span>
                                <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                                    <input type="text" formControlName="perm_city"
                                        class="form-control form-control-lg form-control-solid bg-white custom-input mb-3 mb-lg-0 borderc-secondary"
                                        placeholder="City" />
                                </div>
                            </div>

                            <div class="col-12 col-lg-6 col-md-6 col-sm-12"><span class="font-bold">Postal Code</span>
                                <div class="col-lg-12 col-12 col-md-11 col-sm-11 fv-row mt-2">
                                    <input type="text" formControlName="perm_pincode"
                                        class="form-control form-control-lg form-control-solid bg-white custom-input mb-3 mb-lg-0 borderc-secondary"
                                        placeholder="Postal Code" />
                                </div>
                            </div>
                        </div>

                        <div class="d-flex flex-row m-6 flex-wrap">
                            <div class="col-12 col-lg-6 col-md-6 col-sm-12"><span class="font-bold">State</span>
                                <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                                    <input type="text" formControlName="perm_state"
                                        class="form-control form-control-lg form-control-solid bg-white custom-input mb-3 mb-lg-0 borderc-secondary"
                                        placeholder="State" />
                                </div>
                            </div>

                            <div class="col-12 col-lg-6 col-md-6 col-sm-12"><span class="font-bold">Country</span>
                                <ng-select class="col-lg-12 col-12 col-md-11 col-sm-11 fv-row mt-2"
                                    formControlName="perm_country" [(ngModel)]="selectedcountry" bindLabel="country"
                                    bindValue="country_gid" [items]="country_list"
                                    placeholder="Select an option"></ng-select>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-lg-6 col-md-6 col-sm-12">
                        <div class="card m-3 border">
                            <div class="card-header bg-lightblue" style="height:5px;">
                                <div class="card-title m-0">
                                    <h3 class="fw-bolder text-blue">Temporary Address</h3>
                                </div>
                            </div>
                        </div>

                        <div class="d-flex flex-row m-6 flex-wrap">
                            <div class="col-12 col-lg-6 col-md-6 col-sm-12"><span class="font-bold">Address Line
                                    1</span>
                                <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                                    <textarea type="text" pattern="^(?!\s*$).+" formControlName="temp_address1"
                                        class="form-control form-control-lg form-control-solid custom-input mb-3 mb-lg-0 bg-white border-secondary custom-input mt-2"
                                        rows="3"></textarea>
                                </div>
                            </div>

                            <div class="col-12 col-lg-6 col-md-6 col-sm-12"><span class="font-bold">Address Line
                                    2</span>
                                <div class="col-lg-12 col-12 col-md-11 col-sm-11 fv-row mt-2">
                                    <textarea type="text" pattern="^(?!\s*$).+" formControlName="temp_address2"
                                        class="form-control form-control-lg form-control-solid custom-input mb-3 mb-lg-0 bg-white border-secondary custom-input mt-2"
                                        rows="3"></textarea>
                                </div>
                            </div>
                        </div>

                        <div class="d-flex flex-row m-6 flex-wrap">
                            <div class="col-12 col-lg-6 col-md-6 col-sm-12"><span class="font-bold">City</span>
                                <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                                    <input type="text" formControlName="temp_city"
                                        class="form-control form-control-lg form-control-solid bg-white custom-input mb-3 mb-lg-0 borderc-secondary"
                                        placeholder="City" />
                                </div>
                            </div>

                            <div class="col-12 col-lg-6 col-md-6 col-sm-12"><span class="font-bold">Postal Code</span>
                                <div class="col-lg-12 col-12 col-md-11 col-sm-11 fv-row mt-2">
                                    <input type="text" formControlName="temp_pincode"
                                        class="form-control form-control-lg form-control-solid bg-white custom-input mb-3 mb-lg-0 borderc-secondary"
                                        placeholder="Postal Code" />
                                </div>
                            </div>
                        </div>

                        <div class="d-flex flex-row m-6 flex-wrap">
                            <div class="col-12 col-lg-6 col-md-6 col-sm-12"><span class="font-bold">State</span>
                                <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                                    <input type="text" formControlName="temp_state"
                                        class="form-control form-control-lg form-control-solid bg-white custom-input mb-3 mb-lg-0 borderc-secondary"
                                        placeholder="State" />
                                </div>
                            </div>

                            <div class="col-12 col-lg-6 col-md-6 col-sm-12"><span class="font-bold">Country</span>
                                <ng-select class="col-lg-12 col-12 col-md-11 col-sm-11 fv-row mt-2"
                                    formControlName="temp_country" [(ngModel)]="selectedcountry" bindLabel="country"
                                    bindValue="country_gid" [items]="country_list"
                                    placeholder="Select an option"></ng-select>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card-header bg-lightblue card-height55" style="border-radius: 0px;">
                <div class="card-title m-0">
                    <h3 class="fw-bolder text-blue">Terms and Conditions</h3>
                </div>
            </div>
            <div class="d-flex flex-row m-6 flex-wrap">
                <div class="col-12 col-lg-6 col-md-6 col-sm-12"><span class="font-bold required">Template Name</span>
                    <ng-select [items]="terms_list" class="custom col-lg-5 col-12 fv-row mt-2" bindLabel="template_name"
                        [(ngModel)]="mdlTerms" formControlName="template_name" bindValue="template_gid"
                        [ngClass]="{'invalid-border': appointmentorderform.get('template_name')?.invalid && appointmentorderform.get('template_name')?.touched}"
                        placeholder="Select an option" (change)="GetOnChangeTerms()">
                    </ng-select>
                    <div *ngIf="appointmentorderform.get('template_name')?.hasError('required') && appointmentorderform.get('template_name')?.touched"
                        class="text-red">
                        Template is required.
                    </div>
                </div>
            </div>
            <div class="d-flex flex-row m-6 flex-wrap">
                <div class="col-12 col-lg-12 col-md-12 col-sm-12 fv-row mt-2">
                    <angular-editor [config]="config"
                        formControlName="appointmentordertemplate_content"></angular-editor>


                </div>
            </div>


            <div class="text-center my-4">
                <button class="btn-success btn-sm text-white me-2" (click)="updated()"
                    [disabled]="appointmentorderform.invalid">
                    <i class="fas fa-check text-white fs-5 me-3"></i>&nbsp;Update
                </button>

                <button class="btn-primary btn-sm text-white me-4" routerLink="/hrm/HrmTrnAppointmentorder">
                    <i class="fas fa-arrow-left me-3"></i>Back
                </button>
            </div>
        </form>
    </div>
</div>