<div class="card m-5">
    <form [formGroup]="issuerequestform">
        <div class="card-title p-5 pb-3 pt-3 rounded-top bg-primary d-flex justify-content-between align-items-center">
            <h3 class="fw-bolder text-white"><i class="fas fa-plus fw-bolder fs-3">&nbsp;&nbsp;</i>Issue Request</h3>
            <button style="color: black !important;" class="btn btn-icon btn-sm bg-secondary cursor-pointer "
                title="back" routerLink="/ims/ImsTrnMaterialindent"><i
                    class="fa-solid fa-arrow-left-long fs-1 fw-bold"></i></button>
        </div>

        <div class="card mt-1 m-3 mb-0">
            <div class="card-header d-flex align-items-center mb-3 cursor-pointer" style="background-color: #def0ff;">
                <div>
                    <p class="card-title fw-bold fs-3" style="color: #2599ff;">
                        <i class="fa-solid fa-clipboard fs-1"></i> &nbsp;&nbsp;Issue Request Details
                    </p>
                </div>
            </div>

            <div class="card m-6 border mt-2">

                <div class="d-flex flex-row ms-10 m-2 flex-wrap">

                    <div class="col-12 col-lg-4 col-md-6 col-sm-12">
                        <span class="font-bold">Branch</span>
                        <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                            <input type="text" formControlName="branch_name" class="
                               form-control form-control-lg form-control-solid
                               custom-input
                               mb-3 mb-lg-0
                               bg-white
                               custom-input borderc-secondary
                              " style="height: 40px;" name="branch_name" readonly readonly />

                        </div>
                    </div>
                    <div class="col-12 col-lg-4 col-md-6 col-sm-12">
                        <span class="font-bold">Ref.No</span>
                        <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                            <input type="text" formControlName="materialrequisition_gid" class="
                                 form-control form-control-lg form-control-solid
                                 custom-input
                                 mb-3 mb-lg-0
                                 bg-white
                                 custom-input borderc-secondary
                                " style="height: 40px;" name="materialrequisition_gid" readonly />

                        </div>
                    </div>
                    <div class="col-12 col-lg-4 col-md-6 col-sm-12">
                        <div class="d-flex flex-row  flex-wrap">
                            <div class="col-12 col-lg-6 col-md-6 col-sm-12">
                                <span class="font-bold">Date<span class="ms-1 text-red"></span></span>
                                <div class="col-lg-1o col-12 col-md-10 col-sm-10 fv-row mt-2">
                                    <input type="text" formControlName="materialrequisition_date" class="
                        form-control form-control-lg form-control-solid
                        custom-input
                        mb-3 mb-lg-0
                        bg-white
                        custom-input borderc-secondary
                       " style="height: 40px;" name="materialrequisition_date" readonly />




                                </div>
                            </div>
                            <div class="col-12 col-lg-6 col-md-6 col-sm-12">
                                <span class="font-bold">Expected Date <span class="ms-1 text-red"></span></span>
                                <div class="col-lg-10 col-12 col-md-10 col-sm-10 fv-row mt-2">
                                    <input type="text" formControlName="expected_date" class="
                        form-control form-control-lg form-control-solid
                        custom-input
                        mb-3 mb-lg-0
                        bg-white
                        custom-input borderc-secondary
                       " style="height: 40px;" name="expected_date" readonly />



                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="d-flex flex-row ms-10 m-2 flex-wrap">

                    <div class="col-12 col-lg-4 col-md-6 col-sm-12">
                        <span class="font-bold">Department</span>
                        <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                            <input type="text" formControlName="department_name" class="
                                 form-control form-control-lg form-control-solid
                                 custom-input
                                 mb-3 mb-lg-0
                                 bg-white
                                 custom-input borderc-secondary
                                " style="height: 40px;" name="department_name" readonly />

                        </div>
                    </div>
                    <div class="col-12 col-lg-4 col-md-6 col-sm-12">
                        <span class="font-bold">Raised By</span>
                        <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                            <input type="text" formControlName="user_firstname" class="
                                 form-control form-control-lg form-control-solid
                                 custom-input
                                 mb-3 mb-lg-0
                                 bg-white
                                 custom-input borderc-secondary
                                " style="height: 40px;" name="user_firstname" readonly />

                        </div>
                    </div>
                    <div class="col-12 col-lg-4 col-md-6 col-sm-12">
                        <span class="font-bold">Priority</span>
                        <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                            <input type="text" formControlName="priority" class="
                                 form-control form-control-lg form-control-solid
                                 custom-input
                                 mb-3 mb-lg-0
                                 bg-white
                                 custom-input borderc-secondary
                                " style="height: 40px;" name="priority" readonly />

                        </div>
                    </div>
                </div>

                <div class="d-flex flex-row ms-10 m-2 flex-wrap">

                    <div class="col-12 col-lg-6 col-md-6 col-sm-12">
                        <span class="font-bold">MI Remarks</span>
                        <div class="col-lg-12 col-12 col-md-4 col-sm-11 fv-row mt-2">
                            <textarea style="width: 96%;" type="text" class="
                      form-control form-control-lg form-control-solid custom-input
                      mb-3 mb-lg-0  borderc-secondary bg-white custom-input"
                                formControlName="materialrequisition_remarks" class="form-control" rows="3"
                                readonly></textarea>
                        </div>
                    </div>


                    <div class="col-12 col-lg-6 col-md-6 col-sm-12"><span class="font-bold">Approval Remarks</span>
                        <div class="col-lg-12 col-12 col-md-4 col-sm-11 fv-row mt-2">
                            <textarea style="width: 96%;" type="text" class="
                form-control form-control-lg form-control-solid custom-input
                mb-3 mb-lg-0  borderc-secondary bg-white custom-input" formControlName="approver_remarks"
                                placeholder="Enter Approval Remarks" class="form-control" rows="3"></textarea>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </form>
    <div class="table-responsive">
        <div class="card card-body m-0 p-3 mb-5 bg-white rounded table-responsive">
            <div>
                <table class="table table-striped table-bordered text-blue border-bottom gs-7 align-middle">
                    <thead>
                        <tr class="fw-bold fs-6 text-nowrap bg-lightblue text-blue align-middle">
                            <th class="text-blue  text-center" style="width: 10%;">Product Group</th>
                            <th class="text-blue  text-center" style="width: 20%;">Product</th>
                            <th class="text-blue  text-center" style="width: 20%;">Description</th>
                            <th class="text-blue text-center" style="width: 8%;">Request Qty</th>
                            <th class="text-blue text-center" style="width: 8%;">Issued Qty</th>
                            <!-- <th class="text-blue text-center" style="width: 8%;">Pending MI</th> -->
                            <th class="text-blue text-center" style="width: 8%;">Pending PI</th>
                            <th class="text-blue text-center" style="width: 8%;">Stock Qty</th>
                            <!-- <th class="text-blue text-center" style="width: 10%;">Available Qty</th> -->
                            <th class="text-blue text-center" style="width: 10%;">Issue Request</th>
                        </tr>
                    </thead>
                    <tbody *ngFor="let data of productrequestlist; let i = index;">
                        <tr>
                            <td>{{ data.productgroup_name }}</td>
                            <td>{{ data.product_code }}/{{ data.product_name }}</td>
                            <td>{{ data.display_field }}</td>
                            <td>{{ data.req_qty}} {{ data.productuom_name }}</td>
                            <td>{{ data.qty_issued}} {{ data.productuom_name }}</td>
                            <!-- <td>{{ data.pending_mr}} {{ data.productuom_name }}</td> -->
                            <td>{{ data.pending_pr}} {{ data.productuom_name }}</td>
                            <td>{{ data.stock_quantity}} {{ data.productuom_name }}</td>
                            <!-- <td>{{ data.Avl_qty}} {{ data.productuom_name }}</td> -->
                            <td>
                                <span *ngIf="data.Avl_qty < 0"
                                        class="text-center ms-7"
                                        style= "color: red;">
                                        Stock Not Available
                                </span>
                                <input type="number"   *ngIf="data.Avl_qty>0"  
                                 class="form-control form-control-lg form-control-solid custom-input mb-1 mb-lg-3 borderc-secondary bg-white custom-input"
                                    style="height:20px; width: 140px;text-align: right;"
                                    [(ngModel)]="data.issuerequestqty" value="data.issuerequestqty" placeholder="0.00">
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <div class="text-center my-4">
        <button (click)="submit()" [disabled]="issuerequestform.invalid"
            [ngStyle]="{ 'cursor': issuerequestform.invalid ? 'not-allowed' : 'pointer'}" [ngClass]="{ 'btn-success': !issuerequestform.invalid,
                        'btn-secondary text-white': issuerequestform.invalid }" data-bs-dismiss="modal">
            <i class="fas fa-check text-white fs-5 "></i> &nbsp;Submit
        </button> &nbsp;&nbsp;
        <button class="btn-primary btn-sm text-white me-4" routerLink="/ims/ImsTrnMaterialindent">
            <i class="fas fa-arrow-left"></i> &nbsp; Back
        </button>

    </div>

</div>