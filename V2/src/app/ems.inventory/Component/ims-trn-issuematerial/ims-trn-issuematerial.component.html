<div class="card rounded-top mt-4">
    <div class="card-title p-5 pb-3 pt-3 rounded-top bg-primary d-flex justify-content-between align-items-center">
        <h1 class="fw-bolder text-white"><i class="fa fa-share-square fs-2" aria-hidden="true"></i>&nbsp;&nbsp;
            Issue Request</h1>
        <button style="color: black !important;" class="btn btn-icon btn-sm bg-secondary cursor-pointer " title="back"
            routerLink="/ims/ImsTrnMaterialindent"><i class="fa-solid fa-arrow-left-long fs-1 fw-bold"></i></button>
    </div>

    <form [formGroup]="issuerequestform" #form="ngForm">
        <div *ngFor="let data of issueequest_list;">
            <div class="d-flex flex-row ps-5 ms-8 me-8 flex-wrap border-bottom" >
                <div class="col-12 col-lg-4 col-md-6 col-sm-12"> <span class="fw-bold">Branch</span>
                    <p class="mt-2">{{data.branch_name}}</p>
                </div>
                <div class="col-12 col-lg-4 col-md-6 col-sm-12"><span class="fw-bold">MI Ref No</span>
                    <p class="mt-2">{{data.materialrequisition_gid}}</p>
                </div>
                <div class="col-12 col-lg-4 col-md-6 col-sm-12">
                           <span class="fw-bold">Date / Expected Date</span>
                            <p class="mt-2">{{data.materialrequisition_date}} / {{data.expected_date}}</p>
                </div>
            </div>

            <div class="d-flex flex-row ps-5 ms-8 me-8 flex-wrap border-bottom" >
                <div class="col-12 col-lg-4 col-md-6 col-sm-12"><span class="fw-bold">Department</span>
                    <p class="mt-2">{{data.department_name}}</p>
                </div>
                <div class="col-12 col-lg-4 col-md-6 col-sm-12"><span class="fw-bold">Raised By</span>
                    <p class="mt-2">{{data.user_firstname}}</p>
                </div>
                <div class="col-12 col-lg-4 col-md-6 col-sm-12"> <span class="fw-bold">Priority</span>
                    <div class="d-flex justify-content-start mt-4 ms-2">
                        <div class="form-check form-check-custom form-check-success form-check-solid form-check-sm">
                            <input class="form-check-input" type="radio" name="priority" id="N" formControlName="priority" value="N">
                            <label class="form-check-label text-gray-700 text-nowrap"
                                for="kt_builder_header_content_menu">Low</label>
                        </div>
                        <div class="form-check form-check-custom form-check-success form-check-solid form-check-sm ms-10">
                            <input class="form-check-input" type="radio" name="priority" formControlName="priority" value="Y" id="Y">
                            <label class="form-check-label text-gray-700 text-nowrap"
                                for="kt_builder_header_content_page-title">High</label>
                        </div>
                    </div>
                </div>
            </div>
            <div class="d-flex flex-row ps-5 ms-8 me-8 flex-wrap border-bottom" >
                <div class="col-12 col-lg-4 col-md-6 col-sm-12"><span class="fw-bold">MI Remarks</span>
                    <p class="mt-2">{{data.materialrequisition_remarks}}</p>
                </div>
                <div class="col-12 col-lg-8 col-md-6 col-sm-12"> <span class="fw-bold">Approver Remarks</span>
                    <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2 mb-4">
                        <textarea type="text" formControlName="approver_remarks" name="approver_remarks"
                        class="form-control form-control-lg form-control-solid borderc-secondary bg-white resize_none"
                        placeholder="Approver Remarks"  rows="3"></textarea>
                    </div>
                </div>
            </div>
        </div>
    </form>
     <div class="table-responsive">
            <div class="card card-body m-0 p-3 mb-5 bg-white rounded table-responsive">
                <div>
                    <table class="table table-striped table-row-bordered gy-5 gs-7 ">
                        <thead>
                                <tr class="fw-bolder fs-5 text-nowrap bg-lightblue text-blue align-middle">
                                <th style="width: 5%;" >S.No</th>
                                <th style="width: 20%;">Product</th>
                                <th style="width: 10%;">Product Unit</th>
                                <th style="width: 8%;">Req Qty</th>
                                <th style="width: 8%;">Issued Qty</th>
                                <th style="width: 8%;">Pending MI</th>
                                <th style="width: 8%;">Pending PR</th>
                                <th style="width: 8%;">Stock Qty</th>
                                <th style="width: 10%;">Available Qty</th>
                                <th style="width: 10%;text-align: center;">Issue Request</th>
                            </tr>
                        </thead>
                        <tbody *ngFor="let data of productrequestlist; let i = index;">
                            <tr>
                                <td>{{i+1}}</td>
                                <td>{{ data.product_code }}/{{ data.product_name }}</td>
                                <td>{{ data.productuom_name }}</td>
                                <td style="text-align: right;">
                                    <div style="margin-right: 25px;">
                                        {{ data.req_qty}}
                                    </div>
                                </td>
                                <td style="text-align: right;">
                                    <div style="margin-right: 25px;">
                                        {{ data.qty_issued}}
                                    </div>
                                </td>
                                <td style="text-align: right;">
                                    <div style="margin-right: 25px;">
                                        {{ data.pending_mr}}
                                    </div>
                                </td>
                                <td style="text-align: right;">
                                    <div style="margin-right: 25px;">
                                        {{ data.pending_pr}}
                                    </div>
                                </td>
                                <td style="text-align: right;">
                                    <div style="margin-right: 25px;">
                                        {{ data.stock_quantity}}
                                    </div>
                                </td>
                                <td style="text-align: right;">
                                    <div style="margin-right: 20px;">
                                        {{ data.Avl_qty}}
                                    </div>
                                </td>
                                <td >
                                    <input type="number"
                                    class="form-control form-control-lg form-control-solid custom-input mb-1 mb-lg-3 borderc-secondary bg-white custom-input"
                                    style="height:20px; width: 140px;text-align: right;" [(ngModel)]="data.issuerequestqty" value="data.issuerequestqty" placeholder="0.00">
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div> 
        <div class="text-center my-4">
            <button (click)="submit()" [disabled]="issuerequestform.invalid"
                  [ngStyle]="{ 'cursor': issuerequestform.invalid ? 'not-allowed' : 'pointer'}" [ngClass]="{ 'btn-success': !issuerequestform.invalid,
                        'btn-secondary text-white': issuerequestform.invalid }" data-bs-dismiss="modal">
                  <i class="fas fa-check text-white fs-5 "></i> &nbsp;Submit
                </button> &nbsp;
                <button class="btn-primary btn-sm text-white me-4" routerLink="/ims/ImsTrnMaterialindent">
                    <i class="fas fa-arrow-left"></i> &nbsp; Back
                  </button>
        </div>
    
</div>