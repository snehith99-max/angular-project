<div class="card mt-4">
    <div class="card-header   d-flex justify-content-center mb-3" Style="background: rgb(81,183,204);
    background: linear-gradient(90deg, rgba(81,183,204,1) 0%, rgba(173,221,211,1) 35%, rgba(209,242,255,1) 100%);">
    <h1 class="card-title fw-bolder fs-3 text-black">Stock Movement Report </h1>
  </div>
  <form [formGroup]="reactiveform">
  <div class="d-flex flex-row ms-6 justify-content-center">
    <div class="col-12 col-lg-2 col-md-2 col-12 mt-5 ps-8">
        <div class="col-12 col-lg-11 col-md-11 col-sm-12"><span class=" font-bold">Branch</span>
            <ng-select formControlName="branch_name" [items]="branch_list" style="height:30px !important;"
        class="custom col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2" bindLabel="branch_name"
        bindValue="branch_gid" placeholder="Select an option" [(ngModel)]="mdlBranchName" 
        (clear)="onclearbranch()">
      </ng-select>
        </div>
    </div>
    <div class="col-12 col-lg-2 col-md-2 col-12 mt-12">
        <div class="col-12 col-lg-11 col-md-11 col-sm-12">
            <button title="search" class="btn btn-icon btn-sm bg-success me-2 mt-1" style="height: 15px !important;" (click)="OnChangeFinancialYear()"><i class="fa-solid fa-magnifying-glass text-white" ></i></button>
                <button title="refresh" class="btn btn-icon btn-sm bg-warning me-2 mt-1" style="height: 15px !important;" (click)="onrefreshclick()"><i class="fa-solid fa-rotate-right text-white"></i></button>
        </div>
    </div>
</div>
</form>


        <div class="card  mt-8 mb-8">
            <div class="row ms-1 me-1 mt-5">
              <div class="col-8  ">
                <div class="col-12 card bg-white rounded ">
                  <div class="col-12 card  bg-white rounded">
                    <div class="card-header justify-content-center"
                      Style="background: rgb(81,183,204);
                background: linear-gradient(90deg, rgba(81,183,204,1) 0%, rgba(173,221,211,1) 35%, rgba(209,242,255,1) 100%);">
                      <h3 class="card-title fs-4 fw-bolder text-black"><i class="fa-regular fa-file"
                          style="font-size: 18px;  margin-right: 5px;"></i>Stock Details Chart</h3>
                    </div>
                  </div>
                  <div class="m-3 me-0 card border p-3 rounded" style="height:250px;border: 2px solid rgb(255, 254, 254);">
                    <ng-container *ngIf="flag2">
                      <div class="d-flex flex-column ">
                        <apx-chart [series]="stockchart.series" [chart]="stockchart.chart" [xaxis]="stockchart.xaxis"
                          [yaxis]="stockchart.yaxis" [dataLabels]="stockchart.dataLabels" [stroke]="stockchart.stroke"
                          [legend]="stockchart.legend" [fill]="stockchart.fill" [states]="stockchart.states"
                          [tooltip]="stockchart.tooltip" [colors]="stockchart.colors" [markers]="stockchart.markers"
                          [plotOptions]="stockchart.plotOptions">
                        </apx-chart>
                      </div>
                    </ng-container>
                    <ng-container *ngIf="!flag2">
                      <div class="d-flex justify-content-center">
                        <span>
                          <img src=".\assets\media\images\No_data_found.png" class="h-78px w-300px">
                        </span>
                      </div>
                    </ng-container>
                  </div>
            </div>
           </div>
           <div class="col-4 ">
            <div class="col-12 card  border mb-3 bg-white rounded">
              <div class="col-12 card  bg-white rounded">
                <div class="card-header justify-content-center"
                  Style="background: rgb(81,183,204);
            background: linear-gradient(90deg, rgba(81,183,204,1) 0%, rgba(173,221,211,1) 35%, rgba(209,242,255,1) 100%);">
                  <h3 class="card-title fs-4 fw-bolder text-black"><i class="fa-regular fa-file"
                      style="font-size: 18px;  margin-right: 5px;"></i>Stock Movement (Last 6 Months)</h3>
                </div>
                <div class="table-responsive">
                  <div class="card card-body p-3 mb-5 ">
                    <div class="mx-1 p-1  pb-0  table-responsive">
                      <table id="Getlastsixmonthstock_list" class="table table-striped table-row-bordered gy-5 gs-7">
                        <thead>
                          <tr class="fw-bold fs-5 text-nowrap bg-lightblue text-black">
                            <th>Month</th>
                            <th class="text-center">Stock In</th>
                            <th class="text-end">Stock Out</th>
                          </tr>
                        </thead>
                        <tbody>
                        <ng-container *ngFor="let data of Getlastsixmonthstock_list; let i=index;">
                            <tr>
                              <td class="text-start">{{ data.grn_date }}</td>
                              <td class="text-center">{{ data.grn_count }}</td>
                              <td class="text-center">{{ data.delivery_count}}</td>
                            </tr>
                          </ng-container> 
                        </tbody>
                        <tfoot></tfoot>
                      </table>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        </div>
        <div class="col-12 card  bg-white rounded ">
            <div class="card-header justify-content-center ms-3 me-3" Style="background: rgb(81,183,204);
            background: linear-gradient(90deg, rgba(81,183,204,1) 0%, rgba(173,221,211,1) 35%, rgba(209,242,255,1) 100%);">
              <h3 class="card-title fs-4 fw-bolder text-black"><i class="fa-regular fa-file"
                  style="font-size: 18px;  margin-right: 5px;"></i>Stock Detail Summary</h3>
            </div>  
      
    <div class="table-responsive">
      <input type="hidden" formControlName="product_code">
      <div class="card card-body m-3 p-3 mb-5 bg-white rounded table-responsive">
        <table id="stockreport_list" [(ngModel)]="stockreport_list"
          class="table table-striped table-row-bordered gy-5 gs-7 ">
          <thead>
            <tr class="fw-bold fs-5 text-nowrap bg-lightblue text-blue  align-middle">
              <th style="width: 5%;">S.No </th>
              <th style="width: 5%;">Branch</th>
              <th style="width: 10%;">Product Group</th>
              <th style="width: 15%;">Product</th>
              <th style="width: 25%;">Description</th>
              <th style="width: 8%;">Opening</th>
              <th style="width: 8%;">Stock In</th>
              <th style="width: 8%;">Stock Out</th>
              <th style="width: 8%;">Balance</th>
              <th class="text-center bg-lightblue ">Action</th> 
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let data of stockreport_list; let i=index;">
              <td>{{i+1}}</td>
              <td>{{data.branch_prefix}}</td>
              <td>{{data.productgroup_name}}</td>
              <td>{{data.product_code}}/{{data.product_name}}</td>
              <td>{{data.display_field}}</td>
              <td>{{data.opening_stock}} {{data.productuom_name}}</td>
              <td>{{data.qty_received}} {{data.productuom_name}}</td>
              <td>{{data.product_qtydelivered }} {{data.productuom_name}}</td>
              <td>{{data.stock_balance }} {{data.productuom_name}}</td>
              <td  class="text-center">
                <button title="View" type="button" class="btn btn-icon btn-sm bg-primary me-2"
                (click)="View(data.product_gid,data.branch_gid)" data-bs-toggle="modal"><span
                  class="fa-solid fa-eye text-white fs-6"></span></button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    </div>
  </div>
  
  