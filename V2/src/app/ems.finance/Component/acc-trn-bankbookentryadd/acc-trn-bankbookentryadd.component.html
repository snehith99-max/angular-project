<div class="card">
    <div class="card-title p-5 pb-6 pt-6 rounded-top bg-primary">
        <h3 class="fw-bolder text-white"><i class="fas fa-plus fw-bolder fs-3"></i> &nbsp;&nbsp; Add Bank Book
        </h3>
    </div>
    <form [formGroup]="BankBookEntryForm">
        <div class="m-0 me-1 d-flex flex-wrap mb-0 mt-0 ">
            <div class="col-12 col-lg-12 row ">
                <div class="col-12 col-lg-12 pe-0" *ngFor="let data of BankBookEntryView_List">
                    <div class="m-3 me-0 card shadow-lg p-3 rounded" style="border-top:2px solid rgb(8, 8, 146);">
                        <br />
                        <div class="m-9 me-1 d-flex flex-wrap mb-0 mt-0">
                            <div class="row col-lg-12 col-md-12 col-sm-12">
                                <div class="col-12 col-lg-4 col-md-12 col-sm-12">
                                    <span class="fw-bold required">Account Ref.No</span>
                                    <input type="text" formControlName="acct_refno" required
                                        class="form-control form-control-lg form-control-solid custom-input mb-3 mb-lg-0 bg-white borderc-secondary custom-input mt-2"
                                        placeholder="" />
                                    <div *ngIf="acct_refno.invalid && (acct_refno.dirty || acct_refno.touched)">
                                        <div *ngIf="acct_refno.errors?.['required']">
                                            <span style="color:red;">Account Ref.No is required.</span>
                                        </div>
                                        <div *ngIf="acct_refno.errors?.['pattern']">
                                            <span style="color:red;">Invalid format.</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-12 col-lg-4 col-md-12 col-sm-12">
                                    <span class="fw-bold required">Transaction Date</span>
                                    <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                                        <input type="date" pattern="^(?!\s*$).+" style="height: 40px;" required
                                        [ngStyle]="{ 'border-color': BankBookEntryForm.get('transaction_date')?.hasError('required') && BankBookEntryForm.get('transaction_date')?.touched ? 'red' : 'rgb(209, 209, 209)' , 'height': '42px'}"
                                        formControlName="transaction_date"
                                        class="form-control form-control-lg form-control-solid date-picker custom-input mb-3 mb-lg-0 bg-white custom-input date-picker mt-2"
                                        placeholder="DD-MM-YYYY" />
                                    </div>
                                    <div *ngIf="transaction_date.invalid && (transaction_date.dirty || transaction_date.touched)">
                                        <div *ngIf="transaction_date.errors?.['required']">
                                            <span style="color:red;">Date is required.</span>
                                        </div>
                                      
                                    </div>
                                </div>
                                <div class="col-12 col-lg-4 col-md-12 col-sm-12">
                                    <span class="fw-bold">Bank Name</span>
                                    <p class="mt-3">{{data.bank_name}}</p>
                                </div>
                            </div>
                        </div>
                        <br />
                        <div class="m-9 me-1 d-flex flex-wrap mb-0 mt-0">
                            <div class="row col-lg-12 col-md-12 col-sm-12">
                                <div class="col-12 col-lg-2 col-md-12 col-sm-12 mb-8">
                                    <span class="fw-bold">Account No</span>
                                    <p class="mt-3">{{data.account_no}}</p>
                                </div>
                                <div class="col-12 col-lg-2 col-md-12 col-sm-12">
                                    <span class="fw-bold">Account Type</span>
                                    <p class="mt-3">{{data.account_type}}</p>
                                </div>
                                <div class="col-12 col-lg-2 col-md-12 col-sm-12">
                                    <span class="fw-bold">IFSC Code</span>
                                    <p class="mt-3">{{data.ifsc_code}}</p>
                                </div>
                                <div class="col-12 col-lg-2 col-md-12 col-sm-12">
                                    <span class="fw-bold">NEFT Code</span>
                                    <p class="mt-3">{{data.neft_code}}</p>
                                </div>
                                <div class="col-12 col-lg-2 col-md-12 col-sm-12">
                                    <span class="fw-bold">Swift Code</span>
                                    <p class="mt-3">{{data.swift_code}}</p>
                                </div>
                                <div class="col-12 col-lg-2 col-md-12 col-sm-12">
                                    <span class="fw-bold">GL Code</span>
                                    <p class="mt-3">{{data.gl_code}}</p>
                                </div>
                            </div>
                        </div>
                        <div class="m-9 me-1 d-flex flex-wrap mb-0 mt-0">
                            <div class="row col-lg-12 col-md-12 col-sm-12">
                                <div class="col-12 col-lg-12 col-md-6 col-sm-12">
                                    <span class="fw-bold">Remarks</span>
                                    <textarea class="form-control bg-white borderc-secondary mt-2" rows="3"
                                        formControlName="direct_remarks" style="border-radius: 5px;"
                                        placeholder="Enter Remarks.."></textarea>
                                </div>
                            </div>
                        </div>
                        <br />
                    </div>
                </div>
            </div>
        </div>
        <form [formGroup]="bankbookmultipleform">
            <div class="m-0 me-1 d-flex flex-wrap mb-0 mt-0 ">
                <div class="col-12 col-lg-12 row">
                    <div class="col-12 col-lg-12 pe-0">
                        <div class="m-3 me-0 card shadow-lg p-3 rounded" style="border-top:2px solid rgb(8, 8, 146);">
                            <div class="d-flex flex-row m-9 mt-5 flex-wrap">
                                <div class="row col-lg-12 col-md-12 col-sm-12">
                                    <div class="col-12 col-lg-3 col-md-12 col-sm-12">
                                        <span class="fw-bold">Account Group</span>
                                        <ng-select [items]="GetAccountNameDropdown" placeholder="Select an option"
                                            formControlName="accountgroup_name" (change)="Select_Ledger()"
                                            class="custom col-lg-12 col-12 col-md-11 col-sm-11 fv-row mt-2"
                                            bindLabel="account_name" bindValue="account_gid"></ng-select>
                                    </div>
                                    <div class="col-12 col-lg-3 col-md-12 col-sm-12">
                                        <span class="fw-bold required">Account Name</span>
                                        <ng-select [items]="Getledgername_List" placeholder="Select an option"
                                            formControlName="account_name" required
                                            class="custom col-lg-12 col-12 col-md-11 col-sm-11 fv-row mt-2"
                                            bindLabel="account_name" bindValue="account_gid"></ng-select>
                                        <div
                                            *ngIf="account_name.invalid && (account_name.dirty || account_name.touched)">
                                            <div *ngIf="account_name.errors?.['required']">
                                                <span style="color:red;">Account Name is required.</span>
                                            </div>
                                            <div *ngIf="account_name.errors?.['pattern']">
                                                <span style="color:red;">Account Name is required.</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-12 col-lg-2 col-md-2 col-sm-12">
                                        <span class="fw-bold">Transaction Type</span>
                                        <ng-select [items]="transactiontypelist" formControlName="transaction_type"
                                            class="custom col-lg-12 col-12 col-md-11 col-sm-11 fv-row mt-2"
                                            bindLabel="trans_type" bindValue="trans_type"></ng-select>
                                    </div>
                                    <div class="col-12 col-lg-1 col-md-12 col-sm-12">
                                        <span class="fw-bold required">Trans. Amount</span>
                                        <input type="text" placeholder="0.00" formControlName="transaction_amount"
                                            required
                                            class="form-control form-control-lg form-control-solid custom-input mb-3 mb-lg-0 bg-white borderc-secondary custom-input mt-2 text-end" />
                                        <div
                                            *ngIf="transaction_amount.invalid && (transaction_amount.dirty || transaction_amount.touched)">
                                            <div *ngIf="transaction_amount.errors?.['required']">
                                                <span style="color:red;">Amount is required.</span>
                                            </div>
                                            <div *ngIf="transaction_amount.errors?.['pattern']">
                                                <span style="color:red;">Amount is required.</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-12 col-lg-2 col-md-12 col-sm-12">
                                        <span class="fw-bold">Remarks</span>
                                        <textarea class="form-control bg-white borderc-secondary mt-2" rows="2"
                                            formControlName="txtremarks" style="border-radius: 5px;"
                                            placeholder="Enter Remarks.."></textarea>
                                    </div>
                                    <div class="col-12 col-lg-1 col-md-12 col-sm-12">
                                        <span class="fw-bold">Action</span>
                                        <br /><br />
                                        <button title="Add" type="button" class="btn btn-icon btn-sm bg-success me-1"
                                            (click)="submit()" [disabled]="bankbookmultipleform.invalid"
                                            [ngStyle]="{ 'cursor': bankbookmultipleform.invalid ? 'not-allowed' : 'pointer'}"
                                            [ngClass]="{ 'btn-success': !bankbookmultipleform.invalid,
                                            'btn-secondary text-white': bankbookmultipleform.invalid }">
                                            <span Class="fa-solid fa-plus text-white  fs-6"></span></button>
                                    </div>
                                </div>
                            </div>
                            <div class="d-flex flex-row m-2 mt-0 flex-wrap">
                                <div class="row col-lg-12 col-md-12 col-sm-12">
                                    <div class="table-responsive">
                                        <div class="mx-3 p-3 pt-0 pb-0 bg-white rounded">
                                            <table id="AccountMulAdd_List"
                                                class="table table-striped table-row-bordered border-bottom gs-7 align-middle">
                                                <thead>
                                                    <tr
                                                        class="fw-bolder fs-5 text-nowrap bg-lightblue text-blue align-middle">
                                                        <th style="width:2%">S.No</th>
                                                        <th>Account Group</th>
                                                        <th>Account Name</th>
                                                        <th>Transaction Type</th>
                                                        <th class="text-end">Transaction Amount</th>
                                                        <th>Remarks</th>
                                                        <th class="text-center">Action </th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr *ngFor="let data of AccountMulAdd_List; let i=index;">
                                                        <td>{{i+1}}</td>
                                                        <td>{{data.accountgroup_name}}</td>
                                                        <td>{{data.account_name}}</td>
                                                        <td>{{data.dr_cr}}</td>
                                                        <td style="text-align: right;">{{data.transaction_amount}}</td>
                                                        <td>{{data.remarks}}</td>
                                                        <td class="text-center text-nowrap">
                                                            <!-- <div (click)="toggleOptions(data)" style="cursor: pointer;">
                                                                <button class="btn me-2 p-1 "><span class="fa-solid fa-ellipsis-vertical fs-1"
                                                                        style="color: #4d4d4d;"></span></button>
                                                                <div *ngIf="showOptionsDivId === data"
                                                                    class="pb-0 rounded bg-white cursor-pointer icon_menu">
                                                                    Add Icons
                                                                    <div class="d-flex p-3 pb-3 Icon_hover" 
                                                                    data-bs-toggle="modal"
                                                                    data-bs-target="#myModaldelete"
                                                                    (click)="delete(data)">
                                                                        <span><i class="fa-solid fa-trash fs-3 me-5"></i></span>
                                                                        <span>Delete</span>
                                                                    </div>
                                                                    Add Icons
                                                                </div>
                                                            </div> -->
                                                            <button title="Delete" type="button" (click)="delete(data)"
                                                                data-bs-toggle="modal" data-bs-target="#myModaldelete"
                                                                class="btn btn-icon btn-sm bg-danger me-2"><span
                                                                    class="fa-regular fa-trash-can text-white  fs-6"></span></button>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </form>
        <br />
        <div class="text-center mt-4">
            <button type="submit" class="btn-success text-white" (click)="submit_bankbook()"
                [disabled]="BankBookEntryForm.invalid"
                [ngStyle]="{ 'cursor': BankBookEntryForm.invalid ? 'not-allowed' : 'pointer'}" [ngClass]="{ 'btn-success': !BankBookEntryForm.invalid,
                        'btn-secondary text-white': BankBookEntryForm.invalid }">
                <i class="fas fa-check text-white fs-5"></i>&nbsp;
                Submit
            </button> &nbsp;
            <button class="btn-primary btn-sm text-white me-4" (click)="back()">
                <i class="fas fa-arrow-left text-white"></i> &nbsp; Back
            </button>
        </div>
    </form>
</div>
<div class="modal" id="myModaldelete" data-bs-backdrop="static" data-bs-keyboard="false">
    <div class="modal-dialog del_modal-dialog modal-dialog-centered">
        <div class="modal-content del_modal-content">
            <form [formGroup]="BankBookMulAddDeleteForm">
                <div class="text-center my-4">
                    <br />
                    <h2><b>Are you sure?</b></h2>
                    <br />
                    <p style="display: block;font-size: 14px;">Do You Want To Delete the Record ?</p>
                    <div class="text-center my-4">
                        <button class="btn-danger btn-sm text-white me-4" (click)="submit_delete()"
                            data-bs-dismiss="modal">
                            <i class="bi bi-trash-fill text-white fs-5 me-2"></i>Delete
                        </button>
                        <button class="btn-primary btn-sm text-white me-2" data-bs-dismiss="modal">
                            <i class="fas fa-close text-white me-2"></i>Close
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>