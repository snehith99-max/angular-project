<div class="card m-4">
    <div class="card-header bg-primary card-height55">
        <div class="card-title m-0 ">
            <h3 class="fw-bolder text-white">Add Bank</h3>
        </div>
    </div>
    <form [formGroup]="reactiveform" (ngSubmit)="onsubmit()">
       
        <div class="d-flex flex-row m-6 flex-wrap">


            <div class="col-12 col-lg-4 col-md-6 col-sm-12"><span class="font-bold required ">Branch Name</span>
                <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                    <ng-select
                        class="form-select form-control-lg bg-white form-select-lg borderc-secondary custom-input select2"
                        formControlName="branch_name" required
                        class="custom col-lg-12 col-12 col-md-11 col-sm-11 fv-row mt-2" bindLabel="branch_name"
                        bindValue="branch_gid" [items]="branchname_list" placeholder="Select an option"
                        [ngClass]="{'invalid-border': branch_name.invalid && branch_name.touched}" [(ngModel)]="mdlBranchName"></ng-select>
                </div>
                <div *ngIf="branch_name.invalid && (branch_name.dirty || branch_name.touched)">
                    <div *ngIf="branch_name.errors?.['required']">
                        <span style="color:red;">Branch Name is required.</span>
                    </div>
                    <div *ngIf="branch_name.errors?.['pattern']">
                        <span style="color:red;">Branch Name is required.</span>
                    </div>
                </div>

            </div>
            <div class="col-12 col-lg-4 col-md-6 col-sm-12"><span class="font-bold required">Bank Name</span>
                <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                    <input type="text"
                        class="form-control form-control-lg form-control-solid custom-input mb-3 mb-lg-0 borderc-secondary bg-white custom-input"
                        placeholder="Enter Bank Name" formControlName="bank_name"
                        [ngClass]="{'invalid-border': bank_name.invalid && bank_name.touched}"/>
                </div>
                <div *ngIf="bank_name.invalid && (bank_name.dirty || bank_name.touched)">
                    <div *ngIf="bank_name.errors?.['required']">
                        <span style="color:red;">Bank Name is required.</span>
                    </div>
                    <div *ngIf="bank_name.errors?.['pattern']">
                        <span style="color:red;">Invalid Format.</span>
                    </div>
                </div>

            </div>

            <div class="col-12 col-lg-4 col-md-6 col-sm-12"><span class="font-bold required">A/C Type</span>
                <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                    <ng-select 
                        class="form-select form-control-lg bg-white form-select-lg borderc-secondary custom-input select2"
                        formControlName="account_type" required
                        class="custom col-lg-12 col-12 col-md-11 col-sm-11 fv-row mt-2" bindLabel="value"
                        bindValue="id" [items]="accounttype_list" placeholder="Select an option"
                        [ngClass]="{'invalid-border': account_type.invalid && account_type.touched}" [(ngModel)]="mdlAccountType"></ng-select>
                        
                </div>
                <div *ngIf="account_type.invalid && (account_type.dirty || account_type.touched)">
                    <div *ngIf="account_type.errors?.['required']">
                        <span style="color:red;">Account Type is required.</span>
                    </div>
                    <div *ngIf="account_type.errors?.['pattern']">
                        <span style="color:red;">Account Type is required.</span>
                    </div>
                </div>
            </div>

           
        </div>
        <div class="d-flex flex-row m-6 flex-wrap"> 
            <div class="col-12 col-lg-4 col-md-6 col-sm-12"><span class="font-bold required">A/C No</span>
                <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                    <input type="text" 
                        class="form-control form-control-lg form-control-solid custom-input mb-3 mb-lg-0 borderc-secondary bg-white custom-input"
                        placeholder="Enter A/C No" formControlName="account_no"
                        [ngClass]="{'invalid-border': account_no.invalid && account_no.touched}" maxlength="20" oninput="this.value = this.value.replace(/[^0-9]/g, '')"/>
                        
                </div>
                <div *ngIf="account_no.invalid && (account_no.dirty || account_no.touched)">
                    <div *ngIf="account_no.errors?.['required']">
                        <span style="color:red;">Account Number is required.</span>
                    </div>
                    <div *ngIf="account_no.errors?.['pattern']">
                        <span style="color:red;">Account Number is required.</span>
                    </div>
                </div>
            </div>
            <div class="col-12 col-lg-4 col-md-6 col-sm-12"><span class="font-bold">IFSC Code</span>
                <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                    <input type="text" 
                        class="form-control form-control-lg form-control-solid custom-input mb-3 mb-lg-0 borderc-secondary bg-white custom-input"
                        placeholder="Enter IFSC Code" formControlName="ifsc_code" oninput="this.value = this.value.replace(/[^A-Za-z0-9]/g, '')"  maxlength="11"/>
                        <div *ngIf="reactiveform.controls['ifsc_code'].invalid && (reactiveform.controls['ifsc_code'].dirty || reactiveform.controls['ifsc_code'].touched)">
                            <div *ngIf="reactiveform.controls['ifsc_code'].errors?.['minlength']">
                              <span style="color:red;">IFSC Code must be exactly 11 characters long.</span>
                            </div>
                          </div>
                </div>
            </div>

            <div class="col-12 col-lg-4 col-md-6 col-sm-12"><span class="font-bold">Swift Code</span>
                <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                    <input type="text" 
                        class="form-control form-control-lg form-control-solid custom-input mb-3 mb-lg-0 borderc-secondary bg-white custom-input"
                        placeholder="Enter Swift Code" formControlName="swift_code" oninput="this.value = this.value.replace(/[^A-Za-z0-9]/g, '')"  maxlength="11"/>
                        <div *ngIf="reactiveform.controls['swift_code'].invalid && (reactiveform.controls['swift_code'].dirty || reactiveform.controls['swift_code'].touched)">
                            <div *ngIf="reactiveform.controls['swift_code'].errors?.['minlength']">
                              <span style="color:red;">Swift Code must be exactly 11 characters long.</span>
                            </div>
                          </div>
                </div>
            </div>
           

        </div>
        <div class="d-flex flex-row m-6 flex-wrap">
            
            <div class="col-12 col-lg-4 col-md-6 col-sm-12"><span class="font-bold required">Account Group</span>
                <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                    <ng-select
                        class="form-select form-control-lg bg-white form-select-lg borderc-secondary custom-input select2"
                        formControlName="accountgroup_name" required
                        class="custom col-lg-12 col-12 col-md-11 col-sm-11 fv-row mt-2" bindLabel="accountgroup_name"
                        bindValue="accountgroup_gid" [items]="accountgroup_list"
                        placeholder="Select an option"
                        [ngClass]="{'invalid-border': accountgroup_name.invalid && accountgroup_name.touched}" [(ngModel)]="mdlAccountGroup"></ng-select>
                </div>
                <div *ngIf="accountgroup_name.invalid && (accountgroup_name.dirty || accountgroup_name.touched)">
                    <div *ngIf="accountgroup_name.errors?.['required']">
                        <span style="color:red;">Account Group is required.</span>
                    </div>
                    <div *ngIf="accountgroup_name.errors?.['pattern']">
                        <span style="color:red;">Account Group is required.</span>
                    </div>
                </div>
            </div>

            <!-- <div class="col-12 col-lg-4 col-md-6 col-sm-12"><span class="font-bold required">Opening Balance</span>
                <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                    <input type="number" style="text-align:right;"
                        class="form-control form-control-lg form-control-solid custom-input mb-3 mb-lg-0 borderc-secondary bg-white custom-input"
                        placeholder="0.00" formControlName="openning_balance" class="form-control" pattern="^\d{1,3}(?:,\d{3})*(?:\.\d{1,2})?$"
                        [ngClass]="{'invalid-border': openning_balance.invalid && openning_balance.touched}"/>
                </div>
                <div *ngIf="openning_balance.invalid && (openning_balance.dirty || openning_balance.touched)">
                    <div *ngIf="openning_balance.errors?.['required']">
                        <span style="color:red;">Opening Balance is required.</span> 
                    </div>
                    <div *ngIf="openning_balance.errors?.['pattern']">
                        <span style="color:red;">Invalid Format.</span>
                    </div>
                </div>

            </div> -->

            <div class="col-12 col-lg-4 col-md-6 col-sm-12">
                <span class="font-bold required">Opening Balance</span>
                <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                    <input 
                    type="text" 
                    style="text-align:right;" 
                    class="form-control form-control-lg form-control-solid custom-input mb-3 mb-lg-0 borderc-secondary bg-white custom-input"
                    placeholder="0.00" 
                    formControlName="openning_balance" 
                    (input)="formatCurrency($event)" 
                    (keypress)="validateNumericInput($event)"
                    [ngClass]="{'invalid-border': openning_balance.invalid && (openning_balance.dirty || openning_balance.touched)}"
                  />
                </div>
                <div *ngIf="openning_balance.invalid && (openning_balance.dirty || openning_balance.touched)">
                    <div *ngIf="openning_balance.errors?.['required']">
                        <span style="color:red;">Opening Balance is required.</span>
                    </div>
                    <div *ngIf="openning_balance.errors?.['pattern']">
                        <span style="color:red;">Invalid Format. Please enter a valid number.</span>
                    </div>
                </div>
            </div>
            
            <div class="col-12 col-lg-4 col-md-6 col-sm-12"><span class="font-bold required">Date</span>
                    <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                        <input type="date" pattern="^(?!\s*$).+" 
                            [ngStyle]="{ 'border-color': reactiveform.get('created_date')?.hasError('required') && reactiveform.get('created_date')?.touched ? 'red' : 'rgb(209, 209, 209)' , 'height': '42px'}"
                            formControlName="created_date"
                            class="form-control form-control-lg form-control-solid date-picker custom-input mb-3 mb-lg-0 bg-white custom-input date-picker mt-2"
                            placeholder="DD-MM-YYYY" />
                        
                        </div>
                    <div *ngIf="created_date.invalid && (created_date.dirty || created_date.touched)">
                        <div *ngIf="created_date.errors?.['required']">
                            <span style="color:red;">Date is required.</span>
                        </div>
                        <div *ngIf="created_date.errors?.['pattern']">
                            <span style="color:red;">Invalid date format.</span>
                        </div>
                    </div>
                </div>
               
           
          </div>
            

            <div class="d-flex flex-row m-6 flex-wrap">
                <div class="col-12 col-lg-4 col-md-6 col-sm-12"><span class="font-bold">Remarks</span>
                    <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
    
                        <textarea type="text"
                            class="form-control form-control-lg form-control-solid custom-input mb-3 mb-lg-0  borderc-secondary bg-white custom-input"
                            placeholder="" formControlName="remarks" class="form-control"></textarea>
                    </div>
                </div>
                
            </div>
<br>
        <div class="text-center my-4">
        
                <button  data-bs-dismiss="modal"  [disabled]="reactiveform.invalid"
                [ngStyle]="{ 'cursor': reactiveform.invalid ? 'not-allowed' : 'pointer'}" [ngClass]="{ 'btn-success': !reactiveform.invalid,
        'btn-secondary text-white': reactiveform.invalid }"  class="primary-button">
                    <i class="fas fa-check text-white fs-5"></i> &nbsp;Submit
                </button>
                &nbsp;&nbsp;

            <button class="btn-primary btn-sm text-white me-4" (click)="redirecttolist()">
                <i class="ki-duotone ki-entrance-right fs-5">
                    <i class="path1"></i>
                    <i class="path2"></i>
                </i>&nbsp;Back</button>

        </div>
        <br>

    </form>