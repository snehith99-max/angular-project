<div class="card">
    <div class="card-title p-5 pb-6 pt-6 rounded-top bg-primary">
        <h3 class="fw-bolder text-white">Add Cash Book
        </h3>
    </div>
    <form [formGroup]="CashBookEntryForm">
        <div class="m-0 me-1 d-flex flex-wrap mb-0 mt-0 ">
            <div class="col-12 col-lg-12 row ">
                <div class="col-12 col-lg-12 pe-0">
                    <div class="m-3 me-0 card shadow-lg p-3 rounded" style="border-top:2px solid rgb(8, 8, 146);">
                        <br />
                        <div class="m-9 me-1 d-flex flex-wrap mb-0 mt-0">
                            <div class="row col-lg-12 col-md-12 col-sm-12">
                                <div class="col-12 col-lg-4 col-md-12 col-sm-12">
                                    <span class="font-bold required">Account Ref.No</span>
                                    <input type="text" formControlName="acct_refno"
                                        class="form-control form-control-lg form-control-solid custom-input mb-3 mb-lg-0 bg-white borderc-secondary custom-input mt-2"
                                        placeholder="" />
                                </div>
                                <div class="col-12 col-lg-4 col-md-12 col-sm-12">
                                    <span class="font-bold required">Transaction Date</span>
                                    <input type="date" placeholder="" required placeholder="DD-MM-YYYY"
                                        formControlName="transaction_date"
                                        class="form-control  date-picker custom-input mb-3  bg-white custom-input mt-2"
                                        pattern="^(?!\s*$).+" />
                                </div>
                                <div class="col-12 col-lg-4 col-md-12 col-sm-12"
                                    *ngFor="let data of CashBookEntryView_List">
                                    <span class="font-bold">Branch Code</span>
                                    <p class="mt-3">{{data.branch_code}}</p>
                                </div>
                            </div>
                        </div>
                        <br />
                        <div class="m-9 me-1 d-flex flex-wrap mb-0 mt-0">
                            <div class="row col-lg-12 col-md-12 col-sm-12">
                                <div class="col-12 col-lg-4 col-md-12 col-sm-12"
                                    *ngFor="let data of CashBookEntryView_List">
                                    <span class="font-bold">Branch</span>
                                    <p class="mt-3">{{data.branch_name}}</p>
                                </div>
                                <div class="col-12 col-lg-4 col-md-12 col-sm-12"
                                    *ngFor="let data of CashBookEntryView_List">
                                    <span class="font-bold">GL Code</span>
                                    <p class="mt-3">{{data.gl_code}}</p>
                                </div>
                                <div class="col-12 col-lg-4 col-md-12 col-sm-12"
                                    *ngFor="let data of CashBookEnterBy_List">
                                    <span class="font-bold">Entered By</span>
                                    <p class="mt-3">{{data.employee_name}}</p>
                                </div>
                            </div>
                        </div>
                        <br />
                        <div class="m-9 me-1 d-flex flex-wrap mb-0 mt-0">
                            <div class="row col-lg-12 col-md-12 col-sm-12">
                                <div class="col-12 col-lg-12 col-md-6 col-sm-12">
                                    <span class="font-bold">Remarks</span>
                                    <textarea class="form-control bg-white borderc-secondary mt-2" rows="3"
                                        formControlName="direct_remarks" style="border-radius: 5px;"
                                        placeholder="Enter Remarks.."></textarea>
                                </div>
                            </div>
                        </div>
                        <br />
                    </div>
                </div>
            </div>
        </div>
        <form [formGroup]="cashbookmultipleform">
            <div class="m-0 me-1 d-flex flex-wrap mb-0 mt-0 ">
                <div class="col-12 col-lg-12 row ">
                    <div class="col-12 col-lg-12 pe-0">
                        <div class="m-3 me-0 card shadow-lg p-3 rounded" style="border-top:2px solid rgb(8, 8, 146);">
                            <div class="d-flex flex-row m-9 mt-5 flex-wrap">
                                <div class="row col-lg-12 col-md-12 col-sm-12">
                                    <div class="col-12 col-lg-2 col-md-12 col-sm-12">
                                        <span class="font-bold">Account Group</span>
                                        <ng-select [items]="AccountGroup_List" placeholder="Select an option"
                                            formControlName="accountgroup_name"
                                            class="custom col-lg-12 col-12 col-md-11 col-sm-11 fv-row mt-2"
                                            bindLabel="accountgroup_name" bindValue="accountgroup_gid"></ng-select>
                                    </div>
                                    <div class="col-12 col-lg-2 col-md-12 col-sm-12">
                                        <span class="font-bold required">Account Name</span>
                                        <ng-select [items]="Account_List" placeholder="Select an option"
                                            formControlName="account_name" required
                                            class="custom col-lg-12 col-12 col-md-11 col-sm-11 fv-row mt-2"
                                            bindLabel="account_name" bindValue="account_gid"></ng-select>
                                        <div
                                            *ngIf="account_name.invalid && (account_name.dirty || account_name.touched)">
                                            <div *ngIf="account_name.errors?.['required']">
                                                <span style="color:red;">Account Name is required.</span>
                                            </div>
                                            <div *ngIf="account_name.errors?.['pattern']">
                                                <span style="color:red;">Account Name is required.</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-12 col-lg-2 col-md-12 col-sm-12">
                                        <span class="font-bold">Transaction Type</span>
                                        <ng-select [items]="transactiontypelist" formControlName="transaction_type"
                                            class="custom col-lg-12 col-12 col-md-11 col-sm-11 fv-row mt-2"
                                            bindLabel="trans_type" bindValue="trans_type"></ng-select>
                                    </div>
                                    <div class="col-12 col-lg-2 col-md-12 col-sm-12">
                                        <span class="font-bold required">Transaction Amount</span>
                                        <input type="text" placeholder="0.00" formControlName="transaction_amount"
                                            required
                                            class="form-control form-control-lg form-control-solid custom-input mb-3 mb-lg-0 bg-white borderc-secondary custom-input mt-2 text-end" />
                                        <div
                                            *ngIf="transaction_amount.invalid && (transaction_amount.dirty || transaction_amount.touched)">
                                            <div *ngIf="transaction_amount.errors?.['required']">
                                                <span style="color:red;">Transaction Amount is required.</span>
                                            </div>
                                            <div *ngIf="transaction_amount.errors?.['pattern']">
                                                <span style="color:red;">Transaction Amount is required.</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-12 col-lg-3 col-md-12 col-sm-12">
                                        <span class="font-bold">Remarks</span>
                                        <textarea class="form-control bg-white borderc-secondary mt-2" rows="2"
                                            formControlName="txtremarks" style="border-radius: 5px;"
                                            placeholder="Enter Remarks.."></textarea>
                                    </div>
                                    <div class="col-12 col-lg-1 col-md-12 col-sm-12">
                                        <span class="font-bold">Action</span>
                                        <br /><br />
                                        <button title="Add" type="button" class="btn btn-icon btn-sm bg-success me-1"
                                            (click)="submit()" [disabled]="cashbookmultipleform.invalid"
                                            [ngStyle]="{ 'cursor': cashbookmultipleform.invalid ? 'not-allowed' : 'pointer'}"
                                            [ngClass]="{ 'btn-success': !cashbookmultipleform.invalid,
                                            'btn-secondary text-white': cashbookmultipleform.invalid }">
                                            <span Class="fa-solid fa-plus text-white  fs-6"></span></button>
                                    </div>
                                </div>
                            </div>
                            <div class="d-flex flex-row m-2 mt-0 flex-wrap">
                                <div class="row col-lg-12 col-md-12 col-sm-12">
                                    <div class="table-responsive">
                                        <div class="mx-3 p-3 pt-0 pb-0 bg-white rounded">
                                            <table id="CashAccountMulAdd_List"
                                                class="table table-striped table-row-bordered border-bottom gs-7 align-middle">
                                                <thead>
                                                    <tr
                                                        class="fw-bolder fs-5 text-nowrap bg-lightblue text-blue align-middle">
                                                        <th style="width:2%">S.No</th>
                                                        <th>Account Group</th>
                                                        <th>Account Name</th>
                                                        <th>Transaction Type</th>
                                                        <th class="text-end">Transaction Amount</th>
                                                        <th class="text-center">Action </th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr *ngFor="let data of CashAccountMulAdd_List; let i=index;">
                                                        <td>{{i+1}}</td>
                                                        <td>{{data.accountgroup_name}}</td>
                                                        <td>{{data.account_name}}</td>
                                                        <td>{{data.dr_cr}}</td>
                                                        <td class="text-end">{{data.transaction_amount}}</td>
                                                        <td class="text-center text-nowrap">
                                                            <div (click)="toggleOptions(data)" style="cursor: pointer;">
                                                                <button class="btn me-2 p-1 "><span
                                                                        class="fa-solid fa-ellipsis-vertical fs-1"
                                                                        style="color: #4d4d4d;"></span></button>
                                                                <div *ngIf="showOptionsDivId === data"
                                                                    class="pb-0 rounded bg-white cursor-pointer icon_menu">
                                                                    <!-- Add Icons -->
                                                                    <div class="d-flex p-3 pb-3 Icon_hover"
                                                                        data-bs-toggle="modal"
                                                                        data-bs-target="#myModaldelete"
                                                                        (click)="delete(data)">
                                                                        <span><i
                                                                                class="fa-solid fa-trash fs-3 me-5"></i></span>
                                                                        <span>Delete</span>
                                                                    </div>
                                                                    <!-- Add Icons -->
                                                                </div>
                                                            </div>
                                                            <!-- <button title="Delete" type="button" (click)="delete(data)"
                                                                data-bs-toggle="modal" data-bs-target="#myModaldelete"
                                                                class="btn btn-icon btn-sm bg-danger me-2"><span
                                                                    class="fa-solid fa-trash text-white  fs-6"></span></button> -->
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </form>
        <br />
        <div class="text-center mt-4">
            <button type="submit" class="btn-success text-white" (click)="submit_cashbookbook()"
                [disabled]="CashBookEntryForm.invalid"
                [ngStyle]="{ 'cursor': CashBookEntryForm.invalid ? 'not-allowed' : 'pointer'}" [ngClass]="{ 'btn-success': !CashBookEntryForm.invalid,
                    'btn-secondary text-white': CashBookEntryForm.invalid }">
                <i class="fas fa-check text-white fs-5"></i>&nbsp;
                Submit
            </button> &nbsp;
            <button class="btn-primary btn-sm text-white me-4" (click)="back()">
                <i class="fas fa-arrow-left text-white"></i> &nbsp; Back
            </button>
        </div>
    </form>
</div>
<div class="modal" id="myModaldelete" data-bs-backdrop="static" data-bs-keyboard="false">
    <div class="modal-dialog del_modal-dialog">
        <div class="modal-content del_modal-content">
            <form [formGroup]="CashBookMulAddDeleteForm">
                <div class="text-center my-4">
                    <br />
                    <h2><b>Are you sure?</b></h2>
                    <br />
                    <p style="display: block;font-size: 14px;">Do You Want To Delete the Record ?</p>
                    <div class="text-center my-4">
                        <button class="btn-danger btn-sm text-white me-4" (click)="submit_delete()"
                            data-bs-dismiss="modal">
                            <i class="bi bi-trash-fill text-white fs-5 me-2"></i>Delete
                        </button>
                        <button class="btn-primary btn-sm text-white me-2" data-bs-dismiss="modal">
                            <i class="fas fa-close text-white me-2"></i>Close
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>