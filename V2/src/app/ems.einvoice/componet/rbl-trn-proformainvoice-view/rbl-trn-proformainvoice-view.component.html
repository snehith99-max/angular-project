<div class="card">
    <div class="card-title p-5 pb-6 pt-6 rounded-top bg-primary">
        <h3 class="fw-bolder text-white"><i class="fa-solid fa-eye fs-2"></i> &nbsp;&nbsp;&nbsp; Proforma
            Invoice View
            <i class="bi bi-arrow-left-square-fill float-end fs-1 me-6" (click)="back()"></i>
        </h3>
    </div>
    <div class="card m-3">
        <div *ngFor="let m of ProformaInvoiceEditlist">

            <div class="d-flex flex-row m-3 mt-6 flex-wrap border-bottom">
                <div class="col-12 col-lg-3 col-md-6 col-sm-12 "><span class="fw-bold">Invoice Reference No </span>
                    <p class="mt-3">{{m.invoice_refno}}</p>
                </div>
                <div class="col-12 col-lg-3 col-md-6 col-sm-12"><span class="fw-bold">Invoice Date</span>
                    <p class="mt-3">{{m.invoice_date}}</p>
                </div>
                <div class="col-12 col-lg-3 col-md-6 col-sm-12"> <span class="fw-bold">SO Reference No </span>
                    <p class="mt-3">{{m.so_referenceno1}}</p>
                </div>
                <div class="col-12 col-lg-3 col-md-6 col-sm-12"><span class="fw-bold">Payment Term (In Days)</span>
                    <p class="mt-3">{{m.payment_term}}</p>
                </div>
            </div>
            <div class="d-flex flex-row m-3 mt-6 flex-wrap border-bottom">

                <div class="col-12 col-lg-3 col-md-6 col-sm-12"><span class="fw-bold">Due Date</span>
                    <p class="mt-3">{{m.payment_date}}</p>
                </div>
                <div class="col-12 col-lg-3 col-md-6 col-sm-12"> <span class="fw-bold">Invoice Raised By</span>
                    <p class="mt-3">{{m.edit_proforma_invoice_raised_by}}</p>
                </div>
                <div class="col-12 col-lg-3 col-md-6 col-sm-12"> <span class="fw-bold">Customer Reference No </span>
                    <p class="mt-3">{{m.so_referencenumber}}</p>
                </div>
                <div class="col-12 col-lg-3 col-md-6 col-sm-12"><span class="fw-bold">Customer Name </span>
                    <p class="mt-3">{{m.customer_name}}</p>
                </div>

            </div>

            <div class="d-flex flex-row m-3 mt-6 flex-wrap border-bottom">
                <div class="col-12 col-lg-3 col-md-6 col-sm-12 "><span class="fw-bold">Branch</span>
                    <p class="mt-3">{{m.branch_name}}</p>
                </div>
                <div class="col-12 col-lg-3 col-md-6 col-sm-12"><span class="fw-bold">Contact Person</span>
                    <p class="mt-3">{{m.customer_contactperson}}</p>
                </div>
                <div class="col-12 col-lg-3 col-md-6 col-sm-12"> <span class="fw-bold">Contact Number</span>
                    <p class="mt-3">{{m.mobile}}</p>
                </div>
                <div class="col-12 col-lg-3 col-md-6 col-sm-12"><span class="fw-bold">Email Address</span>
                    <p class="mt-3">{{m.customer_email}}</p>
                </div>

            </div>

            <div class="d-flex flex-row m-3 mt-6 flex-wrap border-bottom">

                <div class="col-12 col-lg-3 col-md-6 col-sm-12 "><span class="fw-bold">Address</span>
                    <p class="mt-3">{{m.customer_address}}</p>
                </div>
                <div class="col-12 col-lg-3 col-md-6 col-sm-12"><span class="fw-bold">Remarks </span>
                    <p class="mt-3">{{m.invoice_remarks}}</p>
                </div>
                <div class="col-12 col-lg-3 col-md-6 col-sm-12"> <span class="fw-bold">Sales Person</span>
                    <p class="mt-3">{{m.user_firstname}}</p>
                </div>
                <div class="col-12 col-lg-3 col-md-6 col-sm-12"><span class="fw-bold">Expected Start Date</span>
                    <p class="mt-3">{{m.start_date}}</p>
                </div>

            </div>

            <div class="d-flex flex-row m-3 mt-6 flex-wrap border-bottom">
                <div class="col-12 col-lg-3 col-md-6 col-sm-12 "><span class="fw-bold">Estimated Arrival Time</span>
                    <p class="mt-3">{{m.end_date}}</p>
                </div>
                <div class="col-12 col-lg-3 col-md-6 col-sm-12"><span class="fw-bold">Freight Terms</span>
                    <p class="mt-3">{{m.freight_terms}}</p>
                </div>
                <div class="col-12 col-lg-3 col-md-6 col-sm-12"> <span class="fw-bold">Payment Terms</span>
                    <p class="mt-3">{{m.payment_terms}}</p>
                </div>
                <div class="col-12 col-lg-3 col-md-6 col-sm-12"><span class="fw-bold">Currency</span>
                    <p class="mt-3">{{m.currency_code}}</p>
                </div>


            </div>
            <div class="d-flex flex-row m-3 mt-6 flex-wrap border-bottom">
                <div class="col-12 col-lg-3 col-md-6 col-sm-12 "><span class="fw-bold">Exchange Rate</span>
                    <p class="mt-3">{{m.exchange_rate}}</p>
                </div>
            </div>
        </div>

        <div class="table-responsive">
            <div class="card card-body m-0 shadow-lg p-3 mb-5 bg-white rounded mt-7">
                <div class="card-header bg-primary card-height55" style="border-radius: 0px;">
                    <div class="card-title m-0">
                        <h5 class="fw-bolder text-white">Product Summary</h5>
                    </div>
                </div>
                <table id="product" class="table table-striped table-row-bordered gy-4 gs-2">
                    <thead class="table_head">
                        <tr class="fw-bold fs-5 text-nowrap bg-lightblue text-blue align-middle">
                            <th>Product Group</th>
                            <th>Customer Product Code</th>
                            <th>Product & Description</th>
                            <th>Unit</th>
                            <th style="text-align: center;">Billed Quantity</th>

                            <th style="text-align: right;">Discount</th>
                            <th style="text-align: right;">Unit Price</th>
                            <th style="text-align: right; width: 100px;">Tax</th>
                            <th style="text-align: right;">Total</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let data of ProformaInvoiceEditlist1; let i=index;" class="align-middle">
                            <td>{{data.productgroup_name}}</td>
                            <td>{{data.customerproduct_code}}</td>
                            <td>
                                <div> {{data.product_name}}</div>
                                <div> {{data.display_field}}</div>
                            </td>
                            <td>{{data.productuom_name}}</td>
                            <td style="text-align: center;">{{data.qty_invoice}}</td>
                            <td style="text-align: center;">
                                <div> {{data.product_discount_percentage}}</div>
                                <div> {{data.product_discount_amount}}</div>
                            </td>
                            <td style="text-align: right;">{{data.product_price1}}</td>
                            <td style="text-align: right;">
                                <div>{{data.tax_name}}</div>
                                <div>{{data.tax_amount}}</div>
                            </td>
                            <td style="text-align: right; width: 100px;">{{data.total_price}}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="d-flex flex-row m-4 flex-wrap">
            <div class="col-12 col-lg-8 col-md-4 col-sm-12">
                <div class="card-header bg-lightblue card-height55">
                    <div class="card-title m-0">
                        <h5 class="fw-bolder text-blue">Terms and Conditions</h5>
                    </div>
                </div>
                <!-- <ng-select class="custom col-lg-6 m-6 col-12 fv-row mt-5" bindLabel="template_name"
                    [(ngModel)]="mdlTerms" formControlName="template_name" bindValue="template_gid"
                    placeholder="Select an option"></ng-select> -->
                <!-- <div class="d-flex flex-row m-2 col-lg-12 table-responsive">
                    <div class="col-12 col-lg-12 col-md-12  col-sm-12 fv-row mt-2">
                        <angular-editor [config]="config" formControlName="termsandconditions"></angular-editor>
                    </div>
                </div> -->
                <div *ngFor="let data of ProformaInvoiceEditlist;">
                    <div class="d-flex flex-row m-6 flex-wrap">
                      <div style="width: 550px;">
                        <p [innerHTML]="data.termsandconditions"></p>
          
                      </div>
                    </div>
                  </div>
            </div>

            <div class="col-12 col-lg-4 col-md-6 col-sm-12" *ngFor="let m of ProformaInvoiceEditlist">
                <div class="d-flex flex-row m-6 flex-wrap">
                    <div class="col-12 col-lg-6 col-md-6 col-sm-12">
                        <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row">
                            <label class="tbl_lab ">Net Amount :</label>
                        </div>
                    </div>
                    <div class="col-12 col-lg-6 col-md-6 col-sm-12">
                        <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row">
                            <p class="mt-3">{{m.total_price}}</p>
                        </div>
                    </div>
                </div>

                <div class="d-flex flex-row m-6 flex-wrap">
                    <div class="col-12 col-lg-6 col-md-6 col-sm-12">
                        <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row">
                            <label class="tbl_lab">Overall Tax :</label>
                        </div>
                    </div>
                    <div class="col-12 col-lg-6 col-md-6 col-sm-12">
                        <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row">

                            <p class="mt-3">{{m.total_tax_amount}}</p>
                        </div>
                    </div>
                </div>


                <div class="d-flex flex-row m-6 flex-wrap">
                    <div class="col-12 col-lg-6 col-md-6 col-sm-12">
                        <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row">
                            <label class="tbl_lab">Total Amount with Tax :</label>
                        </div>
                    </div>
                    <div class="col-12 col-lg-6 col-md-6 col-sm-12">
                        <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row">

                            <p class="mt-3">{{m.total_amount}}</p>

                        </div>
                    </div>
                </div>
                <div class="d-flex flex-row m-6 flex-wrap">
                    <div class="col-12 col-lg-6 col-md-6 col-sm-12">
                        <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row">
                            <label class="tbl_lab">Maximum Addon Amount :</label>
                        </div>
                    </div>
                    <div class="col-12 col-lg-6 col-md-6 col-sm-12">
                        <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row">
                            <p class="mt-3">{{m.additionalcharges_amount}}</p>

                        </div>
                    </div>
                </div>
                <div class="d-flex flex-row m-6 flex-wrap">
                    <div class="col-12 col-lg-6 col-md-6 col-sm-12">
                        <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row">
                            <label class="tbl_lab">Maximum Addon Discount :</label>
                        </div>
                    </div>
                    <div class="col-12 col-lg-6 col-md-6 col-sm-12">
                        <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row">
                            <p class="mt-3">{{m.discount_amount}}</p>

                        </div>
                    </div>
                </div>

                <div class="d-flex flex-row m-6 flex-wrap">
                    <div class="col-12 col-lg-6 col-md-6 col-sm-12">
                        <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row">
                            <label class="tbl_lab">Freight Charges :</label>
                        </div>
                    </div>
                    <div class="col-12 col-lg-6 col-md-6 col-sm-12">
                        <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row">
                            <p class="mt-3">{{m.freight_charges}}</p>

                        </div>
                    </div>
                </div>

                <div class="d-flex flex-row m-6 flex-wrap">
                    <div class="col-12 col-lg-6 col-md-6 col-sm-12">
                        <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row">
                            <label class="tbl_lab">Buyback Charges :</label>
                        </div>
                    </div>
                    <div class="col-12 col-lg-6 col-md-6 col-sm-12">
                        <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row">
                            <p class="mt-3">{{m.buyback_charges}}</p>

                        </div>
                    </div>
                </div>

                <div class="d-flex flex-row m-6 flex-wrap">
                    <div class="col-12 col-lg-6 col-md-6 col-sm-12">
                        <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row">
                            <label class="tbl_lab">Packing Charges :</label>
                        </div>
                    </div>
                    <div class="col-12 col-lg-6 col-md-6 col-sm-12">
                        <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row">
                            <p class="mt-3">{{m.packing_charges}}
                            </p>
                        </div>
                    </div>
                </div>

                <div class="d-flex flex-row m-6 flex-wrap">
                    <div class="col-12 col-lg-6 col-md-6 col-sm-12">
                        <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row">
                            <label class="tbl_lab">Insurance Charges :</label>
                        </div>
                    </div>
                    <div class="col-12 col-lg-6 col-md-6 col-sm-12">
                        <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row">
                            <p class="mt-3">{{m.insurance_charges}}</p>

                        </div>
                    </div>
                </div>

                <div class="d-flex flex-row m-6 flex-wrap">
                    <div class="col-12 col-lg-6 col-md-6 col-sm-12">
                        <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row">
                            <label class="tbl_lab"> Round Off :</label>
                        </div>
                    </div>
                    <div class="col-12 col-lg-6 col-md-6 col-sm-12">
                        <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row">

                            <p class="mt-3">{{m.roundoff}}</p>

                        </div>
                    </div>
                </div>

                <div class="d-flex flex-row m-6 flex-wrap">
                    <div class="col-12 col-lg-6 col-md-6 col-sm-12">
                        <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row">
                            <label class="tbl_lab">Grand Total :</label>
                        </div>
                    </div>
                    <div class="col-12 col-lg-6 col-md-6 col-sm-12">
                        <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row">
                            <p class="mt-3">{{m.invoice_amount}}</p>

                        </div>
                    </div>
                </div>

                <div class="d-flex flex-row m-6 flex-wrap">
                    <div class="col-12 col-lg-6 col-md-6 col-sm-12">
                        <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row">
                            <label class="tbl_lab">Advance Amount :</label>
                        </div>
                    </div>
                    <div class="col-12 col-lg-6 col-md-6 col-sm-12">
                        <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row">
                            <p class="mt-3">{{m.invoice_percent}}<span class="fw-bold ms-3 text-black">%</span></p>
                            <p class="mt-3">{{m.advance_amount}}
                            </p>


                        </div>
                    </div>
                </div>
                <div class="d-flex flex-row m-6 flex-wrap">
                    <div class="col-12 col-lg-6 col-md-6 col-sm-12">
                        <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row">
                            <label class="tbl_lab">Advance Roundoff :</label>
                        </div>
                    </div>
                    <div class="col-12 col-lg-6 col-md-6 col-sm-12">
                        <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row">
                            <p class="mt-3">{{m.advanceroundoff}}</p>


                        </div>
                    </div>
                </div>


            </div>
        </div>


        <div class="card" m-3>
            <div class="text-center my-4">
                <button class="btn-primary btn-sm text-white me-4" (click)="back()">
                    <i class="bi bi-arrow-left-square fs-7 me-1"></i>
                    Back
                </button>
            </div>
        </div>
    </div>

</div>