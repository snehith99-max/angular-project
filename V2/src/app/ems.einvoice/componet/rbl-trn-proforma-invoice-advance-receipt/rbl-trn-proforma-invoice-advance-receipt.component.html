<div class="card rounded-top">
  <div class="card-title p-5 pb-6 pt-6 rounded-top bg-primary">
    <h3 class="fw-bolder text-white"><i class="fas fa-plus fw-bolder fs-3 me-4"></i>
      Advance Receipt
    </h3>
  </div>

  <div class="card m-3">
    <form [formGroup]="proformaadvancerptform">


      <div class="d-flex flex-row m-6 flex-wrap">
        <input hidden type="text"
          class="form-control form-control-lg form-control-solid bg-white custom-input mb-3 mb-lg-0 borderc-secondary"
          name="invoice_gid" formControlName="invoice_gid" />

        <div class="col-12 col-lg-4 col-md-6 col-sm-12 mt-2"><span class="font-bold">Proforma Invoice Ref. No.</span>
          <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
            <input type="text"
              class="form-control form-control-lg form-control-solid mb-3 mb-lg-0 bg-secondary custom-input"
              formControlName="proforma_advrpt_invoice_ref_no" readonly>
          </div>
        </div>

        <div class="col-12 col-lg-4 col-md-6 col-sm-12 mt-2"><span class="font-bold">Proforma Invoice Date</span>
          <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
            <input type="text"
              class="form-control form-control-lg form-control-solid mb-3 mb-lg-0 bg-secondary custom-input "
              formControlName="proforma_advrpt_invoice_date" readonly>
          </div>
        </div>
        <div class="col-12 col-lg-4 col-md-6 col-sm-12 mt-2"><span class="font-bold">Order Ref. No.</span>
          <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
            <input type="text"
              class="form-control form-control-lg form-control-solid mb-3 mb-lg-0 bg-secondary custom-input "
              formControlName="proforma_advrpt_order_ref_no" readonly>
          </div>
        </div>
      </div>
      <div class="d-flex flex-row m-6 flex-wrap">
        <div class="col-12 col-lg-4 col-md-6 col-sm-12 mt-2"><span class="font-bold">Order Date</span>
          <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
            <input type="text"
              class="form-control form-control-lg form-control-solid mb-3 mb-lg-0 bg-secondary custom-input "
              formControlName="proforma_advrpt_order_date" readonly>
            <!-- <input type="text"
                    class="form-control form-control-lg form-control-solid date-picker mb-3 mb-lg-0 bg-white custom-input"
                    placeholder="DD-MM-YYYY" formControlName="proforma_advrpt_order_date"                    
                    pattern="^(?!\s*$).+" readonly /> -->
          </div>
        </div>

        <div class="col-12 col-lg-4 col-md-6 col-sm-12 mt-2"><span class="font-bold">Company Name</span>
          <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
            <input type="text"
              class="form-control form-control-lg form-control-solid mb-3 mb-lg-0 bg-secondary custom-input "
              formControlName="proforma_advrpt_company_name" readonly>
          </div>
        </div>
        <div class="col-12 col-lg-4 col-md-6 col-sm-12"><span class="font-bold">Contact Person</span>
          <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
            <input type="text"
              class="form-control form-control-lg form-control-solid mb-3 mb-lg-0 bg-secondary custom-input "
              formControlName="proforma_advrpt_contact_person" readonly>
          </div>
        </div>
      </div>
      <div class="d-flex flex-row m-6 flex-wrap ">
        <div class="col-12 col-lg-4 col-md-6 col-sm-12 mt-2"><span class="font-bold">Contact Number</span>
          <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
            <input type="text"
              class="form-control form-control-lg form-control-solid mb-3 mb-lg-0 bg-secondary custom-input "
              formControlName="proforma_advrpt_contact_no" readonly>
          </div>
        </div>

        <div class="col-12 col-lg-4 col-md-6 col-sm-12 mt-2"><span class="font-bold">Email Address</span>
          <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
            <input type="text"
              class="form-control form-control-lg form-control-solid mb-3 mb-lg-0 bg-secondary custom-input "
              formControlName="proforma_advrpt_email_address" readonly>
          </div>
        </div>
        <div class="col-12 col-lg-4 col-md-6 col-sm-12 mt-2"><span class="font-bold">Company Address</span>
          <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
            <textarea type="text" rows="1"
              class="form-control form-control-lg form-control-solid mb-3 mb-lg-0 bg-secondary custom-input"
              placeholder="" formControlName="proforma_advrpt_company_address" rows="3" readonly></textarea>
          </div>
        </div>
      </div>

      <div class="d-flex flex-row m-6 flex-wrap ">
        <div class="col-12 col-lg-4 col-md-6 col-sm-12 mt-2"><span class="font-bold">Department</span>
          <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
            <input type="text"
              class="form-control form-control-lg form-control-solid mb-3 mb-lg-0 bg-secondary custom-input "
              formControlName="proforma_advrpt_department" readonly>
          </div>
        </div>

        <div class="col-12 col-lg-4 col-md-6 col-sm-12 mt-2"><span class="font-bold">Order Reference</span>
          <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
            <input type="text"
              class="form-control form-control-lg form-control-solid mb-3 mb-lg-0 bg-secondary custom-input "
              formControlName="proforma_advrpt_order_reference" readonly>
          </div>
        </div>
        <div class="col-12 col-lg-4 col-md-6 col-sm-12 mt-2"><span class="font-bold">Remarks</span>
          <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
            <textarea type="text" rows="1"
              class="form-control form-control-lg form-control-solid mb-3 mb-lg-0 bg-secondary custom-input"
              placeholder="" formControlName="proforma_advrpt_remarks" rows="3" readonly></textarea>
          </div>
        </div>
      </div>



      <div class="table-responsive">
        <div class="card card-body m-0 p-3 mb-5 bg-white rounded mt-7">
          <table id="product" class="table table-striped table-row-bordered gy-4 gs-2">
            <thead>
              <tr class="text-white fw-bold fs-5 text-nowrap text-blue bg-lightblue align-middle">
                <th>S.No</th>
                <th>Product Group</th>
                <th>Product & Description</th>
                <th>Unit</th>
                <th style="text-align: center;">Quantity</th>
                <th style="text-align: right;">Unit Price</th>
                <th style="text-align: right;">Discount (%)</th>
                <th style="text-align: right; width: 100px;">Tax</th>
                <th style="text-align: right;">Amount</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let data of productdata_list; let i=index;" class="align-middle">
                <td>{{i+1}}</td>
                <td>{{data.productgroup_name}}</td>
                <td>{{data.product_name}}</td>
                <td>{{data.uom_name}}</td>
                <td style="text-align: center;">{{data.qty_invoice}}</td>
                <td style="text-align: right;">{{data.product_price1}}</td>
                <td style="text-align: right;">
                  <div>{{data.product_discount_percentage}} </div>
                  <div>{{data.product_discount_amount}}</div>
                  {{data.discount_amount}}
                </td>
                <td style="text-align: right;">
                  <div>{{data.tax_name}}</div>
                  <div>{{data.product_tax_amount}}</div>
                </td>
                <td class="fw-bold" style="text-align: right;">{{data.total_price}}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- <div class="card">
        <div class="row">
          <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row">
            <div class="d-flex flex-row flex-wrap">
              <div class="col-12 col-lg-4 col-md-4 col-sm-12">
                <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row">
                  <label class="fw-bold fs-5 mt-4 ms-8">Payment Mode</label><span class="ms-1 text-red ms-3">*</span>
                </div>
              </div>

            </div>
            <br>
            <div class="col-12 col-lg-8">
              <ng-select class="col-lg-2 col-12 col-md-11 ms-8" formControlName="proforma_advrpt_payment_mode"
                [(ngModel)]="mdlReceiptmode" placeholder="Select Payment">
                <ng-option *ngFor="let data of payment_mode" [value]="data.modeofpayment_gid">
                  {{ data.payment_type }} 
                </ng-option>
              </ng-select>
            </div>
            <div>
              <div class="col-md-3">
                <div class="d-flex row justify-content-end mt-2">
                  <div *ngIf="mdlReceiptmode === 'Cash'">
                    <div class=" col-lg-4">
                      <span class="font-bold required">Case Date</span>
                      <input type="date" formControlName="paymentdate" [(ngModel)]="paymentdate"
                        class="form-control form-control-lg form-control-solid date-picker custom-input mb-3 mb-lg-0 bg-white custom-input date-picker mt-2"
                        placeholder="DD-MM-YYYY" />
                    </div>
                  </div>
                </div>

                <div *ngIf="mdlReceiptmode === 'Cheque'">
                  <div>
                    <div>
                      <span> Transaction Ref.No </span>
                      <input type="text" class="form-control fw-bold " formControlName=""
                        style="width:120px; text-align: left;">
                    </div>
                    <div>
                      <span> Bank Name </span>
                      <input type="text" class="form-control fw-bold " formControlName=""
                        style="width:120px; text-align: left;">
                    </div>
                    <div>
                      <span> Branch Name </span>
                      <input type="text" class="form-control fw-bold " formControlName=""
                        style="width:120px; text-align: left;">
                    </div>
                  </div>
                </div>

              </div>
            </div>
          </div>
        </div>
      </div> -->

      <div class="card">
        <div class="row">
          <div class="d-flex flex-row flex-wrap">
            <div class="card-header">
              <div class="card-title">
                <label class="fw-bold fs-5">Payment Mode</label><span class="ms-1 text-red">*</span>
              </div>
            </div>
          </div>
          <!-- Payment Mode Selector -->
          <div class="col-lg-4">
            <ng-select class="col-lg-5 col-12 col-md-11 ms-8" formControlName="proforma_advrpt_payment_mode"
              [(ngModel)]="mdlReceiptmode" placeholder="Select Payment">
              <ng-option *ngFor="let data of payment_mode" [value]="data.modeofpayment_gid">
                {{ data.payment_type }}
              </ng-option>
            </ng-select>
          </div>

          <!------------------------------------------------------Cheque ----------------------------------------------------------------------------->
          <div *ngIf="mdlReceiptmode === 'Cheque'" class="col-md-8 move-up-sm">
            <div class="row">
              <div class="col-md-4">
                <label class="fw-bolder">Cheque No :</label>
                <input type="text" class="form-control fw-bold" style="width:150px; text-align: left;"
                  formControlName="cheque_no_proforma">
              </div>

              <div class="col-md-4">
                <label class="fw-bolder">Bank Name:</label>
                <input type="text" class="form-control fw-bold " style="width:150px; text-align: left;"
                  formControlName="bank_name_proforma">
              </div>


              <div class="col-md-4">
                <label class="fw-bolder">Date:</label>
                <input type="date" formControlName="paymentdate" [(ngModel)]="paymentdate"
                  [ngStyle]="{ 'border-color': proformaadvancerptform.get('casedate')?.hasError('required') && proformaadvancerptform.get('casedate')?.touched ? 'red' : 'rgb(209, 209, 209)'}"
                  class="form-control common-dd fw-bold form-control-solid date-picker custom-input mb-3 mb-lg-0 bg-white custom-form-input"
                  placeholder="DD-MM-YYYY">
              </div>
            </div>
            <br>
            <div class="row">

              <div class="col-md-4">
                <label class="fw-bolder">Branch Name:</label>
                <input type="text" class="form-control fw-bold" style="width:150px; text-align: left;"
                  formControlName="branch_name_proforma">
              </div>


              <div class="col-md-4">
                <label class="fw-bolder">Deposit Bank:</label>
                <ng-select formControlName="depositbank" [items]="GetBankname_list" [(ngModel)]="Mdlbankname"
                  [ngClass]="{'invalid-border': proformaadvancerptform.get('bank_name')?.invalid && proformaadvancerptform.get('bank_name')?.touched}"
                  class="col-lg-7 col-12" bindLabel="bank_name" bindValue="bank_gid"  placeholder="Select Deposite Bank">
                </ng-select>
              </div>
            </div>
          </div>
          <!------------------------------------------Cash --------------------------------->
          <div *ngIf="mdlReceiptmode === 'Cash'" class="col-md-7 date-up-sm ">
            <div class="row">
                <input type="date" formControlName="paymentdate" 
                  class="form-control common fw-bold form-control-solid date-picker custom-input mb-3 mb-lg-0 bg-white custom-input date-picker mt-2"
                  placeholder="DD-MM-YYYY" />
            </div>
          </div>
          <!---------------------------------------- DD -------------------------------------------------->
          <div *ngIf="mdlReceiptmode === 'DD'" class="col-md-8 move-up-sm ">
            <div class="row">
              <div class="col-md-4">
                <label class="fw-bolder">Cheque No :</label>
                <input type="text" class="form-control fw-bold" style="width:150px; text-align: left;"
                  formControlName="cheque_no_proforma">
              </div>

              <div class="col-md-4">
                <label class="fw-bolder">Bank Name:</label>
                <input type="text" class="form-control fw-bold " style="width:150px; text-align: left;"
                  formControlName="bank_name_proforma">
              </div>


              <div class="col-md-4">
                <label class="fw-bolder">Date:</label>
                <input type="date" formControlName="paymentdate" [(ngModel)]="paymentdate"
                  class="form-control common-dd fw-bold form-control-solid date-picker custom-input mb-3 mb-lg-0 bg-white custom-form-input"
                  placeholder="DD-MM-YYYY">
              </div>
            </div>
            <br>
            <div class="row">

              <div class="col-md-4">
                <label class="fw-bolder">Branch Name:</label>
                <input type="text" class="form-control fw-bold" style="width:150px; text-align: left;"
                  formControlName="branch_name_proforma">
              </div>

              <div class="col-md-4">
                <label class="fw-bolder">Deposit Bank:</label>
                <ng-select formControlName="depositbank" [items]="GetBankname_list" [(ngModel)]="Mdlbankname"
                  [ngClass]="{'invalid-border': proformaadvancerptform.get('bank_name')?.invalid && proformaadvancerptform.get('bank_name')?.touched}"
                  class="col-lg-7 col-12" bindValue="bank_gid" bindLabel="bank_name" placeholder="Select Deposite Bank">
                </ng-select>
              </div>
            </div>
          </div>
          <!--------------------------------------- NEFT--------------------------------------------------------->
          <div *ngIf="mdlReceiptmode === 'NEFT'" class="col-md-8 move-up-sm ">
            <div class="row">
              <div class="col-md-4">
                <label class="fw-bolder">Transaction Ref.No :</label>
                <input type="text" class="form-control fw-bold" style="width:150px; text-align: left;"
                  formControlName="transaction_refno_proforma">
              </div>

              <div class="col-md-4">
                <label class="fw-bolder">Bank Name:</label>
                <input type="text" class="form-control fw-bold " style="width:150px; text-align: left;"
                  formControlName="bank_name_proforma">
              </div>


              <div class="col-md-4 date-up-sm">
                <label class="fw-bolder">Date:</label>
                <input type="date" formControlName="paymentdate"                   
                class="form-control common-dd  form-control-lg form-control-solid date-picker custom-input mb-3 mb-lg-0 bg-white custom-input date-picker mt-2"
                placeholder="DD-MM-YYYY" />
              </div>
            </div>
            <br>
            <div class="row">

              <div class="col-md-4">
                <label class="fw-bolder">Branch Name:</label>
                <input type="text" class="form-control fw-bold" style="width:150px; text-align: left;"
                  formControlName="branch_name_proforma">
              </div>
              <div class="col-md-4">
                <label class="fw-bolder">Deposit Bank:</label>
                <ng-select formControlName="depositbank" [items]="GetBankname_list" [(ngModel)]="Mdlbankname"
                  [ngClass]="{'invalid-border': proformaadvancerptform.get('bank_name')?.invalid && proformaadvancerptform.get('bank_name')?.touched}"
                  class="col-lg-7 col-12" bindValue="bank_gid" bindLabel="bank_name" placeholder="Select Deposite Bank">
                </ng-select>
              </div>
            </div>
          </div>
          <!-------------------------------------  SWIFT ------------------------------------------------------------->
          <div *ngIf="mdlReceiptmode === 'SWIFT'" class="col-md-8 move-up-sm ">
            <div class="row">
              <div class="col-md-4">
                <label class="fw-bolder">Swift Amount </label>
                <input type="number" class="form-control fw-bold" style="width:150px; text-align: right;"
                  placeholder="0.00" formControlName="swift_amount_proforma">
              </div>

              <div class="col-md-4">
                <label class="fw-bolder">Received Amount</label>
                <input type="number" class="form-control fw-bold " style="width:150px; text-align: right;"
                  placeholder="0.00" formControlName="received_amount_proforma">
              </div>


              <div class="col-md-4 date-up-sm">
                <label class="fw-bolder">Date</label>
                <!-- <input type="date" formControlName="swiftdate"                  
                  class="form-control common-dd fw-bold form-control-solid date-picker custom-input mb-3 mb-lg-0 bg-white custom-form-input"
                  placeholder="DD-MM-YYYY"> -->
                  <input type="date" formControlName="swiftdate"                   
                  class="form-control common-dd  form-control-lg form-control-solid date-picker custom-input mb-3 mb-lg-0 bg-white custom-input date-picker mt-2"
                  placeholder="DD-MM-YYYY" />

              </div>
            </div>
            <br>
            <div class="row">

              <div class="col-md-4">
                <label class="fw-bolder">Difference Amount</label>
                <input type="number" class="form-control fw-bold" style="width:150px; text-align: right;"
                  placeholder="0.00" formControlName="diff_amount_proforma">
              </div>


              <div class="col-md-4">
                <label class="fw-bolder">Attachment</label>
                <div class="col-lg-12 fv-row col-12   ms-5 m-12 mt-2">
                  <input (change)="onChange2($event)" accept="image/*,.pdf,.doc,.docx,.txt,.xlsx,.xls,.mp4" type="file"
                    #fileInput class="form-control form-control-lg form-control-solid bg-white
mb-3 mb-lg-0  borderc-secondary custom-input
" name="fName" multiple />
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>


      <br>

      <div class="card">
        <div class="row">
          <div class="col-9">
            <div class="card-header bg-lightblue card-height55 mt-5">
              <div class="card-title m-0">
                <h5 class="fw-bolder text-blue">Terms and Conditions</h5>
              </div>
            </div>

            <div class="d-flex flex-row m-2 flex-wrap table-responsive">
              <div style="width: 550px;">
                <p [innerHTML]="proformaadvancerptform.get('proforma_advrpt_termsandconditions').value"></p>
              </div>
            </div>

          </div>
          <div class="col-md-3">
            <div class="d-flex flex-column align-items-center mt-2">
              <!-- Payment Days -->
              <div class="d-flex align-items-center w-100">
                <label class="col-sm-6 col-form-label fw-bolder text-right">Payment Days:</label>
                <input type="text" class="form-control fw-bold bg-secondary" formControlName="proforma_advrpt_payment"
                  style="width:120px; text-align: right;" readonly>
              </div>
            </div>
            <div class="d-flex row justify-content-end mt-2">
              <div class="col-md-12 d-flex align-items-center">
                <label class="col-sm-6 col-form-label fw-bolder">Delivery Days:</label>
                <input type="text" class="form-control fw-bold bg-secondary"
                  formControlName="proforma_advrpt_delivery_period" style="width:120px; text-align: right;" readonly>
              </div>

            </div>

            <div class="d-flex row justify-content-end mt-2">
              <div class="col-md-12 d-flex align-items-center">
                <label class="col-sm-6 col-form-label fw-bolder">Net Amount:</label>
                <input type="text" class="form-control fw-bold bg-secondary"
                  formControlName="proforma_advrpt_net_amount" style="width:120px; text-align: right;" readonly>
              </div>
            </div>

            <div class="d-flex row justify-content-end mt-2">
              <div class="col-md-12 d-flex align-items-center">
                <label class="col-sm-6 col-form-label fw-bolder">Add On Charges:</label>
                <input type="text" class="form-control fw-bold bg-secondary"
                  formControlName="proforma_advrpt_addon_charges" style="width:120px; text-align: right;" readonly>
              </div>
            </div>

            <div class="d-flex row justify-content-end mt-2">
              <div class="col-md-12 d-flex align-items-center">
                <label class="col-sm-6 col-form-label fw-bolder">Additional Discount:</label>
                <input type="text" class="form-control fw-bold bg-secondary"
                  formControlName="proforma_advrpt_additional_discount" style="width:120px; text-align: right;"
                  readonly>
              </div>
            </div>

            <div class="d-flex row justify-content-end mt-2">
              <div class="col-md-12 d-flex align-items-center">
                <label class="col-sm-6 col-form-label fw-bolder">With Hold Tax:</label>
                <input type="text" class="form-control fw-bold bg-secondary"
                  formControlName="proforma_advrpt_hold_with_tax" style="width:120px; text-align: right;" readonly>
              </div>
            </div>

            <div class="d-flex row justify-content-end mt-2">
              <div class="col-md-12 d-flex align-items-center">
                <label class="col-sm-6 col-form-label fw-bolder">Grand Total:</label>
                <input type="text" class="form-control fw-bold bg-secondary"
                  formControlName="proforma_advrpt_grand_total" style="width:120px; text-align: right;" readonly>
              </div>
            </div>


            <div class="d-flex row justify-content-end mt-2">
              <div class="col-md-12 d-flex align-items-center">
                <label class="col-sm-6 col-form-label fw-bolder">Existing Advance:</label>
                <input type="text" class="form-control fw-bold bg-secondary"
                  formControlName="proforma_advrpt_existing_advance" style="width:120px; text-align: right;" readonly>
              </div>
            </div>

            <div class="d-flex row justify-content-end mt-2">
              <div class="col-md-12 d-flex align-items-center">
                <label class="col-sm-6 col-form-label fw-bolder">Outstanding Advance Amount:</label>
                <input type="text" class="form-control fw-bold bg-secondary"
                  formControlName="proforma_advrpt_outstanding_adv_amount" style="width:120px; text-align: right;"
                  readonly>
              </div>
            </div>

            <div class="d-flex row justify-content-end mt-2">
              <div class="col-md-12 d-flex align-items-center">
                <label class="col-sm-6 col-form-label fw-bolder">Advance :</label>
                <input type="text" class="form-control fw-bold bg-secondary" formControlName="proforma_advrpt_advance"
                  style="width:120px; text-align: right;" readonly>
              </div>
            </div>



            <!--Summary count ends-->
          </div>
          <div class="text-center my-4">
            <button type="submit" class="btn-success btn-sm text-white me-4" (click)="AdvrptProformaInvoiceSubmit()">
              <i class="bi bi-check-square fs-7 me-1"></i>
              Confirm
            </button> &nbsp;&nbsp;
            <button class="btn-primary btn-sm text-white me-4" (click)="back()">
              <i class="bi bi-arrow-left-square fs-7 me-1"></i>
              Back
            </button>
          </div>
        </div>
      </div>
    </form>
  </div>
</div>