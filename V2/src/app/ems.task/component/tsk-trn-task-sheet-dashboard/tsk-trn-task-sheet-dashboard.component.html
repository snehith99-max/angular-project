<!-- Task Management dashboard HTML -->
<!---code written by Subash G-->
<div class="row">
    <div class="col-lg-1 col-sm-4 col-md-4">
        <div class="col-lg-12 ">
            <div class="card mt-2 " >
                <input type="date" [(ngModel)]="txt_date" (ngModelChange)="datewise(txt_date)"
                class="form-control form-control-lg form-control-solid custom-input mb-3 mb-lg-0 bg-white custom-input date-picker"
                placeholder="Time Sheet"  />

            </div>
        </div>
        <div class="col-lg-12 mt-3">
            <div class="card border" (click)="task()" style="background-color: rgb(193 63 124 / 14%); cursor: pointer;">
                <i class="fa-solid fa-list-check text-white fs-1 "></i>
                <span class="text-center  fw-bold mt-9 mb-10">Task <br> Wise</span>
            </div>
        </div>
        <div class="col-lg-12 mt-3">
            <div class="card border" (click)="teamtask()" style="background-color: rgb(72 81 175 / 26%);cursor: pointer;">
                <i class="fa-solid  text-white fa-user-group fs-1"></i>
                <span class="text-center fw-bold mt-9 mb-10">Module <br> Wise</span>
            </div>
        </div>
        <div class="col-lg-12 mt-3">
            <div class="card border" (click)="Deploymenttask()" style="background-color: rgb(215 235 234);cursor: pointer;">
                <i class="fa-solid fa-server text-white fs-1"></i>
                <span class="text-center  fw-bold  mt-9 mb-10">In <br> Live</span>
            </div>
        </div>
        <div class="col-lg-12 mt-3">
          <div class="card border" (click)="membertask()"  style="background-color: #e3d8ef;cursor: pointer;">
              <i class="fa-solid fa-users-rectangle text-white fs-1"></i>
              <span class="text-center  fw-bold  mt-9 mb-10">Member <br> Wise</span>
          </div>
      </div>
    </div>
    <div class="col-lg-9 p-3" [hidden]="!membershow" >
      <div class="card" style="height: 488px;overflow: auto; scrollbar-color: lightblue #ffffff;">
          <div class=" d-flex flex-row col-lg-6 p-2 rounded-top " style="background: linear-gradient(to left, #ffffff08, #e3d8ef)">
              <div class="col-lg-9">
                <h4 class=" text-secondary">Member Wise</h4>
              </div>
            </div>
            <div class="col-12 col-lg-4 col-md-6 col-sm-12 ms-4 mt-2">
              <span class="font-bold required">Member</span>
              <div class="pe-8">
                <ng-select  [items]="member_list" (change)="allview()" (clear)="clear()" bindLabel="assigned_member" [(ngModel)]="txtassigned_member"
                   class="custom col-lg-12 col-12 col-md-11 col-sm-11 fv-row mt-2 bg-secondary"
                  placeholder="Select an option"></ng-select>
              </div>
            </div>
            <div class="table-responsive mt-3 me-5">
              <div class="mx-3 p-3 pt-0 pb-0 bg-white rounded">
                  <table id="membersummary"
                  class="table table-striped table-row-bordered border-bottom gs-7 align-middle">
                  <thead>
                      <tr class="fw-bolder  fs-5 text-nowrap bg-lightblue text-blue align-middle">
                          <th style="display: none;">S.No</th>
                          <th>Module</th>
                          <th>Total Task</th>
                          <th>New</th>
                          <th>Progress</th>
                          <th>Hold</th>
                          <th>Testing</th>
                          <th>Live</th>
                      </tr>
                  </thead>
                  <tbody>
                      <tr *ngFor="let data of allmember_list; let i=index;">
                          <td style="display: none;">{{i+1}}</td>
                         <td>{{data.module_name}}</td>
                          <td>
                            <label class="badge badge-light text-black border border-secondary">{{data.task_count}}</label></td>
                          <td>
                            <label class="badge badge-light text-black border border-secondary">{{data.new_count}}</label></td>
                          <td>
                            <label class="badge badge-light text-black border border-secondary">{{data.progress_count}}</label></td>
                          <td>
                            <label class="badge badge-light text-black border border-secondary">{{data.hold_count}}</label></td>
                          <!-- <td>{{data.assigned_member}}</td> -->
                          <td>
                            <label class="badge badge-light text-black border border-secondary">{{data.testing_count}}</label></td>
                              <td>
                                <label class="badge badge-light text-black border border-secondary">{{data.live_count}}</label></td>
                              </tr>
                           </tbody>
                        </table>
                   </div>
          </div>
      </div>
  </div>
    <div class="col-lg-9 p-3" [hidden]="!taskshow" >
        <div class="card" style="height: 488px;overflow: auto; scrollbar-color: lightblue #ffffff;">
            <div class=" d-flex flex-row col-lg-6 p-2 rounded-top " style="background: linear-gradient(to left, #ffffff08, #eddde99e)">
                <div class="col-lg-9">
                  <h4 class=" text-secondary">Task Wise</h4>
                </div>
              </div>
              <div class="table-responsive mt-3 me-5">
                <div class="mx-3 p-3 pt-0 pb-0 bg-white rounded">
                    <table id="tasksummary"
                    class="table table-striped table-row-bordered border-bottom gs-7 align-middle">
                    <thead>
                        <tr class="fw-bolder  fs-5 text-nowrap bg-lightblue text-blue align-middle">
                            <th style="display: none;">S.No</th>
                                 <th>Module</th>
                                <th style="width: 200px;">Task Title</th>
                                <th>Task Type</th>
                                <th>Severity</th>
                                <th>Functionality</th>
                                <th>Assigned To</th>
                                <th>Assigned Date</th>
                                <th>Status</th>
                                <!-- <th>Created Date</th> -->
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let data of task_wise; let i=index;">
                            <td style="display: none;">{{i+1}}</td>
                            <td>{{data.module_name}}</td>
                            <td>{{data.task_name}}</td>
                                <td>{{data.task_typename}}</td>
                                <td>{{data.severity_name}}</td>
                                <td>{{data.functionality_name}}</td>
                                <td [ngClass]="{'text-blue fw-bold': data.assigned_member === 'Not Assigned'}">
                                  {{ data.assigned_member }}
                                </td>
                                <!-- <td>{{data.assigned_member}}</td> -->
                                <td>{{data.assigned_date}}</td>
                                <!-- <td>{{data.estimated_hours}}</td> -->
                                <td>{{data.employee_status}}</td>
                                <!-- <td >{{data.created_date}}</td> -->
                                </tr>
                             </tbody>
                          </table>
                     </div>
            </div>
        </div>
    </div>
    <div class="col-lg-9 p-3" [hidden]="!teamshow" >
        <div class="card" style="height: 488px;overflow: auto; scrollbar-color: lightblue #ffffff;">
            <div class=" d-flex flex-row col-lg-6 p-2 rounded-top " style="background: linear-gradient(to left, #ffffff08, #e2e3ec)">
                <div class="col-lg-9">
                  <h4 class=" text-secondary">Module Wise</h4>
                </div>
              </div>
              <div class="col-12 col-lg-4 col-md-6 col-sm-12 ms-4 mt-2">
                <span class="font-bold required">Module</span>
                <div class="pe-8">
                  <ng-select  [items]="Team_list" (change)="summary()" (clear)="clear()" bindLabel="team_name" [(ngModel)]="txtm_odule"
                     class="custom col-lg-12 col-12 col-md-11 col-sm-11 fv-row mt-2 bg-secondary"
                    placeholder="Select an option"></ng-select>
                </div>
              </div>
              <div class="table-responsive mt-3 me-5">
                <div class="mx-3 p-3 pt-0 pb-0 bg-white rounded">
                    <table id="teamsummary"
                    class="table table-striped table-row-bordered border-bottom gs-7 align-middle">
                    <thead>
                        <tr class="fw-bolder  fs-5 text-nowrap bg-lightblue text-blue align-middle">
                            <th style="display: none;">S.No</th>
                            <th style="width: 200px;">Task Title</th>
                            <th >Task Type</th>
                            <th>Severity</th>
                            <th>Functionality</th>
                            <th>Assigned To</th>
                            <th>Assigned Date</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let data of team_list; let i=index;">
                            <td style="display: none;">{{i+1}}</td>
                           <td>{{data.task_name}}</td>
                            <td>{{data.task_typename}}</td>
                            <td>{{data.severity_name}}</td>
                            <td>{{data.functionality_name}}</td>
                            <td [ngClass]="{'text-blue': data.assigned_member === 'Not Assigned'}">
                              {{ data.assigned_member }}
                            </td>
                            <!-- <td>{{data.assigned_member}}</td> -->
                            <td>{{data.assigned_date}}</td>
                                <td>{{data.employee_status}}</td>
                                </tr>
                             </tbody>
                          </table>
                     </div>
            </div>
        </div>
    </div>
    <div class="col-lg-9 p-3" [hidden]="!deployment" >
        <div class="card" style="height: 488px;overflow: auto; scrollbar-color: lightblue #ffffff;">
            <div class=" d-flex flex-row col-lg-6 p-2 rounded-top " style="background: linear-gradient(to left, #ffffff08, #d1ebea)">
                <div class="col-lg-9">
                  <h4 class=" text-secondary">Deployment Wise</h4>
                </div>
              </div>
              <div class="table-responsive mt-3 me-5">
                <div class="mx-3 p-3 pt-0 pb-0 bg-white rounded">
                    <table id="Deploymentsummary"
                    class="table table-striped table-row-bordered border-bottom gs-7 align-middle">
                    <thead>
                        <tr class="fw-bolder  fs-5 text-nowrap bg-lightblue text-blue align-middle">
                            <th style="display: none;">S.No</th>
                                 <th>Module</th>
                                 <th>Functionality</th>
                                <th>Task Title</th>
                                <th>Task Type</th>
                                <th>Severity</th>
                                <th>Assigned to</th>
                                <!-- <th>Estimated Hours</th> -->
                                <th>Deployment Date</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let data of deploy_list; let i=index;">
                            <td style="display: none;">{{i+1}}</td>
                            <td>{{data.module_name}}</td>
                            <td>{{data.functionality_name}}</td>
                            <td>{{data.task_name}}</td>
                                <td>{{data.task_typename}}</td>
                                <td>{{data.severity_name}}</td>
                                <td>{{data.assigned_member}}</td>
                                <!-- <td>{{data.estimated_hours}}</td> -->
                                <td >{{data.created_date}}</td>
                                </tr>
                             </tbody>
                          </table>
                     </div>
            </div>
        </div>
    </div>
    <div class="col-lg-9 p-3" [hidden]="!tasksheet" >
        <div class="card" style="height: 488px; overflow: auto; scrollbar-color: lightblue #ffffff;">
            <!-- <div class=" d-flex flex-row col-lg-6 p-2 rounded-top " style="background: linear-gradient(to left, #ffffff08, #d8ffd6)">
                <div class="col-lg-9">
                  <h4 class=" text-secondary">Time Sheet
                  </h4>
                </div>
              </div> -->
              <div class="d-flex flex-row col-lg-12 p-3 rounded-top" style="background: linear-gradient(to left, #ffffff08, #d8ffd6)">
                <div class="d-flex justify-content-between align-items-center w-100">
                  <h4 class="text-secondary mb-0">Time Sheet</h4>
                  <div class="d-flex align-items-center fs-4">
                    <strong>Updated Count:</strong>
                    <span class="badge badge-primary text-white ms-2">{{member}}</span>
                  </div>
                </div>
              </div>
              <div class="table-responsive p-5" *ngIf="mainList.length > 0">
                <div class="d-flex justify-content-end ">
                  <div class="col-lg-3">
                    <div class="input-group mb-3">
                      <input type="text" class="form-control form-control-sm" placeholder="Search "
                          name="search" [(ngModel)]="searchText" (ngModelChange)="filterList()">
                  </div>             
                </div>
                </div>

                <div>
                  <table class="table table-striped table-row-bordered table-responsive mb-0 border rounded">
                    <thead>
                      <tr class="fw-bolder fs-5 bg-lightblue text-blue text-nowrap">
                        <th></th>
                        <th>Name</th>
                        <th>Date</th>
                      </tr>
                    </thead>
                    <tbody>
                      <ng-container *ngTemplateOutlet="recursiveTable; context:{ $implicit: filteredList  }"></ng-container>
                    </tbody>
                  </table>
                </div>
              </div>
              <ng-template #recursiveTable let-rows>
                <ng-container *ngFor="let data of rows; let index = index">
                  <tr class="align-middle">
                    <td class="cursor-pointer" (click)="toggleVisibility(data)">
                      <i class="fa-solid fa-angle-right fw-bold text-blue fs-3" *ngIf="!data.visible && data.subfolders.length"></i>
                      <i class="fa-solid fa-angle-up fw-bold text-blue fs-3" *ngIf="data.visible && data.subfolders.length"></i>
                    </td>
                    <td>{{ data.created_by }}</td>
                    <td>{{data.task_date}}</td>
                    <!-- <td *ngIf="data.task_name">{{data.task_name}}</td>
                    <td *ngIf="data.module_name">{{data.module_name}}</td>
                    <td *ngIf="data.hrs_taken">{{data.hrs_taken}}</td> -->
                  </tr>
                  <ng-container *ngIf="data.visible && data.subfolders && data.subfolders.length > 0">
                    <tr class="tr-detail">
                      <td style="width: 1%;"></td>
                      <td colspan="5" style="padding: 0px !important;">
                        <div class="detail-content">
                          <ul>
                            <li class="m-0">
                              <div class="detail"></div>
                              <div class="detail detail-main">
                                <fieldset>
                                  <div class="table-responsive">
                                    <table class="table table-striped table-row-bordered table-responsive mb-0 border rounded">
                                      <thead>
                                        <tr class="fw-bolder fs-6 bg-lightblue text-blue text-nowrap">
                                          <th></th>
                                          <th>Module</th>
                                          <th>Task Name</th>
                                          <th>Task Type</th>
                                          <th>Hrs Taken</th>
                                          <th>Status</th>
                                          <th>Sub Task</th>
                                        </tr>
                                      </thead>
                                      <tbody>
                                        <ng-container *ngTemplateOutlet="subDataTemplate; context:{ $implicit: data.subfolders }"></ng-container>
                                      </tbody>
                                    </table>
                                  </div>
                                </fieldset>
                              </div>
                            </li>
                          </ul>
                        </div>
                      </td>
                    </tr>
                  </ng-container>
                </ng-container>
              </ng-template>
              <ng-template #subDataTemplate let-subRows>
                <ng-container *ngFor="let subData of subRows">
                <tr class="align-middle ">
                <td class="cursor-pointer" (click)="toggleVisibility(subData)">
                <i class="fa-solid fa-angle-right fw-bold text-blue fs-3"
                                  *ngIf="!subData.visible && subData.subfolders.length"></i>
                <i class="fa-solid fa-angle-up fw-bold text-blue fs-3"
                                  *ngIf="subData.visible && subData.subfolders.length"></i>
                </td>
                <td >{{subData.module_name}}</td>
                <td >{{ subData.task_name }}</td>
                <td>{{subData.task_type_name}}</td>
                <td >{{subData.hrs_taken}}</td> 
                <td>{{subData.taskstatus}}</td>
                <td>{{subData.sub_task}}</td>
                </tr>
                </ng-container>
                </ng-template>

                <ng-container *ngIf="mainList.length === 0 ">
                  <div class="d-flex justify-content-center">
                    <span>
                      <img src=".\assets\media\images\No_data_found.png" class="h-78px w-400px ">
                    </span>
                  </div>
                  </ng-container>
        </div>
    </div>
    <div class="col-lg-2 mt-3" >
        <div class="card">
            <div class=" d-flex flex-row col-lg-12 p-2 rounded-top " style="background: linear-gradient(to left, #ffffff08, #ededed)">
                <div class="col-lg-9">
                  <h4 class=" text-secondary">Task Management</h4>
                </div>
              </div>
            <div class="mb-3">
                <div class="col-lg-12 col-md-6 col-sm-12 p-5 mt-2" >
                    <div class="card  border-start border-0 " style="background-color: #d6e9ff;">
                       <div class="">
                           <div class="d-flex flex-row">
                            <div class="align-items-center col-lg-9 rounded-bottom p-1" style="background-color: #fafcff;">
                                <h5 class="mb-0 text-secondary text-black"> Show Stopper</h5>
                            </div>
                            
                            </div>
                            <div class="text-center col-lg-12 mb-6" >
                              <label class="ms-3" class="badge fw-bold ms-2 mt-6 mb-2 fs-7" style="background-color: white">{{show_stopper}}</label>
                          </div>
                       </div>
                    </div>
                  </div>
                  <div class="col-lg-12 col-md-6 col-sm-12 p-5 mt-2" >
                    <div class="card  border-start border-0 " style="background-color: #bd39cf36;">
                       <div class="">
                           <div class="d-flex flex-row">
                            <div class="align-items-center col-lg-9 rounded-bottom p-1" style="background-color: #fefaff;">
                                <h5 class="mb-0 text-secondary text-black"> Mandatory</h5>
                            </div>
                            
                            </div>
                            <div class="text-center col-lg-12 mb-6" >
                              <label class="ms-3" class="badge fw-bold ms-2  mt-6 mb-2 fs-7" style="background-color: white">{{mandatory}}</label>
                          </div>
                       </div>
                    </div>
                  </div>
                  <div class="col-lg-12 col-md-6 col-sm-12 p-5 mt-2" >
                    <div class="card  border-start border-0 " style="background-color: #ffea8c63;">
                       <div class="">
                           <div class="d-flex flex-row">
                            <div class="align-items-center col-lg-9 rounded-bottom p-1" style="background-color: #fffdfb;">
                                <h5 class="mb-0 text-secondary text-black">Non Mandatory</h5>
                            </div>
                            
                            </div>
                            <div class="text-center col-lg-12 mb-6" >
                              <label class="ms-3" class="badge fw-bold ms-2  mt-6 mb-2 fs-7" style="background-color: white">{{non_mandatory}}</label>
                          </div>
                       </div>
                    </div>
                  </div>
                  <div class="col-lg-12 col-md-6 col-sm-12 p-5 mt-2 mb-3" >
                    <div class="card  border-start border-0 " style="background-color: #45e5384f;">
                       <div class="">
                           <div class="d-flex flex-row">
                            <div class="align-items-center col-lg-9 rounded-bottom p-1" style="background-color: #fbfbfb;">
                                <h5 class="mb-0 text-secondary text-black">Nice To Have </h5>
                            </div>
                            
                            </div>
                            <div class="text-center col-lg-12 mb-6" >
                              <label class="ms-3" class="badge fw-bold ms-2  mt-6 mb-2 fs-7" style="background-color: white">{{nice_to_count}}</label>
                          </div>
                       </div>
                    </div>
                  </div>
                 
            
              </div>
        </div>
   
    </div>

</div>


