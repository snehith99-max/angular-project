<div class="card done" style="border-top:5px solid rgb(43, 123, 243);">
  <!-- <div class="card m-3 border p-4 " style="background-color: #ffffff;">
    <div class="row col-lg-12 col-md-12 col-sm-12 text-center mt-3">

      <h3 class=  style="color: #393939;"fw-bold">Task : <span class=" style="color: #393939;">{{task_details.task_name}} /
          {{task_details.task_code}}</span>
      </h3>
    </div>
  </div> -->

  <div class="card m-3 border p-4" style="background-color: #eaf2ff;">
    <div class="row col-lg-12 col-md-12 col-sm-12 text-center mt-3 ">

      <h3 class=" fw-bolder" style="color: #393939;">Task : <span class="text-blue">{{task_details.task_name}} /
          {{task_details.task_code}}</span>
      </h3>
    </div>
  </div>
  <div class="card border borderc-secondary m-3 " *ngIf="task_details.employee_status ==='In Testing'"
    style="background-color: #fff4fa;">
    <div class="p-3 d-flex flex-row  flex-wrap">
      <div class="col-12 col-lg-4 col-md-6 col-sm-12">
        <div class="ms-5">
          <span class="fw-bolder" style="color: #393939;">Development By</span>
          <p class="mt-3">{{completed_by}}</p>
        </div>
      </div>
      <div class="col-12 col-lg-4 col-md-6 col-sm-12">
        <div class="ms-5">
          <span class="fw-bolder" style="color: #393939;">Development Date</span>
          <p class="mt-3">{{completed_date}}</p>
        </div>
      </div>
      <!-- <div class="col-12 col-lg-4 col-md-6 col-sm-12">
            <div class="ms-5">
              <span class="fw-bolder" style="color: #393939;">Actual Development Hrs</span>
              <p class="mt-3">{{development_hrs}}</p>
            </div> -->
      <!-- </div> -->
    </div>
  </div>
  <div class="card border borderc-secondary m-3 " *ngIf="task_details.employee_status ==='Completed'"
    style="background-color: #edffee;">
    <div class="p-3 d-flex flex-row  flex-wrap">
      <div class="col-12 col-lg-4 col-md-6 col-sm-12">
        <div class="ms-5">
          <span class="fw-bolder" style="color: #393939;">Completed By</span>
          <p class="mt-3">{{completed_by}}</p>
        </div>
      </div>
      <div class="col-12 col-lg-4 col-md-6 col-sm-12">
        <div class="ms-5">
          <span class="fw-bolder" style="color: #393939;">Completed Date</span>
          <p class="mt-3">{{completed_date}}</p>
        </div>
      </div>
      <div class="col-12 col-lg-4 col-md-6 col-sm-12">
        <div class="ms-5">
          <span class="fw-bolder" style="color: #393939;">Remarks</span>
          <p class="mt-3">{{txtholdremarks}}</p>
        </div>
      </div>
    </div>
  </div>
  <div class="card border borderc-secondary m-3 shadow-sm"
    *ngIf="task_details.employee_status ==='In Progress' && task_details.hold_flag ==='Y'"
    style="background-color: #edfff4;">
    <div class="p-3 d-flex flex-row  flex-wrap">
      <div class="col-12 col-lg-4 col-md-6 col-sm-12">
        <div class="ms-5">
          <span class="fw-bolder" style="color: #393939;">Task Started By</span>
          <p class="mt-3">{{taskupdated_by}}</p>
        </div>
      </div>
      <div class="col-12 col-lg-4 col-md-6 col-sm-12">
        <div class="ms-5">
          <span class="fw-bolder" style="color: #393939;">Started Date</span>
          <p class="mt-3">{{taskupdated_date}}</p>
        </div>
      </div>
      <div class="col-12 col-lg-4 col-md-6 col-sm-12">
        <div class="ms-5">
          <span class="fw-bolder" style="color: #393939;">Estimated Hrs</span>
          <p class="mt-3">{{estimated_hours}}</p>
        </div>
      </div>
    </div>
  </div>
  <div class="card border borderc-secondary m-3 " *ngIf="task_details.employee_status ==='Hold'"
    style="background-color: #fdffed;">
    <div class="p-3 d-flex flex-row  flex-wrap">
      <div class="col-12 col-lg-4 col-md-6 col-sm-12">
        <div class="ms-5">
          <span class="fw-bolder" style="color: #393939;">Hold By</span>
          <p class="mt-3">{{hold_by}}</p>
        </div>
      </div>
      <div class="col-12 col-lg-4 col-md-6 col-sm-12">
        <div class="ms-5">
          <span class="fw-bolder" style="color: #393939;">Hold Date</span>
          <p class="mt-3">{{hold_date}}</p>
        </div>
      </div>
      <div class="col-12 col-lg-4 col-md-6 col-sm-12">
        <div class="ms-5">
          <span class="fw-bolder" style="color: #393939;">Remarks</span>
          <p class="mt-3">{{txtholdremarks}}</p>
        </div>
      </div>
    </div>
  </div>
  <div class="card  m-3 border  mt-0 mb-0">
    <!-- <div class="card-header bg-gray card-height55">
    <div class="card-title m-0 ">
      <h4 class="fw-bolder ">Task Details</h4>
    </div>
  </div> -->
    <div class="d-flex flex-row mt-6 p-3 pt-0 mb-0 flex-wrap ">
      <div class="col-lg-8 border" style="background-color: #f1f6ff;">
        <div class="d-flex flex-row m-4 p-3 pt-0 mb-0 flex-wrap">
          <div class="col-12 col-lg-3 col-md-6 col-sm-12 "><span class="fw-bolder  fs-5" style="color: #393939;">Module</span>
            <p class="mt-3 fs-5">{{task_details.module_name}}</p>
          </div>
          <div class="col-12 col-lg-3 col-md-6 col-sm-12"> <span class="fw-bolder  fs-5" style="color: #393939;">Functionality</span>
            <p class="mt-3 fs-5">{{task_details.functionality_name}}</p>
          </div>
          <div class="col-12 col-lg-3 col-md-6 col-sm-12"><span class="fw-bolder  fs-5" style="color: #393939;">Client </span>
            <p class="mt-3 fs-5">{{task_details.client_name}}</p>
          </div>
          <div class="col-12 col-lg-3 col-md-6 col-sm-12"> <span class="fw-bolder  fs-5" style="color: #393939;">Severity </span>
            <p class="mt-3 fs-5">{{task_details.severity_name}}</p>
          </div>
          <div class="col-12 col-lg-3 col-md-6 col-sm-12"><span class="fw-bolder  fs-5" style="color: #393939;">Task Type</span>
            <p class="mt-3 fs-5">{{task_details.task_typename}}</p>
          </div>
          <div class="col-12 col-lg-3 col-md-6 col-sm-12"> <span class="fw-bolder  fs-5" style="color: #393939;">Estimated Hrs</span>
            <p class="mt-3 fs-5">{{task_details.estimated_hours}}</p>
          </div>
          <div class="col-12 col-lg-3 col-md-6 col-sm-12"> <span class="fw-bolder  fs-5" style="color: #393939;">Task Status</span>
            <p class="mt-3 fs-5">
              <label class="badge bg-primary text-white  "
                *ngIf="task_details.hold_flag == 'Y' && task_details.employee_status == 'Pending'">Pending</label>
              <label class="badge bg-primary text-white  "
                *ngIf="task_details.hold_flag == 'Y' && task_details.employee_status == 'In Progress'">in
                progress</label>
              <label class="badge bg-warning text-white  "
                *ngIf="task_details.hold_flag != null && task_details.hold_flag  == 'N'">Hold</label>
              <label class="badge bg-stssuccess text-white  "
                *ngIf="task_details.hold_flag == 'Y' && task_details.retesting_flag =='N' && task_details.employee_status  == 'In Testing'">Testing</label>
                <label class="badge bg-stssuccess text-white  "
                *ngIf="task_details.hold_flag == 'Y' && task_details.retesting_flag =='Y' && task_details.employee_status  == 'In Testing'">Re-Testing</label>
              <label class="badge bg-stssuccess text-white  "
                *ngIf="task_details.hold_flag == 'Y' && task_details.employee_status  == 'Completed In Live'">Completed
                In Live</label>
            </p>
          </div>
          <!-- <div class="col-12 col-lg-3 col-md-6 col-sm-12 mt-3"> <span class="fw-bolder  fs-5" style="color: #393939;">Sub Task</span>
          <p class="mt-3 fs-5">{{task_details.sub_task}}</p>
        </div> -->
          <div class="col-12 col-lg-12 col-md-6 col-sm-12 mt-3"> <span class="fw-bolder  fs-5" style="color: #393939;">Remarks</span>
            <p class="mt-3 fs-5">{{task_details.remarks}}</p>
          </div>
        </div>
      </div>
      <div class="col-lg-4 border" style="background-color: #deebff;">
        <div class="table-responsive mt-3 me-5"
          style="max-height: 170px;overflow: auto; scrollbar-color: lightblue #ffffff;background-color: #deebff;">
          <div class="mx-3 pt-0 pb-0 bg-white rounded">
            <table class="table border-bottom mb-4 gs-7 align-middle table-row-bordered" style="background-color: #deebff;">
              <thead>
                <tr class="fw-bold fs-5 text-nowrap " style="color: #393939;">
                  <th>S.No</th>
                  <th>Sub Task</th>
                  <th>Sub Task Hrs</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngIf="subtask.length === 0">
                  <td colspan="4" class="text-center">No Subtasks</td>
                </tr>
                <tr *ngFor="let data of subtask;let i = index;">
                  <td>{{i+1}}</td>
                  <td class="fs-5">{{data.subtask_name}}</td>
                  <td class="fs-5">{{data.hrs_taken}}</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <div class="d-flex flex-row flex-wrap">

      <div class="col-12 col-lg-12 ps-3 pe-3 col-md-12 col-sm-12 fv-row table-responsive">
        <div class="card border">
          <div class="align-middle rounded-top ms-3 mt-4">
            <h4 class="text-blue">Document</h4>
          </div>
          <table id="onboardingDocumenttable" class="table table-striped table-row-bordered gy-5 gs-7 mt-3 mb-9">
            <thead>
              <tr class="fw-bolder fs-5 text-nowrap bg-gray " style="color: #393939;">
                <th>S.No</th>
                <th>Document Name</th>
                <th>Document Type</th>
                <th class="text-center">Action
                  <!-- <button (click)="downloadAllFiles(Doc_summary)"
               style=" border:none" class="download-btn">
               <em class="fa fa-download"></em><span class="tooltip">Download All</span>
           </button> -->
                </th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let data of doc_summary; let i=index;">
                <td>{{i+1}}</td>
                <td>{{data.docupload_name}}</td>
                <td>{{data.docupload_type}}</td>
                <td class="text-center text-nowrap">
                  <button type="button" class="btn btn-icon btn-sm bg-stssuccess me-2"
                    (click)="viewFile(data.file_path,data.docupload_type)">
                    <i class="fa-solid fa-file fs-6"></i></button>

                  <button type="button" name="document" (click)="downloadFiles(data.file_path,data.docupload_type)"
                    class="btn btn-icon btn-sm bg-primary me-2">
                    <span class="fa-solid fa-download text-white fs-6"></span>
                  </button>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
    <div class="d-flex flex-row flex-wrap">

      <div class="col-12 col-lg-6 ps-3 pe-3 col-md-12 col-sm-12 fv-row table-responsive">
        <div class="card border">
          <div class="align-middle rounded-top ms-3 mt-4">
            <h4 class="text-blue">Assigned Details</h4>
          </div>
          <table id="onboardingDocumenttable" class="table table-striped table-row-bordered gy-5 gs-7 mt-3 mb-9">
            <thead>
              <tr class="fw-bolder fs-5 text-nowrap bg-gray " style="color: #393939;">
                <th>S.No</th>
                <th>Assigned By</th>
                <th>Assigned To</th>
                <th>Assigned Date</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let data of assigned_list; let i=index;">
                <td>{{i+1}}</td>
                <td>{{data.assigned_by}}</td>
                <td>{{data.assigned_to}}</td>
                <td>{{data.assigned_date}}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <div class="col-12 col-lg-6 ps-3 pe-3 col-md-12 col-sm-12 fv-row table-responsive">
        <div class="card border">
          <div class="align-middle rounded-top ms-3 mt-4">
            <h4 class="text-blue">Transfer Log</h4>
          </div>
          <table id="onboardingDocumenttable" class="table table-striped table-row-bordered gy-5 gs-7 mt-3 mb-9">
            <thead>
              <tr class="fw-bolder fs-5 text-nowrap bg-gray " style="color: #393939;">
                <th>S.No</th>
                <th>Previous Member</th>
                <th>Transfer To</th>
                <th>Transfer By</th>
                <th>Transfer Date</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let data of transfer_list; let i=index;">
                <td>{{i+1}}</td>
                <td>{{data.previous_member}}</td>
                <td>{{data.reassigned_member}}</td>
                <td>{{data.updated_by}}</td>
                <td>{{data.updated_date}}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

    </div>

    <div class="align-middle rounded-top ms-6 mt-4">
      <h4 class="text-blue">Task Status Details</h4>
    </div>
    <div class="col-12 col-lg-12 ps-3 pe-3 col-md-12 col-sm-12 fv-row table-responsive">
      <table id="onboardingDocumenttable" class="table table-striped table-row-bordered gy-5 gs-7 mt-3 mb-9">
        <thead>
          <tr class="fw-bolder fs-5 text-nowrap bg-gray " style="color: #393939;">
            <th>S.No</th>
            <th>Status</th>
            <th>Updated By</th>
            <th>Updated Date</th>
            <!-- <th>Actual Development Hrs</th>
          <th>Time Taken to Complete</th> -->
            <th>Remarks</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let data of statuslog_list; let i=index;">
            <td>{{i+1}}</td>
            <td>{{data.task_status}}</td>
            <td>{{data.update_by}}</td>
            <td>{{data.updated_date}}</td>
            <!-- <td >{{data.actualdevelopment_hrs}}</td>
          <td>{{data.actualcompleted_hrs}} -->
            <!-- </td> -->
            <td>{{data.remarks}}</td>
          </tr>
        </tbody>
      </table>
    </div>
    <div *ngIf="task_details.employee_status === 'Completed In Live'">
      <div class="align-middle rounded-top ms-6 mt-4">
        <h4 class="text-blue">Completed Details</h4>
      </div>
      <div class="col-12 col-lg-12 ps-3 pe-3 col-md-12 col-sm-12 fv-row table-responsive">
        <table id="onboardingDocumenttable" class="table table-striped table-row-bordered gy-5 gs-7 mt-3 mb-9">
          <thead>
            <tr class="fw-bold fs-5 text-nowrap bg-gray" style="color: #393939;">
              <th>S.No</th>
              <th>Estimated Hrs</th>
              <th>Development Hrs</th>
              <th>Testing Hrs</th>
              <th>Total Hrs</th>
              <th>Deployment Date</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let data of completedlive_list; let i=index;">
              <td>{{i+1}}</td>
              <td>{{estimated_hours}}</td>
              <td>{{data.actualdevelopment_hrs}}</td>
              <td>{{data.actualcompleted_hrs}}
              </td>
              <td>{{data.total_hrs}}</td>
              <td>{{data.deployment_date}}</td>
              <td>{{data.remarks}}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
  <div [hidden]="task_details.employee_status === 'Completed In Live'">
    <div class="card  m-3 border mt-3 mb-0 "> <!--  *ngIf="task_details.employee_status !== 'Completed In Live'" -->
      <div class="align-middle rounded-top ms-3 mt-4">
        <h4 class="text-blue">Acknowledgement</h4>
      </div>
      <form [formGroup]="taskForm">

        <div class="d-flex flex-row m-3  mt-0 mb-4 flex-wrap row">
          <div class="col-12 col-lg-4 col-md-6 col-sm-12 "
            *ngIf="task_details.employee_status == 'Pending' && task_details.hold_flag == 'Y'"><span
              class="font-bold">Task Status<span class="ms-1 text-red">*</span></span>
            <ng-select [items]="Task_status" (clear)="clear()" (change)="changestatus()"
              formControlName="txttask_status" [(ngModel)]="task_status" bindLabel="status_name"
              class="custom col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2"
              placeholder="Select an option"></ng-select>
          </div>
          <div class="col-12 col-lg-4 col-md-6 col-sm-12 " *ngIf="task_details.hold_flag == 'N'"><span
              class="font-bold">Task Status<span class="ms-1 text-red">*</span></span>
            <ng-select [items]="hold_status" (change)="changestatus()" (clear)="clear()"
              formControlName="txttask_status" [(ngModel)]="task_status" bindLabel="status_name"
              class="custom col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2"
              placeholder="Select an option"></ng-select>
          </div>
          <div class="col-12 col-lg-4 col-md-6 col-sm-12 "
            *ngIf="task_details.employee_status == 'In Progress' && task_details.hold_flag == 'Y'"><span
              class="font-bold">Task Status<span class="ms-1 text-red">*</span></span>
            <ng-select [items]="progress_status" (change)="changestatus()" (clear)="clear()"
              formControlName="txttask_status" [(ngModel)]="task_status" bindLabel="status_name"
              class="custom col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2"
              placeholder="Select an option"></ng-select>
          </div>
          <div class="col-12 col-lg-4 col-md-6 col-sm-12 " *ngIf="task_details.employee_status == 'Completed'"><span
              class="font-bold">Task Status<span class="ms-1 text-red">*</span></span>
            <ng-select [items]="Task_status" (change)="changestatus()" (clear)="clear()"
              formControlName="txttask_status" [(ngModel)]="task_status" bindLabel="status_name"
              class="custom col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2"
              placeholder="Select an option"></ng-select>
          </div>
          <div class="col-12 col-lg-4 col-md-6 col-sm-12 " *ngIf="task_details.employee_status == 'In Testing'"><span
              class="font-bold">Task Status<span class="ms-1 text-red">*</span></span>
            <ng-select [items]="test_status" (change)="changestatus()" (clear)="clear()"
              formControlName="txttask_status" [(ngModel)]="task_status" bindLabel="status_name"
              class="custom col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2"
              placeholder="Select an option"></ng-select>
          </div>
          <!-- <div class="col-12 col-lg-4 col-md-6 col-sm-12 " *ngIf="estimtedhrs"><span class="font-bold">Estimated Hrs</span>
            <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
              <input  type="text" style="height: 42px;" [(ngModel)]="Estimated"
                class="form-control form-control-lg form-control-solid custom-input mb-3 mb-lg-0 bg-white custom-input borderc-secondary mt-2"
                placeholder="Enter Hrs"   />
            </div>
            </div> -->
          <div class="col-lg-6 col-md-12 col-sm-12 " *ngIf="remarks">
            <span class="font-bold required">Remarks</span>
            <textarea class="form-control rounded-0 mt-3 textarea-resize-none" ng-trim="true"
              id="exampleFormControlTextarea2" rows="3" formControlName="txttask_remarks" [(ngModel)]="txtremarks"
              placeholder="Enter Remarks"></textarea>
          </div>
          <div class="col-lg-4 col-md-12 col-sm-12 " *ngIf="completed">
            <span class="font-bold required">Development Hrs</span>
            <input type="input"
              class="form-control form-control-lg form-control-solid custom-input mb-3 mb-lg-0 bg-white custom-input border-secondary mt-2"
              placeholder="Enter Actual Development Hrs" formControlName="txtactualdevelopment_hrs"
              [(ngModel)]="actualdevelopment_hrs" required />
          </div>
          <div class="col-lg-4 col-md-12 col-sm-12 " *ngIf="completed">
            <span class="font-bold required">Testing Hrs</span>
            <input type="input"
              class="form-control form-control-lg form-control-solid custom-input mb-3 mb-lg-0 bg-white custom-input border-secondary mt-2"
              placeholder="Enter Total Time Taken" formControlName="txtactualcompleted_hrs"
              [(ngModel)]="actualcompleted_hrs" required />
          </div>
          <div class="col-lg-4 col-md-12 col-sm-12 mt-3" *ngIf="completed">
            <span class="font-bold required">Total Hrs</span>
            <div class="col-lg-11">
              <input type="input"
                class="form-control form-control-lg form-control-solid custom-input mb-3 mb-lg-0 bg-white custom-input border-secondary mt-2"
                placeholder="Enter Total Hrs" formControlName="txttotal_hrs" [(ngModel)]="txttotal_hrs" required />
            </div>
          </div>
          <div class="col-lg-4 col-md-12 col-sm-12 mt-3">
            <div [hidden]="!completed">
              <span class="font-bold required">Deployment Date</span>
              <div class="col-lg-12">
                <input formControlName="txtdeployment" type="text" [(ngModel)]="txtdeployment"
                  class="form-control form-control-lg form-control-solid border-secondary date-picker mb-3 mb-lg-0 bg-white custom-input mt-2"
                  placeholder="DD-MM-YYYY" name="appointment_date" />
              </div>

            </div>
          </div>
        </div>
      </form>
    </div>
  </div>

  <div class="text-center my-4">
    <button (click)="submittask()" *ngIf="estimtedhrs" [disabled]="!task_status"
      class="btn-success btn-sm text-white me-2">
      <i class="fas fa-check text-white fs-5 "></i> &nbsp;Submit</button>
    <button (click)="submittask()" *ngIf="remarks" [disabled]="taskForm.invalid"
      class="btn-success btn-sm text-white me-2">
      <i class="fas fa-check text-white fs-5 "></i> &nbsp;Submit</button>
    <button (click)="submittask()" *ngIf="development" [disabled]="!task_status"
      class="btn-success btn-sm text-white me-2">
      <i class="fas fa-check text-white fs-5 "></i> &nbsp;Submit</button>
    <button (click)="submittask()" *ngIf="completed" [disabled]="taskForm.invalid"
      class="btn-success btn-sm text-white me-2">
      <i class="fas fa-check text-white fs-5 "></i> &nbsp;Submit</button>
    <button class="btn-primary btn-sm text-white me-4" (click)="backbutton()">
      <i class="fas fa-arrow-left"></i> &nbsp;
      Back</button>

  </div>
</div>