<form class="example-form" [formGroup]="productform" >
 
    <br>
  
    

 
    <br>
    <div>
        <tfoot>
            <tr>
                <td colspan="7">
                    <button style="background-color: #12a8ce;color:white;"
                        (click)="AddVariants()"><i class="fas fa-plus"></i>Add New </button>
                </td>
            </tr>
        </tfoot>
        <div class="table-responsive">
            <div class="card card-body m-3 shadow-lg p-3 mb-5 bg-white rounded">
                <table formArrayName="variants" class="table table-striped table-row-bordered gy-5 gs-7 ">
                    <thead>
                        <tr class="fw-bold fs-5 text-nowrap bg-lightblue text-blue">

                    <td>S.NO</td>
                    <td>Product Name</td>
                    <td>Product Sub Group</td>
                    <td>Product Group</td>
                    <!-- <td>Product Description</td> -->
                    <td>Quantity</td>
                    <td>Unit Price</td>
                    <td>Tax</td>
                    <td>Discount</td>
                    <td>Total Amount</td>
                    <td>Action</td>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let item of variants.controls;let i=index" [formGroupName]="i">
                    <!-- <td>
                        <input class="form-control" formControlName="id">
                    </td> -->
                    <td>{{i+1}}</td>
                    <td>
                        <select class="form-control" (change)="productsubgroupchange(i)"
                            formControlName="product_name">
                            <option value="" hidden>---Select Product---</option>
                            <option *ngFor="let product of product_list" [value]="product.product_gid">
                                {{product.product_name}}
                            </option>
                        </select>
                    </td>
                    <td>

                        <input class="form-control" formControlName="productsubgroup_name">

                    </td>
                    <td>

                        <input class="form-control" formControlName="productgroup_name">
                    </td>
                    <!-- <td>
                        <input class="form-control" formControlName="product_desc">
                    </td> -->
                    <td>
                        <input class="form-control" (change)="Itemcalculation(i)" formControlName="quantity">
                    </td>
                    <td>
                        <input class="form-control" (change)="Itemcalculation(i)" formControlName="unit_price">
                    </td>


                    <td>

                <tr>
                    <select class="form-control" (change)="tax1change(i)" formControlName="tax_name">
                        <option value="" hidden>---Select Tax 1---</option>
                        <option *ngFor="let tax1list of tax1_list" [value]="tax1list.tax_gid">
                            {{tax1list.tax_name}}
                        </option>
                    </select>
                    <td>
                        <input class="form-control" formControlName="tax_percentage1" />

                    <td>
                </tr>
                <tr>
                    <select class="form-control" (change)="tax2change(i)" formControlName="tax_name1">
                        <option value="" hidden>---Select Tax 2---</option>
                        <option *ngFor="let tax2list of tax2_list" [value]="tax2list.tax_gid">
                            {{tax2list.tax_name}}
                        </option>
                    </select>
                    <td>
                        <input class="form-control" formControlName="tax_percentage2" />

                    <td>
                </tr>
                <tr>
                    <select class="form-control" (change)="tax3change(i)" formControlName="tax_name2">
                        <option value="" hidden>---Select Tax 3---</option>
                        <option *ngFor="let tax3list of tax3_list" [value]="tax3list.tax_gid">
                            {{tax3list.tax_name}}
                        </option>
                    </select>
                    <td style="margin-top:-30px;margin-left:100px;">
                       <input class="
                       form-control form-control-lg form-control-solid
                       borderc-secondary
                       bg-white
                       custom-input
                      
                     "  formControlName="tax_percentage3" />

                    <td>
                </tr>

                </td>
                <td>
                    <input class="form-control" (change)="Itemcalculationdiscount(i)" formControlName="discount">
                    <br>
                    <input class="form-control" formControlName="discount_amount" />

                </td>
                <td>
                    <input class="form-control" formControlName="total" />

                <td>
                    <button  color="warn" (click)="Removevariant(i)"  class="btn btn-icon btn-sm bg-danger me-2" ><span class="fa-solid fa-trash text-white  fs-6"></span></button>
                </td>

                </tr>
            </tbody>


        </table>
    </div>
</div>
</div>

<div class="text-center my-4">
    <button class="btn-sm text-white me-2" [disabled]="productform.invalid" [ngClass]="{
        'primary-button': !productform.invalid,
        'secondary-button': productform.invalid
      }" (click)="onsubmit()">
      <i class="fas fa-check text-white fs-5"></i> &nbsp; Submit
    </button>

    <button class="btn-primary btn-sm text-white me-4" routerLink="/crm/SysTrnSalesOrderSummary">
      <i class="fas fa-arrow-left"></i> &nbsp; Back
    </button>
  </div>
</form>