
<div class="card shadow-sm">
    <div class="row ms-3 mt-3 d-flex align-items-center">
        <!-- <div *ngFor="let data of LeadBankCountList"> -->
        <div class="col card-header" *ngFor="let data of LeadBankCountList">
            <h2 class="card-title">Lead Bank -Total Leads:<span
                    class="ms-3 p-1 fs-4 badge bg-success text-white">{{data.total_count }}</span></h2>
        </div>
        <!-- </div> -->
        <div class="col me-5">
            <button title="Export Excel" type="button" class="btn btn-icon btn-sm bg-success me-2 float-end"
                (click)="exportExcel1()"><i class="bi bi-file-earmark-arrow-up fs-3"></i></button>
            <button title="Import Excel" type="button" class="btn btn-icon btn-sm bg-export me-2 float-end"
                data-bs-toggle="modal" data-bs-target="#myModalexcelimport"><i class="bi bi-file-earmark-arrow-down fs-3"></i></button>
            <button title="Add Lead" class="btn-primary btn-sm text-white me-4 float-end" (click)="onadd()">
                <i class="fas fa-plus"></i>
                Add Lead</button>
        </div>
    </div>
    <br>
    <div class="d-flex justify-content-between">
        <div class="d-flex align-items-center">
            <div class="form-group me-2">
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <label for="itemsPerPageSelect" class="me-1">Show</label>
            </div>
            <div class="form-group me-2">
                <select id="itemsPerPageSelect" class="form-control d-inline-block" [(ngModel)]="itemsPerPage"
                    (ngModelChange)="onItemsPerPageChange()">
                    <option *ngFor="let option of itemsPerPageOptions" [value]="option">{{ option }}</option>
                </select>
            </div>
            <div class="form-group">
                <label for="itemsPerPageSelect" class="ms-1">entries</label>
            </div>
        </div>
        <div class="d-flex align-items-center">
            <div class="form-group me-2" style="margin-right: 10px;">
                <label for="searchInput" class="ms-1" style="margin-left: -5px;">Search:</label>
            </div>
            <div class="form-group" style="margin-right: 10px;">
                <input type="text" class="form-control" style="width:130px;" id="searchInput" (keyup)="search($event)"
                    placeholder="" />
            </div>
        </div>
    </div>
    <br>
    <div class="table-responsive">
        <div class="mx-3 p-3 pt-0 pb-0 bg-white rounded">
            <table id="GetJournalEntry_lists"
                class="table table-striped table-row-bordered border-bottom gs-7 align-middle ">
                <thead>
                    <tr class="text-white fw-bold fs-5 text-nowrap bg-lightblue text-blue align-middle">
                        <th style="width: 3%;" (click)="sort('leadbank_name')">S.No</th>
                        <th style="width: 10%;" class="text-nowrap" (click)="sort('created_date')">Date </th>
                        <th style="width: 10%;" (click)="sort('leadbank_name')">Company</th>
                        <th style="width: 25%;" (click)="sort('contact_details')">Contact</th>
                        <th style="width: 15%;" (click)="sort('region_name')">Region</th>
                        <th style="width: 15%;" (click)="sort('source_name')">Source</th>
                        <th style="width: 15%;" (click)="sort('customer_type')">Customer Type</th>
                        <th style="width: 10%;" (click)="sort('created_by')">Generated By</th>
                        <!-- <th class="text-center">Remarks</th> -->
                        <th class="text-center">Status</th>
                        <th class="text-center">Action</th> 
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let data of pagedItems;let i=index;" class="align-middle">
                        <td style="width: 3%;">{{i+1}}</td>
                        <td style="width: 10%;" class="text-nowrap">{{data.created_date}}</td>
                        <td style="width: 10%;">{{ data.leadbank_name }}</td>
                        <td style="width: 20%;">{{ data.contact_details}}</td>
                        <td style="width: 15%;">{{ data.region_name }}</td>
                        <td style="width: 15%;">{{ data.source_name }}</td>
                        <td style="width: 15%;">{{ data.customer_type }}</td>
                        <td style="width: 10%;">{{ data.created_by }}</td>
                        <!-- <td class="text-center">
                            <label title="Remarks" data-bs-toggle="modal" data-bs-target="#myModalUpdateimage9"
                                (click)="popmodal(data.remarks,data.leadbank_name)">
                                <i class="fas fa-question-circle fa-5x text-primary fs-2"></i>
                            </label>
                        </td> -->
                        <td class="text-center"> <span *ngIf="data.assign_to === ''"><label class="ms-3"
                                    class="badge bg-secondary text-black ">Not Assigned</label></span>
                            <span *ngIf="data.assign_to !== ''"><label class="ms-3"
                                    class="badge bg-success text-black ">{{data.assign_to}}</label></span>
                        </td>
                        <td class="text-center text-nowrap">
                            <button title="View" type="button" class="btn btn-icon btn-sm bg-primary me-2"
                                (click)="onview(data.leadbank_gid)"><span
                                    class="fa-solid fa-eye text-white  fs-6"></span></button>
                            <button title="Edit" type="button" class="btn btn-icon btn-sm bg-edit me-2"
                                (click)="onedit(data.leadbank_gid)"><span
                                    class="fa-solid fa-pencil text-white  fs-6"></span></button>
                                    <button title="Contact" type="button" class="btn btn-icon btn-sm bg-view me-2"
                                (click)="onaddcontact(data.leadbank_gid)"><span
                                    class="fa fa-user text-white  fs-6"></span></button>
                            <button title="Delete" type="button" (click)="openModaldelete(data.leadbank_gid)"
                                data-bs-toggle="modal" data-bs-target="#myModaldelete"
                                class="btn btn-icon btn-sm bg-danger me-2"><span
                                    class="fa-solid fa-trash text-white  fs-6"></span></button>

                            <!-- <div style="cursor: pointer;">
                                    <button title="Options" class="btn me-2 p-1 " (click)="toggleOptions(data.leadbank_gid)"><span
                                            class="fa-solid fa-ellipsis-vertical fs-1"
                                            style="color: #4d4d4d;"></span></button>
                                    <div *ngIf="showOptionsDivId === data.leadbank_gid"
                                        class="pb-0 rounded bg-white cursor-pointer icon_menu" style="right: 45px;">
                                        <div class="d-flex p-3 pb-3 Icon_hover" (click)="onview(data.leadbank_gid)">
                                            <span><i class="fa-solid fa-eye fs-3 me-5"></i></span>
                                            <span>View</span>
                                        </div>
                                        <div class="d-flex p-3 pb-3 Icon_hover" (click)="onedit(data.leadbank_gid)">
                                          <span><i class="fa-solid fa-pencil fs-3 me-5"></i></span>
                                          <span>Edit</span>
                                      </div>
                                        <div class="d-flex p-3 pb-3 Icon_hover"
                                        (click)="openModaldelete(data.leadbank_gid)" data-bs-toggle="modal"
                                            data-bs-target="#myModaldelete">
                                            <span><i class="fa-regular fa-trash-can fs-3 me-5"></i></span>
                                            <span>Delete</span><span class="tooltip">Delete</span>
                                        </div>
                                    </div>
                                </div> -->

                        </td>
                    </tr>
                </tbody>
            </table>
            <div *ngIf="noResultsMessage" class="text-center">
                {{ noResultsMessage }}
            </div>
            <div class="d-flex justify-content-between align-items-center">
                <div class="text-nowrap">
                    Showing {{ startIndex + 1 }} to {{ endIndex }} of {{ totalItems }} entries
                </div>
                <div class="pagination-container float-end">
                    <div class="pagination-scroll-container" style="margin-left: 122px;">
                        <pagination [boundaryLinks]="false" [maxSize]="8" [totalItems]="totalItems"
                            [itemsPerPage]="itemsPerPage" [(ngModel)]="currentPage" (pageChanged)="pageChanged($event)"
                            [directionLinks]="true" previousText="Previous" nextText="Next" class="pagination-controls">
                        </pagination>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <!--Delete popup-->
    <div class="modal" id="myModaldelete" data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="text-center my-4">
                    <h2><b>Are you sure?</b></h2>
                    <br>
                    <p style="display: block;">Do You Want To Delete the Record ?</p><br>
                    <br>
                    <div class="text-center my-4">
                        <button class="btn-danger btn-sm text-white me-4" (click)="ondelete()" data-bs-dismiss="modal">
                            <i class="fas fa-trash text-white fs-5 "></i> &nbsp;Delete
                        </button>
                        <button class="btn-primary btn-sm text-white me-2" data-bs-dismiss="modal">
                            <i class="fas fa-close text-white"></i> &nbsp;Close
                        </button>&nbsp;

                        <!-- (click)="ondelete()"  -->
                    </div>
                </div>
            </div>
        </div>
    </div>
    <br>

    <!-- The Modal Import -->
    <!-- <form [formGroup]="reactiveForm" #form="ngForm"> -->
    <div class="modal" id="myModalexcelimport" data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">

                <!-- Modal Header -->

                <!-- <div class="card-header p-1 pb-2 pt-1 rounded-top bg-primary">
                         -->
                <div class="modal-header bg-primary mb-10">
                    <h2 class="modal-title text-white ">&nbsp;&nbsp;<i class="fas fa-file fw-bolder fs-3"></i>
                        &nbsp;&nbsp;Lead Bank Excel File Import</h2>

                </div>

                <!-- Modal body -->
                <!-- <div class="modal-body"> -->
                <div class="row p-2">
                    <div class="col-3"><button title="Download Template" type="submit" class="btn-secondary  ms-2"
                            (click)="downloadfileformat()">
                            <i class="fa-solid fa-download fs-5"></i>&nbsp;&nbsp;Template</button>
                    </div>
                    <br><br>
                    <!-- <div class="col-12 col-lg-4 col-md-6 col-sm-12"> -->
                    <div class="col-6">

                        <!-- <span class="font-bold"><b>Select an Excel File to Import</b><span
                                    class="ms-1 text-red">*</span></span> -->
                        <!-- <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2"> -->
                        <!-- <input style="width: 100%; height: 100%;" (change)="onChange1($event)" accept=".xlsx, .xls"
                                    type="file" #fileInput class="
                              form-control form-control-lg form-control-solid bg-white
                              mb-3 mb-lg-0  borderc-secondary custom-input
                            " name="fName" > -->
                        <input type="file" #fileInput class="border borderc-secondary" accept=".xlsx, .xls"
                            (change)="onChange1($event)" id="fileInput" [(ngModel)]="fileInputs" multiple>

                    </div>
                    <div class="col-3">
                        <button class="btn-primary col-4 " (click)="importexcel($event)" data-bs-dismiss="modal"><i
                                class="fa-solid fa-file-import "></i></button>&nbsp;
                        <button type="reset" id="pseudoCancel" class="btn-danger col-4 "
                            (click)="canceluploadexcel()"><i class="bi bi-x-circle"></i></button>
                    </div>
                </div>
                <div class="text-center my-4">
                    <!-- <button title="Upload" type="submit" class="btn-success btn-sm text-white me-2" (click)="importexcel()">
                                <i class="fa fa-check fs-5"></i>&nbsp; Upload</button> -->

                    <button type="button" type="reset" class="btn-danger col-2" (click)="onclose()"
                        data-bs-dismiss="modal">
                        <i class="fa fa-close fs-5 text-center"></i>&nbsp;
                        Close
                    </button>
                </div>
            </div>
        </div>
    </div>
    <!-- </form> -->
    <!--Remarks popup-->
    <div class="modal fade" id="myModalUpdateimage9" tabindex="-1" data-bs-backdrop='static'
        aria-labelledby="editamlcategoryLabel" aria-hidden="true" data-bs-keyboard="false">
        <div class="modal-dialog modal-md modal-dialog-centered">
            <div class="modal-content  d-flex justify-content-center">
                <div class="card-header p-1 pb-1 pt-1 rounded-top bg-primary"
                    style="display: flex; align-items: center; height: 40px;">

                    <h3 Style="color: white; font-weight: bold; text-align: left; width: 100%;margin-left: 10px;">
                        {{leadbank_name}}
                    </h3>
                </div>
                <div class="modal-body">

                    <div class="col-12 col-lg-3 col-md-6 col-lg-12">

                        <span class="fw-bold">Remarks </span>

                        <p class="mt-2 wrap-text" style="max-width: 100%; overflow: auto; max-height: 200px;">
                            {{remarks}}</p>
                    </div>
                    <div class="text-center my-4">
                        <button class="btn-danger btn-sm text-white me-2" data-bs-dismiss="modal"
                            style="background-color: red;">
                            <i class="fas fa-close text-white"></i> &nbsp;close
                        </button>&nbsp;
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Lead Count Pop -->
    <div class="modal" id="leadcountpopup" tabindex="-1" data-bs-backdrop='static'
        aria-labelledby="editamlcategoryLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered ">
            <div class="modal-content ">
                <div class="modal-header bg-primary mb-5">
                    <h3 class="modal-title text-white"><i class="fa-solid fa-eye fs-3"></i> &nbsp; Lead Count</h3>
                </div>
                <div class="d-flex justify-content-center">
                    <div style="max-height: 160px;" class="overflow-auto p-3 col-10 " id="scroll-bar-table">
                        <table id="LeadsCountList"
                            class="table table-striped table-bordered table-hover table-sm table-responsive">
                            <thead style="background-color:#def0ff;">
                                <th class="text-center">Customer Type</th>
                                <th class="text-center">Lead Count</th>
                            </thead>
                            <tbody>
                                <tr *ngFor="let data of LeadsCountList; let i=index;">
                                    <td class="text-center">{{data.display_name}}</td>
                                    <td class="text-center">{{data.lead_count}}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="text-center mb-3 mt-2">
                    <button type="button" class="btn-danger text-white" data-bs-dismiss="modal">
                        <i class="fa fa-close fs-5 text-center"></i>
                        Close
                    </button>
                </div>
            </div>
        </div>
    </div>