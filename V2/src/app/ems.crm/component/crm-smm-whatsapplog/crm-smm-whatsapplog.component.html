<div class="card shadow-sm">
    <div class="card-header bg-whatsapp" style="color: white;">
        <h3 class="card-title"> <i class="bi bi-whatsapp fs-1"></i> &nbsp;
          {{p_name}}</h3>
            <div style="margin: 13px">
            <div class="col me-5">
              <button title="Back" routerLink="/crm/CrmSmmWhatsappcampaign" class="btn-secondary btn-sm text-black me-4 "><i class="ki-duotone ki-entrance-right fs-5">
                <i class="path1"></i>
                <i class="path2"></i>
            </i>&nbsp;Back</button>
              <!-- <button class="btn-primary btn-sm text-white me-4" style="margin-left: 800px;" (click)="redirecttolist()">
                  <i class="ki-duotone ki-entrance-right fs-5">
                      <i class="path1"></i>
                      <i class="path2"></i>
                  </i>&nbsp;Back</button> -->
            </div>
  </div>
    </div>
   
  <!-- <button title="View" type="button" class="btn btn-icon btn-sm bg-primary me-2" ><span class="fa-solid fa-eye text-white  fs-6"></span></button> -->
  
  <div class="table-responsive">
    <div class="card card-body m-3 shadow-xl p-3 mb-5 bg-white rounded">
      <table  id="log" class="table table-striped table-row-bordered border-bottom gs-7">
        <thead>
          <tr class=" text-white fw-bold fs-6 text-nowrap bg-whatsapp">
            <th>S.No</th>
            <th>Name</th>
            <th>Mobile No</th>
            <th>Source</th>
            <th>Lead Status</th>
            <th>Direction</th>
            <th>Status</th>
            <th>Reason</th>
            <th style="text-align: center;">Date</th>
            
          </tr>
        </thead>
        <tbody>
       <tr *ngFor="let data of log; let i=index;" class="align-middle">
            <td>{{i+1}}</td>
           <td style="white-space: nowrap;">{{data.displayName}}</td>
           <td style="white-space: nowrap;">{{data.CompanyName}}</td>
           <td style="white-space: nowrap;">{{data.identifiervalue}}</td>
           <td style="white-space: nowrap;">{{data.source_name}}</td>
                        <td>
                            <span *ngIf="data.lead_status === 'Assigned' "><label class="ms-3" class="badge bg-success text-white ">Assigned</label></span>
                            
                            <span *ngIf="data.lead_status === 'Not Assigned'" ><label class="ms-3" class="badge bg-warning text-white ">Not Assigned</label></span>
                            
                          </td>

           <td>
            <span *ngIf="data.direction === 'incoming' "><label class="ms-3" class="badge bg-success text-white ">Incoming</label></span>
            
            <span *ngIf="data.direction === 'outgoing'" ><label class="ms-3" class="badge bg-primary text-white ">Outgoing</label></span>
            
          </td>
          <td>
            <span *ngIf="data.status === 'accepted'"><label class="ms-3" class="badge bg-success text-white ">Accepted</label></span>
            <span *ngIf="data.status === 'delivered'"><label class="ms-3" class="badge bg-success text-white ">Delivered</label></span>
            <span *ngIf="data.status === 'delivery_failed'" ><label class="ms-3" class="badge bg-danger text-white ">Delivery Failed</label></span>
            <span *ngIf="data.status === 'sending_failed'" ><label class="ms-3" class="badge bg-danger text-white ">Sending Failed</label></span>

          </td>
          <td>
            <span *ngIf="data.status === 'delivery_failed'"> <label title="Reason" data-bs-toggle="modal" data-bs-target="#myModalUpdateimage2"
              (click)="popmodal(data.reason)">
              <i class="fas fa-question-circle fa-5x text-primary fs-2 ms-4"></i>
          </label></span>
          <span *ngIf="data.status === 'sending_failed'"> <label title="Reason" data-bs-toggle="modal" data-bs-target="#myModalUpdateimage2"
            (click)="popmodal(data.reason)">
            <i class="fas fa-question-circle fa-5x text-primary fs-2 ms-4"></i>
        </label></span>
            <span *ngIf="data.status === 'delivered'"><label class="ms-3"><b>-</b></label></span>
            <span *ngIf="data.status === 'accepted'"><label class="ms-3"><b>-</b></label></span>       
          
          </td>
                               <!-- <td style="white-space: nowrap;">{{data.status}}</td> -->
                               <td style="white-space: nowrap;text-align: center;" class="me-10">{{(data.created_date) }}</td>

                               <!-- <script>
                               function formatDate(isoDate) {
                                 const options = { day: 'numeric', month: 'long', year: 'numeric', hour: 'numeric', minute: 'numeric', second: 'numeric' };
                                 const date = new Date(isoDate);
                                 return date.toLocaleString('en-US', options);
                               }
                               </script> -->
         
        
      </tr> 
        </tbody>
      </table>
    </div>
  </div>  
  <!---Remarks New popup-->
<div class="modal fade" id="myModalUpdateimage2" tabindex="-1" data-bs-backdrop='static'
aria-labelledby="editamlcategoryLabel" aria-hidden="true" data-bs-keyboard="false">
<div class="modal-dialog modal-md modal-dialog-centered">
    <div class="modal-content">
        <div class="card-header p-1 pb-1 pt-1 rounded-top bg-whatsapp"
            style="display: flex; align-items: center; height: 40px;">
            <h3 style="color: white; font-weight: bold; text-align: left; width: 100%; margin-left: 10px;">
               Reason</h3>
        </div>


        <div class="modal-body">
            <div class="col-12 col-lg-3 col-md-6 col-lg-12">
                <div style="max-height: 300px;overflow-y: scroll;">
                <span class="fw-bold">Reason: </span>
                <p class="mt-2 wrap-text" style="max-width: 100%; overflow: auto; max-height: 200px;">
                    {{reason}}</p>
                <hr>
            </div>
                <div class="text-center my-4">
                    <button class="btn-danger btn-sm text-white me-2" data-bs-dismiss="modal"
                        style="background-color: red;">
                        <i class="fas fa-close text-white"></i> &nbsp;Close
                    </button>&nbsp;
                </div>
            </div>
        </div>
    </div>
</div>
</div>
  <br>
  