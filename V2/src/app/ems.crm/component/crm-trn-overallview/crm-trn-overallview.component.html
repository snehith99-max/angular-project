<div class="card card-bordered" style="background-color: rgb(253, 253, 253);">
    <div class="card-header d-flex align-items-center"
        style="background: rgb(81,183,204);
        background: linear-gradient(90deg, rgba(81,183,204,1) 0%, rgba(173,221,211,1) 35%, rgba(209,242,255,1) 100%);color:black;font-size: 14px;height:60px;padding-top: 12px;padding-left: 8px;">
        <div *ngFor="let leadbasicdetailslist1 of leadbasicdetailslist">
            <h1 class="card-title fw-bold fs-3"><b><i class="fa-solid fa-eye" style="font-size: 14px;"></i>&nbsp;
                    {{leadbasicdetailslist1.leadbank_name}}</b></h1>
        </div>
        <div class="ms-auto me-6">
            <h5 style="color:#9e28db;">{{toDate}} &nbsp; {{currentDayName}}</h5>
            <h1> {{ rxTime | date: 'hh:mm:ss a' }} </h1>
        </div>&nbsp;&nbsp;
        <div class=" float-end me-4 ">
            <button title="Back" type="button"
                class="btn btn-sm btn-icon btn-outline-primary position-absolute top-0 end-0 bg-white mt-4 p-2 me-4"
                (click)="onback()">
                <i class="fa-solid fa-arrow-left text-blue mb-1"></i>
            </button>
        </div>
    </div>
    <div class="card card-bordered">
        <div class="row m-2">
            <div class="col-lg-8 col-md-8 col-sm-8 border radius-10 ">
                <h2 class="m-1">Overall Performance</h2>
                <div class="row flex-nowrap">
                    <ng-container *ngIf="flag2">
                        <div class="d-flex flex-column mt-8">
                            <apx-chart [series]="saleschart.series" [chart]="saleschart.chart"
                                [xaxis]="saleschart.xaxis" [yaxis]="saleschart.yaxis"
                                [dataLabels]="saleschart.dataLabels" [stroke]="saleschart.stroke"
                                [legend]="saleschart.legend" [fill]="saleschart.fill" [states]="saleschart.states"
                                [tooltip]="saleschart.tooltip" [colors]="saleschart.colors"
                                [markers]="saleschart.markers" [plotOptions]="saleschart.plotOptions">
                            </apx-chart>
                        </div>
                    </ng-container>
                    <ng-container *ngIf="!flag2">
                        <div class="d-flex justify-content-center">
                            <span>
                                <img src=".\assets\media\images\No_data_found.png" class="h-78px w-300px">
                            </span>
                        </div>
                    </ng-container>
                </div>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-4">
                <div class="row ">
                    <div class="col-lg-12 col-md-12 col-sm-12">
                        <form [formGroup]="reactiveForm" #form="ngForm">
                            <div class="card border border-blue1">
                                <div class="d-flex row col-lg-12 col-md-12 col-sm-12">
                                    <ng-container
                                        *ngIf="leadstage_name === 'Decision' || leadstage_name === 'Purchase'">
                                        <div class="row">
                                            <div class="col-lg-8 col-md-8 col-sm-8">
                                                <span class="font-bold ms-5"><b>Potential Value</b></span>
                                                <input formControlName="potential_value" type="text" class="
                                                    form-control form-control-lg form-control-solid
                                                    custom-input
                                                    mb-3 mb-lg-0 ms-5
                                                    bg-white
                                                    custom-input
                                                " pattern="^(?!\s*$).+" style="border-color: rgb(182, 180, 180);"
                                                    name="call_response" required placeholder="Enter Potential Value" />
                                            </div>
                                            <div class="col-lg-4 col-md-4 col-sm-4 mt-3">
                                                <button class="btn-success btn-sm text-white "
                                                    (click)="onaddpotentialvalue()" data-bs-dismiss="modal">
                                                    <i class="fas fa-check text-white"></i> &nbsp;Update
                                                </button>
                                            </div>
                                        </div>
                                    </ng-container>
                                </div>
                                <div
                                    class="col-lg-12 col-md-6 col-sm-12 text-center symbol symbol-60px symbol-circle mt-1">
                                    <img src="assets\media\patterns\user-image.jpg" width="100%" height="100%">
                                </div>
                                <div *ngFor="let leadbasicdetailslist1 of leadbasicdetailslist">
                                    <div style="color: #009EF7;"
                                        class="d-flex align-items-center justify-content-center">
                                        <span class="font-bold ms-3" style="font-size: 14px; margin-top: 3px;">
                                            {{leadbasicdetailslist1.leadbankcontact_name}} </span>
                                    </div>
                                    <div class="text-black-600 ms-3 d-flex align-items-center justify-content-center"
                                        style="color: #009EF7;font-size: 12px;">
                                        {{leadbasicdetailslist1.email}}</div>
                                    <div class="text-black-600 ms-3 d-flex align-items-center justify-content-center"
                                        style="font-size:12px;">
                                        <b>{{leadbasicdetailslist1.customer_type}} </b>
                                    </div>
                                    <div class="text-black-600 ms-3 d-flex align-items-center justify-content-center"
                                        style="font-size:12px;"><b> Active Since</b> -
                                        <b> {{leadbasicdetailslist1.created_date}}</b>
                                    </div>
                                </div>
                                <br>
                                <div class="d-flex justify-content-center mb-1"
                                    *ngFor="let leadbasicdetailslist1 of leadbasicdetailslist">
                                    <button title="Edit" type="button"
                                        class="widgets-icons-2 rounded-circle bg-gradient-info1 text-white me-2"
                                        data-bs-toggle="modal" data-bs-target="#myModaleditcontact"
                                        (click)="openmodaleditcustomer(leadbasicdetailslist1.leadbank_gid,'Customer')">
                                        <span class="fas fa-pencil text-white fs-6"></span>
                                    </button>
                                    <!-- <ng-container *ngIf="leadbasicdetailslist1.customer_gid !== '' ">
                        <button title="Make As Customer" type="button"
                            class="widgets-icons-2 rounded-circle bg-gradient-user text-white" data-bs-toggle="modal"
                            data-bs-target="#myModalalreadycustomer">
                            <span class="fa-solid fa-user-plus text-white fs-6"></span>
                        </button>
                    </ng-container> -->
                                    <ng-container *ngIf="leadbasicdetailslist1.customer_gid === '' ">
                                        <button title="Make As Customer" type="button"
                                            class="widgets-icons-2 rounded-circle bg-gradient-user text-white"
                                            data-bs-toggle="modal" data-bs-target="#myModaladdtocustomer"
                                            (click)="openmodaleditcustomer(leadbasicdetailslist1.leadbank_gid,'Customer')">
                                            <span class="fa-solid fa-user-plus text-white fs-6"></span>
                                        </button>
                                    </ng-container>&nbsp;&nbsp;
                                    <ng-container *ngIf="lsshopify_flag==='Y'">
                                        <button title="Call" type="button" data-bs-toggle="modal"
                                            data-bs-target="#myModalcall"
                                            class="widgets-icons-2 rounded-circle phone-button text-white"><span
                                                class="fa-solid fa-phone fs-3"></span></button>&nbsp;&nbsp;
                                    </ng-container>
                                    <button title="Move Stage" type="button" (click)="Getleadstadename()"
                                        class="widgets-icons-2 rounded-circle bg-gradient-darkoranges text-white me-2"
                                        data-bs-toggle="modal" data-bs-target="#mymovestage">
                                        <i class="fa-solid fa-stairs fs-4"></i>
                                    </button>
                                    <!-- <button (click)="openModallog5(leadbasicdetailslist1.leadbank_gid)" title="Move to Drop" *ngIf="leadstage_name != 'Drop' && leadstage_name != '' && lspage != 'My-teleProspect' &&
                                            lspage != 'My-teleNew' && lspage != 'My-teleNewpending'"
                                                type="button" data-bs-toggle="modal" data-bs-target="#myModaldelete1"
                                                class="widgets-icons-2 rounded-circle bg-gradient-purple text-white me-2"><i
                                                    class="fa-solid fa-arrow-down"></i></button> -->
                                    <!-- <ng-container *ngIf="leadbasicdetailslist1.customer_gid === '' ">
                                        <button title="Price Segment" type="button"
                                            class="widgets-icons-2 rounded-circle bg-gradient-brown text-white"
                                            data-bs-toggle="modal" data-bs-target="#myModalpricesegmentmsg">
                                            <span class="fas fa-ticket text-white fs-3"></span>
                                        </button>
                                    </ng-container> -->
                                    <ng-container *ngIf="leadbasicdetailslist1.customer_gid !== '' ">
                                        <button title="Price Segment" type="button"
                                            class="widgets-icons-2 rounded-circle bg-gradient-brown text-white"
                                            (click)="Getpricesegement()" data-bs-toggle="modal"
                                            data-bs-target="#myModalpricesegmentmsg">
                                            <span class="fas fa-ticket text-white fs-3"></span>
                                        </button>
                                    </ng-container>&nbsp;&nbsp;


                                    <!-- <button title="Schedule Details" type="button"
                    class="widgets-icons-2 rounded-circle bg-gradient-darkoranges text-white me-2"
                    data-bs-toggle="modal" data-bs-target="#myscheduledetails">
                    <span class="fa fa-clock text-white fs-6"></span>
                </button> -->
                                    <!-- <button title="Edit" type="button"
                        class="widgets-icons-2 rounded-circle bg-gradient-info1 text-white me-2" data-bs-toggle="modal"
                        data-bs-target="#myModalphone"
                        (click)="openmodaleditcustomer(leadbasicdetailslist1.leadbank_gid)">
                        <span class="fa-solid fa-phone text-white fs-6"></span>
                    </button> -->
                                </div>
                            </div>
                        </form>
                    </div>
                    <br>
                    <div class="col-lg-12 col-md-12 col-sm-12 mt-1">
                        <div class="card border">
                            <div class="card-header  "
                                style="background: rgb(81,183,204);
                                    background: linear-gradient(90deg, rgba(81,183,204,1) 0%, rgba(173,221,211,1) 35%, rgba(209,242,255,1) 100%);color:black;font-size: 14px;align-items: center;margin: 2px;">
                                <b>Opportunity Summary</b>
                            </div>
                            <div class="row" style="height: 180px">
                                <div class="table-responsive">
                                    <div class="card card-body m-3  p-3 mb-5 bg-white rounded "
                                        style=" max-height: 180px; overflow-y: auto;overflow-x: hidden;">
                                        <div *ngFor="let data of myappointmentlog_list;">
                                            <div>
                                                <div class="row">
                                                    <div class="col-lg-6 col-md-6 col-sm-6">
                                                        <label><b>Lead Title</b></label>
                                                        <br />
                                                        <div>
                                                            <p>{{data.lead_title}}</p>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-6 col-md-6 col-sm-6">
                                                        <label><b>Vertical</b></label>
                                                        <br />
                                                        <div>
                                                            <p>{{data.business_vertical}}</p>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-lg-6 col-md-6 col-sm-6">
                                                        <label><b>Appointment</b></label>
                                                        <br />
                                                        <div>
                                                            <p>{{data.appointment_date}}</p>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-6 col-md-6 col-sm-6">
                                                        <label><b>Assign To</b></label>
                                                        <br />
                                                        <div>
                                                            <p>{{data.assign_to}}</p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <hr />
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row m-1">
        <div class="col-lg-4 col-md-4 col-sm-4">
            <div class="card border">
                <div class="card-header"
                    style="background: rgb(81,183,204);
            background: linear-gradient(90deg, rgba(81,183,204,1) 0%, rgba(173,221,211,1) 35%, rgba(209,242,255,1) 100%);color:black;font-size: 14px;align-items: center;margin: 2px;">
                    <b>WhatsApp </b>
                    <button class="btn dropdown-toggle fs-1" type="button" data-bs-toggle="collapse"
                        data-bs-target="#collapseThrid" aria-expanded="true" aria-controls="collapseThrid"></button>
                </div>
                <div id="collapseThrid" class="collapse show" style="overflow-x: hidden;">
                    <div class="row p-1 pt-0">
                        <div class="d-flex flex-column ">
                            <div class="card bg-secondary" style="height: 400px ;">
                                <div class="card-header">
                                    <div *ngFor="let data of whatsapp_list; let i=index;">
                                        <div class="card-title">
                                            <div class="symbol symbol-35px symbol-circle bg-white">
                                                <span class="symbol-label bg-light-danger text-danger fs-6 fw-bolder">
                                                    {{data.first_letter}}</span>
                                            </div>
                                            <div class="d-flex justify-content-center flex-column me-3">
                                                <a class="fs-4 fw-bold text-gray-900 text-hover-primary me-1 mb-2 lh-1"
                                                    style="margin-left: 10px;">{{data.displayName}}</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- Message chat body-->
                                <div class="card-body bg-message" id="kt_chat_messenger_body"
                                    style=" max-height: 300px; overflow-y: auto;">
                                    <div class="scroll-y me-n5 pe-5 h-300px h-lg-auto" data-kt-element="messages"
                                        id="kt_chat_messenger_body" data-kt-scroll="true"
                                        data-kt-scroll-activate="{default: false, lg: true}" data-kt-scroll="true"
                                        data-kt-scroll-activate="{default: false, lg: true}"
                                        data-kt-scroll-max-height="auto"
                                        data-kt-scroll-dependencies="#kt_header, #kt_app_header, #kt_app_toolbar, #kt_toolbar, #kt_footer, #kt_app_footer, #kt_chat_messenger_header, #kt_chat_messenger_footer"
                                        data-kt-scroll-wrappers="#kt_content, #kt_app_content, #kt_chat_messenger_body"
                                        data-kt-scroll-offset="5px">
                                        <div *ngFor="let data of whatsappmessage_list; let i=index;">
                                            <div *ngIf="data.direction === 'incoming'"
                                                class="d-flex justify-content-start mb-10">
                                                <div *ngIf="data.type === 'text'"
                                                    class="d-flex flex-column align-items-start">
                                                    <span class="text-muted fs-7 mb-1">{{data.time}}</span>
                                                    <div class="p-5 rounded bg-white text-dark fw-semibold mw-lg-400px text-start"
                                                        data-kt-element="message-text">
                                                        {{data.message_text}}</div>
                                                </div>
                                                <div *ngIf="data.type === 'image'"
                                                    class="d-flex flex-column align-items-start">
                                                    <span class="text-muted fs-7 mb-1">{{data.time}}</span>
                                                    <div class="bordered-image" data-kt-element="message-text">
                                                        <img src="{{data.document_path}}" alt=""
                                                            style="width:100px;height:150px;">
                                                    </div>
                                                </div>
                                                <div *ngIf="data.document_path.endsWith('.mp4')"
                                                    class="d-flex flex-column align-items-start">
                                                    <span class="text-muted fs-7 mb-1">{{data.time}}</span>
                                                    <div class="bordered-image" data-kt-element="message-text">
                                                        <video controls style="width:100px;height:150px;">
                                                            <source src="{{data.document_path}}">
                                                        </video>
                                                    </div>
                                                </div>
                                                <div class="d-flex flex-column align-items-start">
                                                    <ng-container *ngIf="whatsappmessage_list[i] &&  
                                                    (whatsappmessage_list[i].document_path.includes('.pdf') || 
                                                    whatsappmessage_list[i].document_path.includes('.doc') || 
                                                    whatsappmessage_list[i].document_path.includes('.docx') || 
                                                    whatsappmessage_list[i].document_path.includes('.txt') || 
                                                    whatsappmessage_list[i].document_path.includes('.xlsx') || 
                                                    whatsappmessage_list[i].document_path.includes('.xls'))">
                                                        <span class="text-muted fs-7 mb-1">{{data.time}}</span>
                                                        <div class="p-5 rounded bg-lightgreen text-dark fw-semibold mw-lg-400px text-start"
                                                            data-kt-element="message-text"> <a
                                                                [href]="whatsappmessage_list[i]?.document_path"
                                                                title="Download" target="_blank"><i
                                                                    class="fa-solid fa-download"></i>&nbsp;&nbsp;{{whatsappmessage_list[i]?.document_name}}</a>
                                                        </div>
                                                    </ng-container>
                                                </div>
                                            </div>
                                            <div *ngIf="data.direction === 'outgoing'"
                                                class="d-flex justify-content-end mb-10">
                                                <div *ngIf="data.type === 'text'"
                                                    class="d-flex flex-column align-items-start">
                                                    <span class="text-muted fs-7 mb-1">{{data.time}}</span>
                                                    <div class="p-5 rounded bg-lightgreen text-dark fw-semibold mw-lg-400px text-start"
                                                        data-kt-element="message-text">
                                                        {{data.message_text}}
                                                    </div>
                                                </div>
                                                <div *ngIf="data.type === 'image'"
                                                    class="d-flex flex-column align-items-start">
                                                    <span class="text-muted fs-7 mb-1">{{data.time}}</span>
                                                    <div class="bordered-image" data-kt-element="message-text">
                                                        <img src="{{data.document_path}}" alt=""
                                                            style="width:100px;height:150px;">
                                                    </div>
                                                </div>
                                                <div *ngIf="data.type === 'Template'"
                                                    class="d-flex flex-column align-items-start">
                                                    <div *ngIf="data.media_url === ''">
                                                        <span class="text-muted fs-7 mb-1">{{data.time}}</span>
                                                        <div class="bordered-image" data-kt-element="message-text">
                                                            <div class="p-5 bg-lightgreens text-dark fw-semibold mw-lg-400px text-start"
                                                                data-kt-element="message-text"
                                                                [innerHTML]="data.template_body"></div>
                                                            <div class="p-5 bg-lightgreens text-blue fw-semibold mw-lg-400px text-start"
                                                                data-kt-element="message-text">
                                                                {{data.footer}}</div>
                                                        </div>
                                                    </div>
                                                    <div *ngIf="data.media_url !== ''">
                                                        <span class="text-muted fs-7 mb-1">{{data.time}}</span>
                                                        <div class="bordered-image" data-kt-element="message-text">
                                                            <img src="{{data.media_url}}" alt=""
                                                                style="width:100%;height:150px;">
                                                            <div class="p-5 bg-lightgreens text-dark fw-semibold mw-lg-400px text-start"
                                                                data-kt-element="message-text"
                                                                [innerHTML]="data.template_body"></div>
                                                            <div class="p-5 bg-lightgreens text-blue fw-semibold mw-lg-400px text-start"
                                                                data-kt-element="message-text">
                                                                {{data.footer}}</div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div *ngIf="data.document_path.endsWith('.mp4')"
                                                    class="d-flex flex-column align-items-start">
                                                    <span class="text-muted fs-7 mb-1">{{data.time}}</span>
                                                    <div class="bordered-image" data-kt-element="message-text">
                                                        <video controls style="width:100px;height:150px;">
                                                            <source src="{{data.document_path}}">
                                                        </video>
                                                    </div>
                                                </div>
                                                <div class="d-flex flex-column align-items-start">
                                                    <ng-container *ngIf="whatsappmessage_list[i] &&  
                                                   (whatsappmessage_list[i].document_path.includes('.pdf') || 
                                                   whatsappmessage_list[i].document_path.includes('.doc') || 
                                                   whatsappmessage_list[i].document_path.includes('.docx') || 
                                                   whatsappmessage_list[i].document_path.includes('.txt') || 
                                                   whatsappmessage_list[i].document_path.includes('.xlsx') || 
                                                   whatsappmessage_list[i].document_path.includes('.xls'))">
                                                        <span class="text-muted fs-7 mb-1">{{data.time}}</span>
                                                        <div class="p-5 rounded bg-lightgreen text-dark fw-semibold mw-lg-400px text-start"
                                                            data-kt-element="message-text"> <a
                                                                [href]="whatsappmessage_list[i]?.document_path"
                                                                title="Download" target="_blank"><i
                                                                    class="fa fa-download"></i>&nbsp;&nbsp;{{whatsappmessage_list[i]?.document_name}}</a>
                                                        </div>

                                                    </ng-container>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                                <!------Message chat body------->

                                <!------Message chat footer------->
                                <form [formGroup]="reactiveMessageForm" #form="ngForm">
                                    <div class="card-footer pt-4" id="kt_chat_messenger_footer" style="padding: 0;">
                                        <div class="d-flex flex-row m-6 mt-0 flex-wrap">

                                            <div *ngFor="let data of whatsappmessage_list; let i=index;">
                                                <input type="hidden" [formControlName]="'identifierValue'"
                                                    [value]="data.identifierValue" />
                                            </div>

                                            <div>
                                                <div *ngIf="openDiv" class="sampel card border ">
                                                    <div class="nassar rounded-top p-3 ">
                                                        <button type="button" class="btn-wts-icon"
                                                            style="background-color: transparent;"
                                                            data-bs-toggle="modal" data-bs-target="#myModaldocument"
                                                            (click)="setFileType('file')">
                                                            <i class="fa-regular fa-file fs-default-icon text-blue"></i>
                                                            &nbsp;&nbsp;<span
                                                                class="text-black">Document</span></button>
                                                    </div>
                                                    <div class="nassar rounded-top p-3">
                                                        <button type="button" class="btn-wts-icon"
                                                            style="background-color: transparent;"
                                                            data-bs-toggle="modal" data-bs-target="#myModalimage"
                                                            (click)="setFileType('image')">
                                                            <i
                                                                class="fa-regular fa-file fs-default-icon text-green"></i>
                                                            &nbsp;&nbsp;<span class="text-black">Image</span></button>
                                                    </div>
                                                </div>
                                                <div *ngFor="let data of whatsappmessage_list; let i=index;">
                                                    <button title="Attach Files" type="button" id="notification"
                                                        class="btn btn-icon btn-sm btn-attach me-2"
                                                        (click)="attachments()" *ngIf="i === 0">
                                                        <i class="fas fa-paperclip fw-bolder fs-3"></i>
                                                    </button>
                                                </div>
                                            </div>



                                            <div *ngFor="let data of whatsapp_list; let i=index;">
                                                <button title="Attach Templates" type="button"
                                                    class="btn btn-icon btn-sm bg-temp me-2" data-kt-element="template"
                                                    data-bs-target="#template" data-bs-toggle="modal"
                                                    (click)="poptemplatemodal(data.value)" *ngIf="i === 0">
                                                    <i class="fas fa-plus fw-bolder fs-3"></i>
                                                </button>
                                            </div>

                                            <input formControlName="sendtext" type="text" style="width:60%;" class="
                                        form-control form-control-lg form-control-solid
                                        custom-input
                                        mb-1 mb-lg-0
                                        bg-white
                                        custom-input
                                      " placeholder="Type a message" name="sendtext" />&nbsp;&nbsp;&nbsp;&nbsp;

                                            <div *ngFor="let data of whatsappmessage_list; let i=index;">
                                                <button title="Send" type="button" [value]="data.identifierValue"
                                                    class="btn btn-icon btn-sm bg-skyblue me-5"
                                                    (click)="onMessagesent(data.identifierValue, data.contact_id)"
                                                    *ngIf="i === 0">
                                                    <i class="fas fa-paper-plane fs-3"></i>
                                                </button>
                                            </div>


                                        </div>
                                    </div>
                                </form>
                                <!------Message chat footer------->
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
        <ng-container *ngIf="mail_service ==='Gmail'">
            <div class="col-lg-4 col-md-4 col-sm-4">
                <div class="card border">
                    <div class="card-header "
                        style="background: rgb(81,183,204);
        background: linear-gradient(90deg, rgba(81,183,204,1) 0%, rgba(173,221,211,1) 35%, rgba(209,242,255,1) 100%);color:black;font-size: 14px;align-items: center;margin: 2px;">
                        <b>Mail</b>
                        <div class="d-flex ms-auto">
                            <button type="button" class=" btn btn-sm text-white me-4  "
                                style="background-color: #097495;" (click)="Mail_routesgmail()" title="Compose Mail">
                                <span style="font-size: 10px;"><b><i class="fas fa-plus"></i> &nbsp;Compose
                                        Mail</b></span>
                            </button>
                        </div>
                        <button class="btn dropdown-toggle fs-1" type="button" data-bs-toggle="collapse"
                            data-bs-target="#collapseFourth" aria-expanded="true"
                            aria-controls="collapseFourth"></button>
                    </div>
                    <div id="collapseFourth" class="collapse show" data-bs-parent="#accordionExample4">
                        <ng-container *ngIf="mailopen">
                            <div class="table-responsive" style="height: 400px ;">
                                <div class="card card-body m-3  p-3 mb-5 bg-white rounded ">
                                    <table id="mailsummary_list"
                                        class="table table-striped table-row-bordered gy-5 gs-7 ">
                                        <thead>
                                            <tr class="fw-bold fs-6 text-nowrap  text-white text-blue bg-lightblue">
                                                <th>Subject </th>
                                                <th class="text-center">Body</th>
                                                <th>Sent Date</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr *ngFor="let data of gmailmailsummary_list; let i=index;">
                                                <td>
                                                    <div class="text-gray-900 gap-1 limited-line">
                                                        <span class="fw-bold ">{{data.mail_subject}}</span>
                                                    </div>
                                                </td>
                                                <td class="text-center text-nowrap">
                                                    <label title="Mail Content" data-bs-toggle="modal"
                                                        data-bs-target="#myModalbodymail"
                                                        (click)="popmodal(data.mail_body,data.mail_subject)">
                                                        <i class="fas fa-question-circle fa-5x text-primary fs-2"></i>
                                                    </label>
                                                </td>
                                                <td>
                                                    <span class="fw-semibold ">{{data.sent_date}}</span>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </ng-container>

                    </div>
                </div>
            </div>
        </ng-container>
        <ng-container *ngIf="mail_service ==='Outlook'">
            <div class="col-lg-4 col-md-4 col-sm-4">
                <div class="card border">
                    <div class="card-header "
                        style="background: rgb(81,183,204);
        background: linear-gradient(90deg, rgba(81,183,204,1) 0%, rgba(173,221,211,1) 35%, rgba(209,242,255,1) 100%);color:black;font-size: 14px;align-items: center;margin: 2px;">
                        <b>Mail</b>
                        <div class="d-flex ms-auto">
                            <button type="button" class=" btn btn-sm text-white me-4  "
                                style="background-color: #097495;" (click)="Mail_routesoutlook()" title="Compose Mail">
                                <span style="font-size: 10px;"><b><i class="fas fa-plus"></i> &nbsp;Compose
                                        Mail</b></span>
                            </button>
                        </div>
                        <button class="btn dropdown-toggle fs-1" type="button" data-bs-toggle="collapse"
                            data-bs-target="#collapseFourth" aria-expanded="true"
                            aria-controls="collapseFourth"></button>
                    </div>
                    <div id="collapseFourth" class="collapse show" data-bs-parent="#accordionExample4">
                        <ng-container *ngIf="mailopen">
                            <div class="table-responsive" style="height: 400px ;">
                                <div class="card card-body m-3  p-3 mb-5 bg-white rounded ">
                                    <table id="mailsummary_list"
                                        class="table table-striped table-row-bordered gy-5 gs-7 ">
                                        <thead>
                                            <tr class="fw-bold fs-6 text-nowrap  text-white text-blue bg-lightblue">
                                                <th>Subject </th>
                                                <th class="text-center">Body</th>
                                                <th>Sent Date</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr *ngFor="let data of outlookmailsummary_list; let i=index;">
                                                <td>
                                                    <div class="text-gray-900 gap-1 limited-line">
                                                        <span class="fw-bold ">{{data.mail_subject}}</span>
                                                    </div>
                                                </td>
                                                <td class="text-center text-nowrap">
                                                    <label title="Mail Content" data-bs-toggle="modal"
                                                        data-bs-target="#myModalbodyoutlookmail"
                                                        (click)="popmodal1(data.mail_body,data.mail_subject)">
                                                        <i class="fas fa-question-circle fa-5x text-primary fs-2"></i>
                                                    </label>
                                                </td>
                                                <td>
                                                    <span class="fw-semibold ">{{data.sent_date}}</span>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </ng-container>

                    </div>
                </div>
            </div>
        </ng-container>
        <ng-container *ngIf="mail_service ==='Sparkpost'">
            <div class="col-lg-4 col-md-4 col-sm-4">
                <div class="card border">
                    <div class="card-header "
                        style="background: rgb(81,183,204);
        background: linear-gradient(90deg, rgba(81,183,204,1) 0%, rgba(173,221,211,1) 35%, rgba(209,242,255,1) 100%);color:black;font-size: 14px;align-items: center;margin: 2px;">
                        <b>Mail</b>
                        <div class="d-flex ms-auto">
                            <button type="button" class=" btn btn-sm text-white me-4  "
                                style="background-color: #097495;" title="Compose Mail">
                                <span style="font-size: 10px;"><b><i class="fas fa-plus"></i> &nbsp;Compose
                                        Mail</b></span>
                            </button>
                        </div>
                        <button class="btn dropdown-toggle fs-1" type="button" data-bs-toggle="collapse"
                            data-bs-target="#collapseFourth" aria-expanded="true"
                            aria-controls="collapseFourth"></button>
                    </div>
                    <div id="collapseFourth" class="collapse show" data-bs-parent="#accordionExample4">
                        <ng-container *ngIf="mailopen">
                            <div class="table-responsive" style="height: 400px ;">
                                <div class="card card-body m-3  p-3 mb-5 bg-white rounded ">
                                    <table id="mailsummary_list"
                                        class="table table-striped table-row-bordered gy-5 gs-7 ">
                                        <thead>
                                            <tr class="fw-bold fs-6 text-nowrap  text-white text-blue bg-lightblue">
                                                <th>Mail Details </th>
                                                <th>Mail Status</th>
                                                <th>Last Updated</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr *ngFor="let data of mailsummary_list; let i=index;" class="hover">
                                                <td>
                                                    <div class="text-gray-900 gap-1 limited-line">
                                                        <span class="fw-bold ">{{data.subject}}</span>
                                                    </div>
                                                </td>
                                                <td>
                                                    <div class=" text-gray-900 " style="width: 90px;">
                                                        <span *ngIf="data.direction === 'incoming' "><label class="ms-3"
                                                                class="badge bg-primary text-white ">Received</label></span>
                                                        <span><label class="ms-3"
                                                                class="badge bg-info text-white ">Delivered</label></span>
                                                        <br>
                                                        <span *ngIf="data.status_open === 'open'" class="ms-3"
                                                            class="badge bg-success text-white ">Viewed</span>
                                                    </div>
                                                </td>
                                                <td>
                                                    <span class="fw-semibold ">{{data.dates}}</span>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </ng-container>

                    </div>
                </div>
            </div>
        </ng-container>
        <ng-container *ngIf="mail_service === ''">
            <div class="col-lg-4 col-md-4 col-sm-4">
                <div class="card border">
                    <div class="card-header text-center"
                        style="background: rgb(81,183,204); background: linear-gradient(90deg, rgba(81,183,204,1) 0%, rgba(173,221,211,1) 35%, rgba(209,242,255,1) 100%); color: black; font-size: 14px; align-items: center; margin: 2px;">
                        <b>Mail</b>
                        <button class="btn dropdown-toggle fs-1" type="button" data-bs-toggle="collapse"
                            data-bs-target="#collapseFourth" aria-expanded="true"
                            aria-controls="collapseFourth"></button>
                    </div>
                    <div id="collapseFourth" class="collapse show" data-bs-parent="#accordionExample4"
                        style="flex-grow: 1;">
                        <div class="card-body text-center d-flex flex-column justify-content-center align-items-center "
                            style="color: white; height: 400px;">
                            <span
                                style="font-size: 18px; padding: 20px; background-color: rgb(118, 189, 212); color: white; border-radius: 8px;">
                                Please Enable Email Service !!!
                            </span>
                        </div>
                    </div>
                </div>
            </div>
            <style>
                .animated-message {
                    animation: slideUpDown 2s ease-in-out infinite;
                    /* Repeating up and down motion */
                }

                @keyframes slideUpDown {
                    0% {
                        transform: translateY(0);
                        /* Start at the original position */
                    }

                    50% {
                        transform: translateY(-20px);
                        /* Move 20px up */
                    }

                    100% {
                        transform: translateY(0);
                        /* Return to the original position */
                    }
                }
            </style>
        </ng-container>
        <div class="col-lg-4 col-md-4 col-sm-4">
            <div class="card border">
                <div class="card-header "
                    style="background: rgb(81,183,204);
        background: linear-gradient(90deg, rgba(81,183,204,1) 0%, rgba(173,221,211,1) 35%, rgba(209,242,255,1) 100%);color:black;font-size: 14px;align-items: center;margin: 2px;">
                    <b>Notes</b>
                    <button class="btn dropdown-toggle fs-1" type="button" data-bs-toggle="collapse"
                        data-bs-target="#collapsesix" aria-expanded="true" aria-controls="collapsesix"></button>
                </div>
                <div id="collapsesix" class="collapse show" data-bs-parent="#accordionExample6"
                    style="overflow: hidden;">
                    <div class="card notes" style="height: 400px ;">
                        <div class="row m-2 d-flex justify-content-between align-items-center mb-0 mt-3">
                            <input type="text" [(ngModel)]="searchTextnotes"
                                class="form-control form-control-lg form-control-solid custom-input bg-white custom-input borderc-secondary"
                                placeholder="Search Notes" />
                        </div>
                        <hr style="color: #5e5e5e;">
                        <form [formGroup]="NotesreactiveForm" #form="ngForm">
                            <div class="p-3 pt-0">
                                <div class="card p-3 mt-2" style="box-shadow: rgba(0, 0, 0, 0.24) 0px 0px 2px;">
                                    <div class="row">
                                        <div class="col-lg-11"><span class="fs-2 fw-bold">Add Notes</span></div>
                                        <div class="col-lg-1"><i class="fa-solid fa-check fs-1 ms-auto cursor-pointer"
                                                (click)="Addnotes()" style="color: #00e91f;"></i>
                                        </div>
                                    </div>
                                    <hr class="mt-0">
                                    <textarea class="form-control angular-editor border-0 mt-1" rows="4"
                                        formControlName="internalnotestext_area"
                                        placeholder="Type Something..."></textarea>
                                </div>
                            </div>
                        </form>
                        <div style="overflow: auto;max-height: 250px;" class="p-3">
                            <div class="card p-3 border mt-3" [hidden]="!matchesSearchnotes(data)"
                                *ngFor="let data of internalnotes; let i = index">
                                <div class="ms-auto d-flex">
                                    <i class="fa-solid fa-pencil fs-3 cursor-pointer me-3" (click)="updatenotes(data)"
                                        style="color: #636363;"></i>
                                    <i class="fa-solid fa-trash fs-3 cursor-pointer ms-3" (click)="deletenotes(data)"
                                        style="color: #636363;"></i>
                                </div>
                                <textarea class="form-control border-0 angular-editor"
                                    style="background-color: transparent;overflow: hidden;"
                                    [(ngModel)]="data.internal_notes" rows="3">
                        </textarea>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row m-1">
        <div class="col-lg-4 col-md-4 col-sm-4">
            <div class="card border ">
                <div class="card-header  "
                    style="background: rgb(81,183,204);
             background: linear-gradient(90deg, rgba(81,183,204,1) 0%, rgba(173,221,211,1) 35%, rgba(209,242,255,1) 100%);color:black;font-size: 14px;align-items: center;margin: 2px;">
                    <b>Enquiry</b>
                    <div *ngFor="let leadbasicdetailslist1 of leadbasicdetailslist" class="d-flex ms-auto">
                        <ng-container>
                            <button type="button" class="btn btn-sm text-white me-4" style="background-color: #097495;"
                                (click)="raiseenquiry()" title="Raise Enquiry">
                                <span style="font-size: 11px;"><i class="fas fa-plus"></i> &nbsp;<b>Raise
                                        Enquiry</b></span>
                            </button>
                        </ng-container>
                        <!-- <ng-container *ngIf="leadbasicdetailslist1.customer_gid ===''">
                            <button type="button" class="btn btn-sm text-white me-4" style="background-color: #097495;"
                                title="Raise Enquiry" data-bs-toggle="modal"
                                (click)="openmodaleditcustomer(leadbasicdetailslist1.leadbank_gid,'Enquiry')"
                                data-bs-target="#myModaladdtocustomer">
                                <span style="font-size: 11px;"><i class="fas fa-plus"></i> &nbsp;<b>Raise
                                        Enquiry</b></span>
                            </button>
                        </ng-container> -->
                    </div>
                    <button class="btn dropdown-toggle fs-1" type="button" data-bs-toggle="collapse"
                        data-bs-target="#collapseTen" aria-expanded="true" aria-controls="collapseTen   "></button>
                </div>
                <div id="collapseTen" data-bs-parent="#accordionExample10" style="overflow-x: hidden;">
                    <div class="row" style="height: 300px">
                        <div class="table-responsive">
                            <div class="card card-body m-3  p-3 mb-5 bg-white rounded "
                                style=" max-height: 270px; overflow-y: auto;overflow-x: hidden;">
                                <div *ngFor="let data of Enquirylist;">
                                    <div>
                                        <div class="row">
                                            <div class="col-lg-6 col-md-6 col-sm-6">
                                                <label><b>Enquiry Date</b></label>
                                                <br />
                                                <div>
                                                    <p>{{data.enquiry_date}}</p>
                                                </div>
                                            </div>
                                            <div class="col-lg-6 col-md-6 col-sm-6">
                                                <label><b>Enquiry Ref.No</b></label>
                                                <br />
                                                <div>
                                                    <p>{{data.enquiry_refno}}</p>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-lg-6 col-md-6 col-sm-6">
                                                <label><b>Assigned To</b></label>
                                                <br />
                                                <div>
                                                    <p>{{data.user_firstname}}</p>
                                                </div>
                                            </div>
                                            <div class="col-lg-6 col-md-6 col-sm-6">
                                                <label><b>Enquiry Status</b></label>
                                                <br />
                                                <div>
                                                    <p>{{data.enquiry_status}}</p>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-lg-6 col-md-6 col-sm-6 ">
                                                <div *ngFor="let leadbasicdetailslist1 of leadbasicdetailslist"
                                                    class="d-flex ms-auto">
                                                    <ng-container *ngIf="leadbasicdetailslist1.customer_gid !==''">
                                                        <h6 type="text" class="bg-white text-blue"
                                                            (click)="raise_enquirytoquotation()"
                                                            style="cursor: pointer;" title="Raise Quotation">
                                                            Raise Quotation
                                                        </h6>
                                                    </ng-container>
                                                    <ng-container *ngIf="leadbasicdetailslist1.customer_gid ===''">
                                                        <h6 type="text" class="bg-white text-blue"
                                                            data-bs-toggle="modal"
                                                            (click)="openmodaleditcustomer(leadbasicdetailslist1.leadbank_gid,'Quotation')"
                                                            data-bs-target="#myModaladdtocustomer"
                                                            style="cursor: pointer;" title="Raise Quotation">
                                                            Raise Quotation
                                                        </h6>
                                                    </ng-container>
                                                </div>
                                            </div>
                                            <div class="col-lg-6 col-md-6 col-sm-6 ">
                                                <div class="row d-flex align-items-center">
                                                    <div class="col-lg-6 col-md-6 col-sm-6 ">
                                                        <h6 type="text" class="bg-white text-blue"
                                                            (click)="viewenquiry(data.enquiry_gid)"
                                                            style="cursor: pointer;">View
                                                        </h6>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <hr />
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-4 col-md-4 col-sm-4 ">
            <div class="card border">
                <div class="card-header"
                    style="background: rgb(81,183,204);
    background: linear-gradient(90deg, rgba(81,183,204,1) 0%, rgba(173,221,211,1) 35%, rgba(209,242,255,1) 100%);color:black;font-size: 14px;align-items: center;margin: 2px;border: black;">
                    <b>Quotation</b>
                    <!-- <ng-container *ngIf="customer_gid === '' ">
                        <button type="button" class="btn btn-sm text-white me-4" style="background-color: #097495;"
                            data-bs-toggle="modal" data-bs-target="#myModalcustomerqotationmsg" title="Raise Quotation">
                            <span style="font-size: 11px;"><i class="fas fa-plus"></i> &nbsp;<b>Raise
                                    Quotation</b></span>
                        </button>
                    </ng-container> -->
                    <!-- <div class="d-flex ms-auto">
                        <button type="button" class="btn btn-sm text-white me-4" style="background-color: #097495;"
                            (click)="raisequotation()" title="Raise Quotation">
                            <span style="font-size: 11px;"><i class="fas fa-plus"></i> &nbsp;<b>Raise
                                    Quotation</b></span>
                        </button>
                    </div>
                    <button class="btn dropdown-toggle fs-1" type="button" data-bs-toggle="collapse"
                        data-bs-target="#collapseFive" aria-expanded="true" aria-controls="collapseFive"></button> -->
                    <div *ngFor="let leadbasicdetailslist1 of leadbasicdetailslist" class="d-flex ms-auto">
                        <ng-container *ngIf="leadbasicdetailslist1.customer_gid!==''">
                            <button type="button" class="btn btn-sm text-white me-4" style="background-color: #097495;"
                                (click)="raisequotation()" title="Quotation">
                                <span style="font-size: 11px;"><i class="fas fa-plus"></i> &nbsp;<b>
                                        Quotation</b></span>
                            </button>
                        </ng-container>
                        <ng-container *ngIf="leadbasicdetailslist1.customer_gid ===''">
                            <button type="button" class="btn btn-sm text-white me-4" style="background-color: #097495;"
                                title="Quotation" data-bs-toggle="modal"
                                (click)="openmodaleditcustomer(leadbasicdetailslist1.leadbank_gid,'Quotation')"
                                data-bs-target="#myModaladdtocustomer">
                                <span style="font-size: 11px;"><i class="fas fa-plus"></i> &nbsp;<b>
                                        Quotation</b></span>
                            </button>
                        </ng-container>
                    </div>
                    <button class="btn dropdown-toggle fs-1" type="button" data-bs-toggle="collapse"
                        data-bs-target="#collapseFive" aria-expanded="true" aria-controls="collapseFive"></button>
                </div>
                <div id="collapseFive" class="collapse show" data-bs-parent="#accordionExample5"
                    style="overflow-x: hidden;">
                    <div class="row " style="height: 300px">
                        <div class="table-responsive">
                            <div class="card card-body m-3  p-3 mb-5 bg-white rounded "
                                style="height: 270px; overflow-y: auto;overflow-x: hidden;">
                                <div *ngFor="let data of leadquotationdetails_list;">
                                    <div>
                                        <div class="row">
                                            <div class="col-lg-6 col-md-6 col-sm-6">
                                                <label><b>Quotation Date</b></label>
                                                <br />
                                                <div>
                                                    <p>{{data.quotation_date}}</p>
                                                </div>
                                            </div>
                                            <div class="col-lg-6 col-md-6 col-sm-6">
                                                <label><b>Quotation Ref.No</b></label>
                                                <br />
                                                <div>
                                                    <p>{{data.quotation_referenceno1}}</p>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <!-- <div class="col-lg-6 col-md-6 col-sm-6">
                                                <label><b>Contact Details</b></label>
                                                <br />
                                                <div>
                                                    <p>{{data.customer_contact_person}}</p>
                                                </div>
                                            </div> -->
                                            <div class="col-lg-6 col-md-6 col-sm-6">
                                                <label><b>Quotation Status</b></label>
                                                <br />
                                                <div>
                                                    <p>{{data.quotation_status}}</p>
                                                </div>
                                            </div>
                                            <div class="col-lg-3 col-md-3 col-sm-3">
                                                <label><b>Amount</b></label>
                                                <br />
                                                <div>
                                                    <p>{{data.Grandtotal}}</p>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row d-flex align-items-center">
                                            <!-- <div class="col-lg-6 col-md-6 col-sm-6 ">
                                                <h6 type="text" class="bg-white text-blue"
                                                    (click)="onraiseorders(data.quotation_gid)"
                                                    style="cursor: pointer;">
                                                    Raise Order
                                                </h6>
                                            </div> -->
                                            <div class="col-lg-6 col-md-6 col-sm-6 ">
                                                <div *ngFor="let leadbasicdetailslist1 of leadbasicdetailslist"
                                                    class="d-flex ms-auto">
                                                    <ng-container *ngIf="leadbasicdetailslist1.customer_gid !==''">
                                                        <h6 type="text" class="bg-white text-blue"
                                                            (click)="raise_quotationtoorder(data.quotation_gid)"
                                                            style="cursor: pointer;">
                                                            Raise Order
                                                        </h6>
                                                    </ng-container>
                                                    <!-- <ng-container *ngIf="leadbasicdetailslist1.customer_gid ===''">
                                                        <h6 type="text" class="bg-white text-blue"
                                                            data-bs-toggle="modal"
                                                            (click)="openmodaleditcustomer(leadbasicdetailslist1.leadbank_gid,'Order')"
                                                            data-bs-target="#myModaladdtocustomer"
                                                            style="cursor: pointer;" title=" Raise Order">
                                                            Raise Order
                                                        </h6>
                                                    </ng-container> -->
                                                </div>
                                            </div>
                                            <div class="col-lg-6 col-md-6 col-sm-6 ">
                                                <div class="row d-flex align-items-center">
                                                    <div class="col-lg-6 col-md-6 col-sm-6 ">
                                                        <h6 type="text" class="bg-white text-blue"
                                                            (click)="viewquotation(data.quotation_gid,data.customer_gid)"
                                                            style="cursor: pointer;">View
                                                        </h6>
                                                    </div>
                                                    <div class="col-lg-6 col-md-6 col-sm-6">
                                                        <button title="PDF" type="button"
                                                            class="btn btn-icon btn-sm background-color6"
                                                            (click)="quotation_pdf(data.quotation_gid)">
                                                            <span class="fa-solid fa-file-pdf fs-3"
                                                                style="color: #ffffff;"></span>
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <hr />
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-4 col-md-4 col-sm-4">
            <div class="card border">
                <div class="card-header "
                    style="background: rgb(81,183,204);
        background: linear-gradient(90deg, rgba(81,183,204,1) 0%, rgba(173,221,211,1) 35%, rgba(209,242,255,1) 100%);color:black;font-size: 14px;align-items: center;margin: 2px;">
                    <b>Order</b>
                    <!-- <div *ngFor="let leadbasicdetailslist1 of leadbasicdetailslist" class="d-flex ms-auto">
                    <ng-container *ngIf="leadbasicdetailslist1.customer_gid === '' ">
                        <button type="button" class="btn btn-sm text-white me-4" style="background-color: #097495;"
                            data-bs-toggle="modal" data-bs-target="#myModalcustomerordermsg" title="Raise Order">
                            <span style="font-size: 11px;"><i class="fas fa-plus"></i> &nbsp;<b>Raise Order</b></span>
                        </button>
                    </ng-container>
                    <ng-container *ngIf="leadbasicdetailslist1.customer_gid !== '' "> -->

                    <!-- <div class="d-flex ms-auto">
                        <button type="button" class="btn btn-sm text-white me-4" style="background-color: #097495;"
                            (click)="raiseorder()" title="Raise Order">
                            <span style="font-size: 11px;"><i class="fas fa-plus"></i> &nbsp;<b>Raise
                                    Order</b></span>
                        </button>
                    </div> -->
                    <div *ngFor="let leadbasicdetailslist1 of leadbasicdetailslist" class="d-flex ms-auto">
                        <ng-container *ngIf="leadbasicdetailslist1.customer_gid!==''">
                            <button type="button" class="btn btn-sm text-white me-4" style="background-color: #097495;"
                                (click)="raiseorder()" title="Order">
                                <span style="font-size: 11px;"><i class="fas fa-plus"></i> &nbsp;<b>
                                        Order</b></span>
                            </button>
                        </ng-container>
                        <ng-container *ngIf="leadbasicdetailslist1.customer_gid ===''">
                            <button type="button" class="btn btn-sm text-white me-4" style="background-color: #097495;"
                                title="Order" data-bs-toggle="modal"
                                (click)="openmodaleditcustomer(leadbasicdetailslist1.leadbank_gid,'Order')"
                                data-bs-target="#myModaladdtocustomer">
                                <span style="font-size: 11px;"><i class="fas fa-plus"></i> &nbsp;<b>
                                        Order</b></span>
                            </button>
                        </ng-container>
                    </div>
                    <button class="btn dropdown-toggle fs-1" type="button" data-bs-toggle="collapse"
                        data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne   "></button>

                </div>
                <div id="collapseOne" class="collapse show" data-bs-parent="#accordionExample"
                    style="overflow-x: hidden;">
                    <div class="row" style="height: 300px">
                        <div class="table-responsive">
                            <div class="card card-body m-3  p-3 mb-5 bg-white rounded "
                                style=" max-height: 270px; overflow-y: auto;overflow-x: hidden;">
                                <div *ngFor="let data of leadorderdetails_list;">
                                    <div class="row">
                                        <div class="col-lg-6 col-md-6 col-sm-6">
                                            <label><b>Raised On</b></label>
                                            <br />
                                            <div>
                                                <p>{{data.salesorder_date}}</p>
                                            </div>
                                        </div>
                                        <div class="col-lg-6 col-md-6 col-sm-6">
                                            <label><b>Order Ref.No</b></label>
                                            <br />
                                            <div>
                                                <p>{{data.so_referenceno1}}</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-lg-6 col-md-6 col-sm-6">
                                            <label><b>Order Status</b></label>
                                            <br />
                                            <div>
                                                <p>{{data.salesorder_status}}</p>
                                            </div>
                                        </div>
                                        <div class="col-lg-3 col-md-3 col-sm-3">
                                            <label><b>Amount</b></label>
                                            <br />
                                            <div>
                                                <p>{{data.Grandtotal}}</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-lg-6 col-md-6 col-sm-6">
                                            <!-- <h6 type="text" class="bg-white text-blue"
                                                (click)="RaisetoOrder(data.salesorder_gid)" style="cursor: pointer;">
                                                Raise Invoice
                                            </h6> -->
                                            <div *ngFor="let leadbasicdetailslist1 of leadbasicdetailslist"
                                                class="d-flex ms-auto">
                                                <ng-container *ngIf="leadbasicdetailslist1.customer_gid !==''">
                                                    <h6 type="text" class="bg-white text-blue"
                                                        (click)="raise_ordertoinvoice(data.salesorder_gid)"
                                                        style="cursor: pointer;">
                                                        Raise Invoice
                                                    </h6>
                                                </ng-container>
                                                <!-- <ng-container *ngIf="leadbasicdetailslist1.customer_gid ===''">
                                                    <h6 type="text" class="bg-white text-blue" data-bs-toggle="modal"
                                                        (click)="openmodaleditcustomer(leadbasicdetailslist1.leadbank_gid,'Invoice')"
                                                        data-bs-target="#myModaladdtocustomer" style="cursor: pointer;"
                                                        title="Raise Invoice">
                                                        Raise Invoice
                                                    </h6>
                                                </ng-container> -->
                                            </div>
                                        </div>
                                        <div class="col-lg-6 col-md-6 col-sm-6">
                                            <h6 type="text" class="bg-white text-blue"
                                                (click)="vieworder(data.salesorder_gid,data.customer_gid)"
                                                style="cursor: pointer;">
                                                View
                                            </h6>
                                        </div>
                                    </div>
                                    <hr />
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row m-1">
        <div class="col-lg-4 col-md-4 col-sm-4">
            <div class="card border">
                <div class="card-header "
                    style="background: rgb(81,183,204);
    background: linear-gradient(90deg, rgba(81,183,204,1) 0%, rgba(173,221,211,1) 35%, rgba(209,242,255,1) 100%);color:black;font-size: 14px;align-items: center;margin: 2px;">
                    <b>Invoice</b>
                    <!-- <div *ngFor="let leadbasicdetailslist1 of leadbasicdetailslist" class="d-flex ms-auto">
                    <ng-container *ngIf="leadbasicdetailslist1.customer_gid === '' ">
                        <button type="button" class="btn btn-sm text-white me-4" style="background-color: #097495;"
                            data-bs-toggle="modal" data-bs-target="#myModalcustomerinvoicemsg" title="Raise Invoice">
                            <span style="font-size: 11px;"><i class="fas fa-plus"></i> &nbsp;<b>Raise Invoice</b></span>
                        </button>
                    </ng-container>
                    <ng-container *ngIf="leadbasicdetailslist1.customer_gid !== '' "> -->

                    <!-- <div class="d-flex ms-auto">
                        <button type="button" class="btn btn-sm text-white me-4" (click)="raiseinvoice()"
                            style="background-color: #097495;" title="Raise Invoice">
                            <span style="font-size: 11px;"><i class="fas fa-plus"></i> &nbsp;<b>Raise
                                    Invoice</b></span>
                        </button>
                    </div> -->
                    <div *ngFor="let leadbasicdetailslist1 of leadbasicdetailslist" class="d-flex ms-auto">
                        <ng-container *ngIf="leadbasicdetailslist1.customer_gid!==''">
                            <button type="button" class="btn btn-sm text-white me-4" (click)="raiseinvoice()"
                                style="background-color: #097495;" title="Invoice">
                                <span style="font-size: 11px;"><i class="fas fa-plus"></i> &nbsp;<b>
                                        Invoice</b></span>
                            </button>
                        </ng-container>
                        <ng-container *ngIf="leadbasicdetailslist1.customer_gid ===''">
                            <button type="button" class="btn btn-sm text-white me-4" style="background-color: #097495;"
                                title="Invoice" data-bs-toggle="modal"
                                (click)="openmodaleditcustomer(leadbasicdetailslist1.leadbank_gid,'Invoice')"
                                data-bs-target="#myModaladdtocustomer">
                                <span style="font-size: 11px;"><i class="fas fa-plus"></i> &nbsp;<b>
                                        Invoice</b></span>
                            </button>
                        </ng-container>
                    </div>
                    <button class="btn dropdown-toggle fs-1" type="button" data-bs-toggle="collapse"
                        data-bs-target="#collapseTwo" aria-expanded="true" aria-controls="collapseTwo   ">
                    </button>
                </div>
                <div id="collapseTwo" class="collapse show" data-bs-parent="#accordionExample2"
                    style="overflow-x: hidden;">
                    <div class="row" style="height: 300px">
                        <div class="table-responsive">
                            <div class="card card-body m-3  p-3 mb-5 bg-white rounded "
                                style=" max-height: 270px; overflow-y: auto;overflow-x: hidden;">
                                <div *ngFor="let data of leadinvoicedetails_list;">
                                    <div>
                                        <div class="row">
                                            <div class="col-lg-6 col-md-6 col-sm-6">
                                                <label><b>SO Ref.No</b></label>
                                                <br />
                                                <div>
                                                    <p>{{data.so_referencenumber}}</p>
                                                </div>
                                            </div>
                                            <div class="col-lg-6 col-md-6 col-sm-6">
                                                <label><b>Invoice Date</b></label>
                                                <br />
                                                <div>
                                                    <p>{{data.invoice_date}}</p>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-lg-6 col-md-6 col-sm-6">
                                                <label><b>Invoice Ref.No</b></label>
                                                <br />
                                                <div>
                                                    <p>{{data.invoice_refno}}</p>
                                                </div>
                                            </div>
                                            <div class="col-lg-6 col-md-6 col-sm-6">
                                                <label><b>Invoice Status</b></label>
                                                <br />
                                                <div>
                                                    <p>{{data.invoice_status}}</p>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-lg-6 col-md-6 col-sm-6">
                                                <label><b>Mail Status</b></label>
                                                <br />
                                                <div>
                                                    <p>{{data.mail_status}}</p>
                                                </div>
                                            </div>
                                            <div class="col-lg-4 col-md-4 col-sm-4">
                                                <label><b>Invoice Amount</b></label>
                                                <br />
                                                <div>
                                                    <p>{{data.invoice_amount}}</p>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row  d-flex align-items-center">
                                            <div class="col-lg-6 col-md-6 col-sm-6 "></div>
                                            <div class="col-lg-6 col-md-6 col-sm-6 ">
                                                <div class="row d-flex align-items-center">
                                                    <div class="col-lg-6 col-md-6 col-sm-6">
                                                        <h6 type="text" class="bg-white text-blue"
                                                            (click)="viewinvoice(data.invoice_gid)"
                                                            style="cursor: pointer;">
                                                            View
                                                        </h6>
                                                    </div>
                                                    <div class="col-lg-6 col-md-6 col-sm-6">
                                                        <button title="PDF" type="button"
                                                            class="btn btn-icon btn-sm background-color6 me-2 mb-2"
                                                            (click)="invoice_pdf(data.invoice_gid)">
                                                            <span class="fa-solid fa-file-pdf fs-3"
                                                                style="color: #ffffff;"></span>
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <hr />
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-4 col-md-4 col-sm-4">
            <div class="card border">
                <div class="card-header "
                    style="background: rgb(81,183,204);
    background: linear-gradient(90deg, rgba(81,183,204,1) 0%, rgba(173,221,211,1) 35%, rgba(209,242,255,1) 100%);color:black;font-size: 14px;align-items: center;margin: 2px;">
                    <b>Documents</b>
                    <div class="d-flex ms-auto">
                        <button type="button" class="btn btn-sm text-white me-4" data-bs-toggle="modal"
                            style="background-color: #097495;" data-bs-target="#myModalUpdateimage"
                            title="Upload image">
                            <i class="fa-solid fa-upload"></i> &nbsp; <b>Upload</b>
                        </button>
                    </div>
                    <button class="btn dropdown-toggle fs-1" type="button" data-bs-toggle="collapse"
                        data-bs-target="#collapseseven" aria-expanded="true" aria-controls="collapseseven"></button>
                </div>
                <div id="collapseseven" class="collapse show" data-bs-parent="#accordionExample7"
                    style="overflow-x: hidden;">
                    <div class="row" style="height: 300px">
                        <div class="table-responsive">
                            <div class="card card-body m-3  p-3 mb-5 bg-white rounded "
                                style=" max-height: 270px; overflow-y: auto;overflow-x: hidden;">
                                <div *ngFor="let doctitlelist of leaddocumentdetail_list;">
                                    <div>
                                        <div class="row">
                                            <div class="col-lg-4 col-md-8 col-sm-8">
                                                <label><b>Document Title</b></label>
                                                <br />
                                                <div>
                                                    <p>{{doctitlelist.document_title}}</p>
                                                </div>
                                            </div>
                                            <div class="col-lg-4 col-md-4 col-sm-4">
                                                <label><b>Uploaded Date</b></label>
                                                <br />
                                                <div>
                                                    <p>{{doctitlelist.created_date}}</p>
                                                </div>
                                            </div>
                                            <div class="col-lg-4 col-md-2 col-sm-2">
                                                <div class="row">
                                                    <button title="View" type="button"
                                                        class="btn btn-icon btn-sm bg-view me-2"
                                                        (click)="ViewUploadDoc(doctitlelist.document_upload,doctitlelist.document_title)">
                                                        <span class="fa-solid fa-eye text-white  fs-6"></span></button>
                                                    &nbsp;
                                                    <button title="Download" type="button"
                                                        class="btn btn-icon btn-sm bg-views me-2"
                                                        (click)="downloadFile(doctitlelist.document_upload,doctitlelist.document_title)">
                                                        <span class="fa-solid fa-download text-white fs-4"></span>
                                                    </button>&nbsp;
                                                    <button title="Delete" type="button" data-bs-toggle="modal"
                                                        data-bs-target="#myModaldelete"
                                                        (click)="openModaldelete(doctitlelist.document_gid)"
                                                        class="btn btn-icon btn-sm bg-danger me-2"><span
                                                            class="fa-solid fa-trash text-white  fs-6"></span></button>

                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-lg-12 col-md-12 col-sm-12">
                                                <label><b>Remarks</b></label>
                                                <br />
                                                <div>
                                                    <p>{{doctitlelist.remarks}}</p>
                                                </div>
                                            </div>
                                        </div><br>

                                    </div>
                                    <hr />
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-4 col-md-4 col-sm-4">
            <div class="card border">
                <div class="card-header "
                    style="background: rgb(81,183,204);
background: linear-gradient(90deg, rgba(81,183,204,1) 0%, rgba(173,221,211,1) 35%, rgba(209,242,255,1) 100%);color:black;font-size: 14px;align-items: center;margin: 2px;">
                    <b>Schedule Lead</b>
                    <button class="btn dropdown-toggle fs-1" type="button" data-bs-toggle="collapse"
                        data-bs-target="#collapseeight" aria-expanded="true" aria-controls="collapseeight"></button>

                </div>
                <div id="collapseeight" class="collapse show" data-bs-parent="#accordionExample8"
                    style="overflow-x: hidden;">
                    <div class="row" style="height: 300px">
                        <div class="table-responsive">
                            <div class="card card-body m-3  p-3 mb-5 bg-white rounded "
                                style=" max-height: 270px; overflow-y: auto;overflow-x: hidden;">
                                <tabset>
                                    <tab heading="Schedule">
                                        <form [formGroup]="reactiveFormfollow" #form="ngForm">
                                            <div class="row">
                                                <div class="col-lg-4 col-md-4 col-sm-4 fv-row mt-2">
                                                    <span class="font-bold ms-2"><b>Schedule Date</b><span
                                                            class="ms-1 text-red">*</span></span>
                                                    <div class="col-xl-12 col-md-12 col-sm-12 fv-row mt-2 d-flex ms-2">
                                                        <input formControlName="schedule_date" type="date" class="
                                                     form-control form-control-lg form-control-solid
                                                     custom-input
                                                     mb-3 mb-lg-0
                                                     bg-white
                                                     custom-input date-picker borderc-secondary
                                                   " [ngStyle]="{
                                                     'border-color':
                                                     schedule_date.invalid && schedule_date.touched
                                                         ? 'red'
                                                         : 'rgb(209, 209, 209)'
                                                   }" placeholder="" pattern="^(?!\s*$).+" name="schedule_date"
                                                            required />
                                                    </div>

                                                    <div
                                                        *ngIf="schedule_date.invalid && (schedule_date.dirty || schedule_date.touched)">
                                                        <div *ngIf="schedule_date.errors?.['required']">
                                                            <span style="color:red;">Schedule Date Is
                                                                Required.</span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <br>

                                                <div class="col-lg-4 col-md-4 col-sm-4 fv-row mt-2">
                                                    <span class="font-bold"><b>Time</b><span
                                                            class="ms-1 text-red">*</span></span>
                                                    <div class="col-lg-12 col-md-12 col-sm-12 fv-row mt-2 d-flex ">
                                                        <input formControlName="schedule_time" type="time" class="
                                             form-control form-control-lg form-control-solid
                                             custom-input
                                             mb-3 mb-lg-0
                                             bg-white
                                             custom-input
                                           " [ngStyle]="{
                                             'border-color':
                                             schedule_time.invalid && schedule_time.touched? 
                                             'red'
                                                 : 'rgb(209, 209, 209)'
                                           }" placeholder="" pattern="^(?!\s*$).+" name="schedule_time" required />
                                                    </div>

                                                    <div
                                                        *ngIf="schedule_time.invalid && (schedule_time.dirty || schedule_time.touched)">
                                                        <div *ngIf="schedule_time.errors?.['required']">
                                                            <span style="color:red;">Schedule Time Is
                                                                Required.</span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-lg-4 col-md-4 col-sm-4 fv-row mt-2">
                                                    <span class="font-bold"><b>Type</b><span
                                                            style="color: red;">*</span></span>
                                                    <div>
                                                        <ng-select formControlName="schedule_type" style="width:99%;"
                                                            [items]="ScheduleType" required
                                                            class="custom col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2"
                                                            bindLabel="type" bindValue="type" [clearable]="false"
                                                            placeholder="--Select Type--"></ng-select>
                                                    </div>
                                                </div>
                                            </div>
                                            <br>
                                            <div class="row">

                                                <div class="col-lg-12 col-md-12 col-sm-12 fv-row mt-2">
                                                    <label for="exampleFormControlTextarea1" class="form-label ms-2"><b>
                                                            Remarks</b></label>
                                                    <br>
                                                    <textarea style="resize: none;width: 99%;" class="form-control ms-2"
                                                        formControlName="schedule_remarks" pattern="^(?!\s*$).+"
                                                        placeholder="Enter Schedule Remarks"
                                                        id="exampleFormControlTextarea1" rows="3"></textarea>
                                                </div>
                                            </div>
                                            <br>
                                            <div class="text-center my-2">
                                                <button (click)="schedule()" [disabled]="reactiveFormfollow.invalid"
                                                    [ngClass]="{
                                                                'primary-button': !reactiveFormfollow.invalid,
                                                                'secondary-button': reactiveFormfollow.invalid
                                                                 }" data-bs-dismiss="modal">
                                                    <i class="fas fa-check text-white fs-5 "></i> &nbsp;Schedule
                                                </button> &nbsp;&nbsp;
                                                <!-- <button (click)="onclose()" class="btn-danger btn-sm text-white me-4"
                                            data-bs-dismiss="modal">
                                            <i class="fas fa-close text-white"></i> &nbsp;Cancel
                                        </button> -->
                                            </div>
                                        </form>
                                    </tab>
                                    <tab heading="Opportunity Log">
                                        <div class="log-details-tab-content">
                                            <div class="col-12 col-lg-3 col-md-6 col-lg-12">
                                                <div
                                                    *ngFor="let schedule of Opportunityschedulesummary_list; let i = index">
                                                    <ng-container *ngIf="schedule.leadbank_gid === '' ">
                                                        <div class="text-center">
                                                            <h3> No Log Details Found </h3>
                                                        </div>
                                                    </ng-container>
                                                    <ng-container *ngIf="schedule.leadbank_gid !== '' ">
                                                        <span class="fw-bold" style="font-size: small;" *ngIf="i === 0">
                                                            <b>Opportunity Log Details
                                                            </b></span><br>
                                                        <div style="margin-bottom: 5px; padding: 5px; overflow-y: auto; max-height: 300px; overflow-x: hidden;"
                                                            class="panel bg-white">
                                                            {{schedule.log_legend}}
                                                            <div style="margin-bottom: 3px; margin-top: 2px;">
                                                                <div class="row">
                                                                    <div class="panel-body" style="font-size: x-small;">
                                                                        {{
                                                                        schedule.log_details }}</div>
                                                                </div>
                                                            </div>
                                                            <div style="margin-top: 2px;">
                                                                <span class="font-bold">Status : </span>
                                                                <span 
                                                                    class="badge" 
                                                                    [ngClass]="{
                                                                        'badge-success': schedule.schedule_status === 'Close', 
                                                                        'badge-warning': schedule.schedule_status === 'Pending', 
                                                                        'badge-secondary': schedule.schedule_status === 'Postponed'
                                                                    }"
                                                                    style="font-size: 10px; padding: 5px;">
                                                                    {{schedule.schedule_status}}
                                                                    <span *ngIf="schedule.schedule_status === 'Postponed'">
                                                                        - {{ schedule.postponed_date}}
                                                                    </span>
                                                                </span>
                                                            </div>
                                                            <!-- Add a horizontal line after each schedule log -->
                                                            <hr style="margin-top: 5px; margin-bottom: 5px;">
                                                        </div>
                                                    </ng-container>
                                                </div>
                                            </div>
                                        </div>
                                    </tab>
                                    <tab heading="Campaign Log">
                                        <div class="log-details-tab-content">
                                            <div class="col-12 col-lg-3 col-md-6 col-lg-12">
                                                <div *ngFor="let data of GetCallLogLead_list; let i = index">
                                                    <ng-container
                                                        *ngIf="!GetCallLogLead_list || GetCallLogLead_list.length ===null">
                                                        <div class="text-center">
                                                            <h3> No Log Details To Show </h3>
                                                        </div>
                                                    </ng-container>
                                                    <ng-container *ngIf="GetCallLogLead_list.length !== 0 ">
                                                        <div class="d-flex flex-column">
                                                            <div class="row">
                                                                <div class="col-12 col-lg-4 col-md-6 col-sm-12">
                                                                    <label><b>Name</b></label>
                                                                    <br />
                                                                    <div>
                                                                        <div
                                                                            *ngFor="let leadbasicdetailslist1 of leadbasicdetailslist">
                                                                            <p>{{leadbasicdetailslist1.leadbank_name}}
                                                                            </p>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="col-12 col-lg-4 col-md-6 col-sm-12">
                                                                    <label><b>Dial Number</b></label>
                                                                    <br />
                                                                    <div>
                                                                        <p>{{data.mobile_number}}</p>
                                                                    </div>
                                                                </div>
                                                                <div class="col-12 col-lg-4 col-md-6 col-sm-12">
                                                                    <label><b>Call Response</b></label>
                                                                    <br />
                                                                    <div>
                                                                        <p>{{data.call_response}}</p>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row">

                                                                <div class="col-12 col-lg-4 col-md-6 col-sm-12">
                                                                    <label><b>Prospective Percentage(%) To</b></label>
                                                                    <br />
                                                                    <div>
                                                                        <p>{{data.prospective_percentage}}</p>
                                                                    </div>
                                                                </div>
                                                                <div class="col-12 col-lg-4 col-md-6 col-sm-12">
                                                                    <label><b>Product Group</b></label>
                                                                    <br />
                                                                    <div>
                                                                        <p>{{data.productgroup_name}}</p>
                                                                    </div>
                                                                </div>
                                                                <div class="col-12 col-lg-4 col-md-6 col-sm-12">
                                                                    <label><b>Product Name</b></label>
                                                                    <br />
                                                                    <div>
                                                                        <p>{{data.product_name}}</p>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-12 col-lg-4 col-md-6 col-sm-12">
                                                                    <label><b>Created Date</b></label>
                                                                    <br />
                                                                    <div>
                                                                        <p>{{data.created_date}}</p>
                                                                    </div>
                                                                </div>
                                                                <div class="col-12 col-lg-4 col-md-6 col-sm-12">
                                                                    <label><b>Call Feedback</b></label>
                                                                    <br />
                                                                    <div>
                                                                        <p>{{data.remarks}}</p>
                                                                        <!-- <textarea type="text" readonly rows="5" class="
                                                                    form-control form-control-lg form-control-solid custom-input
                                                                    mb-3 mb-lg-0  borderc-secondary bg-white custom-input
                                                                  " placeholder="Product Description" 
                                                                        class="form-control"> {{data.remarks}}</textarea> -->
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <hr style="margin-top: 5px; margin-bottom: 5px;">
                                                        </div>
                                                    </ng-container>
                                                </div>
                                            </div>
                                        </div>
                                    </tab>
                                    <tab heading="Call Log">
                                        <div id="collapseFourth" class="accordion-collapse collapse show"
                                            data-bs-parent="#accordionExample4">
                                            <ng-container *ngIf="mailopen">
                                                <div class="accordion-body">
                                                    <div class="table-responsive" style="max-height: 392px;">
                                                        <div class="card card-body m-3  p-3 mb-5 bg-white rounded ">
                                                            <table id="mailsummary_list"
                                                                class="table table-striped table-row-bordered gy-5 gs-7 ">
                                                                <thead>
                                                                    <tr
                                                                        class="fw-bold fs-6 text-nowrap bg-lightblue text-blue">
                                                                        <th>S.No</th>
                                                                        <th>Station </th>
                                                                        <th>Direction</th>
                                                                        <th>Status</th>
                                                                        <th>Agent</th>
                                                                        <th>Duration</th>
                                                                        <th>Action</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    <tr *ngFor="let data of call_logreport; let i=index;"
                                                                        class="hover">

                                                                        <td>{{i+1}}</td>
                                                                        <td>{{data.station}}</td>
                                                                        <td>{{data.direction}}</td>
                                                                        <td>{{data.status}}</td>
                                                                        <td>{{data.agent}}</td>
                                                                        <td>{{data.duration}}</td>
                                                                        <td> <button title="Audio" type="button"
                                                                                [disabled]="data.call_status != 'ANSWERED'"
                                                                                data-bs-toggle="modal"
                                                                                data-bs-target="#myModalaudio1"
                                                                                (click)="getaudio(data.uniqueid)"
                                                                                class="btn btn-icon btn-sm bg-view bg-warning m-2">
                                                                                <span class="fa-solid fa-play"></span>
                                                                            </button></td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                </div>
                                            </ng-container>
                                        </div>
                                    </tab>
                                </tabset>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="text-center my-2">
            <div class="btn-group">
                <button type="button" class="btn-primary btn-sm text-white me-4" (click)="onback()"> <i
                        class="fas fa-arrow-left fs-5">
                    </i>&nbsp;Back</button>
            </div>
        </div>
    </div>
</div>

<!--360 popup starts-->
<form [formGroup]="reactiveForm" #form="ngForm">
    <div class="modal" id="mydropdown" data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog" style="max-width: 250px; max-height: 600px; margin-top: 100px;">
            <div class="modal-content">
                <div class="card-header p-1 pb-2 pt-1 rounded-top bg-white"
                    style="border-bottom: 1px solid rgb(173, 173, 173);">
                    <h2 style="margin-top:10px;color:rgb(3, 2, 2);font-weight: bold;">
                        &nbsp;&nbsp;Filter Options
                    </h2>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <span class="font-bold"><b>Status</b></span>
                        <ng-select style="width: 100%;" formControlName="moving_stage"
                            class="custom col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2" placeholder="Select option">
                            <ng-option value="1">New</ng-option>
                            <ng-option value="3">Prospect</ng-option>
                            <ng-option value="4">Potential</ng-option>
                            <ng-option value="5">Drop</ng-option>
                            <ng-option value="6">Customer</ng-option>
                        </ng-select>
                    </div>
                    <br />
                    <div class="col-lg-12 col-md-12 col-sm-12 fv-row mt-2 d-flex ">
                        <div class="col-lg-6 col-md-6 col-sm-6 fv-row mt-2">
                            <span class="font-bold"><b>View Type</b></span>
                            <div class="d-flex justify-content-start mt-4 ms-2">
                                <div class="
                      form-check
                      form-check-custom
                      form-check-primary
                      form-check-solid
                      form-check-sm
                    ">
                                    <input class="form-check-input" type="radio" name="contact" checked="checked"
                                        formControlName="contact" value="all_contact" />
                                    <label class="form-check-label text-gray-700 text-nowrap"
                                        for="kt_builder_header_content_menu">All Contacts</label>
                                </div>
                                <div class="
                      form-check
                      form-check-custom
                      form-check-primary
                      form-check-solid
                      form-check-sm
                      ms-10
                    ">
                                    <input class="form-check-input" type="radio" name="contact"
                                        formControlName="contact" value="my_contact" />
                                    <label class="form-check-label text-gray-700 text-nowrap"
                                        for="kt_builder_header_content_page-title">My Contact</label>
                                </div>
                            </div>
                        </div>
                        <br>
                    </div>
                    <br /><br />
                    <div class="text-center my-4">
                        <button [ngClass]="{
        'primary-button': !reactiveForm.invalid,
        'secondary-button': reactiveForm.invalid
      }" data-bs-dismiss="modal" class="btn-send">
                            <i class="fas fa-check text-white fs-5 "></i> &nbsp;Apply
                        </button> &nbsp;&nbsp;
                        <button class="btn-danger btn-sm text-white me-4" (click)="onclose()" data-bs-dismiss="modal">
                            Cancel
                        </button>
                    </div>

                </div>
            </div>
        </div>
    </div>
</form>
<form [formGroup]="NotesreactiveForm" #form="ngForm">
    <div class="modal" id="myModalUpdateimage" data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="card-header p-1 pb-2 pt-1 rounded-top bg-primary">
                    <h2 style="margin-top:10px;color:white;font-weight: bold;">&nbsp;&nbsp;<i
                            class="fa-solid fa-upload fw-bolder fs-3"></i> &nbsp;&nbsp;Upload Document</h2>

                </div>
                <div class="modal-body">
                    <div class="row"><span class="font-bold"><b>Document Title</b>
                            <span class="ms-1 text-red">*</span></span>
                        <div class="col-lg-11 col-md-12 col-sm-12 fv-row mt-2 d-flex ">
                            <input formControlName="document_title" type="text" class="
                 form-control form-control-lg form-control-solid
                 custom-input
                 mb-3 mb-lg-0
                 bg-white
                 custom-input
               " [ngStyle]="{
                 'border-color':
                 document_title.invalid && document_title.touched
                     ? 'red'
                     : 'rgb(209, 209, 209)'
               }" placeholder="" pattern="^(?!\s*$).+" name="document_title" required />
                        </div>
                    </div>
                    <div *ngIf="document_title.invalid && (document_title.dirty || document_title.touched)">
                        <div *ngIf="document_title.errors?.['required']">
                            <span style="color:red;">Document title is required.</span>
                        </div>
                    </div>

                    <div *ngIf="document_title.invalid && (document_title.dirty || document_title.touched)">
                        <div *ngIf="document_title.errors?.['pattern']">
                            <span style="color:red;">Invalid Format</span>
                        </div>
                    </div>
                    <br />
                    <div class="row">
                        <div class="col-12 col-lg-12 col-md-6 col-sm-12">
                            <span class="font-bold">Remarks</span>
                            <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                                <textarea class="form-control" formControlName="remarks" pattern="^(?!\s*$).+"
                                    id="exampleFormControlTextarea1" rows="2" style="overflow-y: scroll;"></textarea>
                            </div>
                        </div>
                    </div>
                    <br />
                    <div class="col-12 col-lg-4 col-md-6 col-sm-12">
                        <span class="font-bold"><b>Upload Document</b><span class="ms-1 text-red">*</span></span>
                        <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                            <input style="width: 300%;" (change)="ondocChange2($event)" accept="*" type="file"
                                #fileInput class="
                          form-control form-control-lg form-control-solid bg-white
                          mb-3 mb-lg-0  borderc-secondary custom-input
                        " name="fName" />
                        </div>
                    </div>
                    <br>
                    <div class="text-center my-4">
                        <button type="submit" class="btn-success btn-sm text-white me-2" data-bs-dismiss="modal"
                            (click)="ondocumentsubmit()">
                            <i class="fa-solid fa-upload fw-bolder fs-3"></i>&nbsp;&nbsp;Upload</button>
                        <button class="btn-danger btn-sm text-white me-2" data-bs-dismiss="modal">
                            <i class="fas fa-close text-white"></i> &nbsp;Close
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</form>

<div class="modal" id="myModaldocument" data-bs-backdrop="static" data-bs-keyboard="false">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="card-header p-1 pb-2 pt-1 rounded-top btn-send">
                <h2 style="margin-top:10px;color:white;font-weight: bold;">&nbsp;&nbsp;<i
                        class="fa-solid fa-upload fs-default-icon"></i> &nbsp;&nbsp;Upload Document</h2>
            </div>
            <div class="modal-body">
                <div class="col-12 col-lg-4 col-md-6 col-sm-12">
                    <span class="font-bold"><b>Upload Document</b><span class="ms-1 text-red">*</span></span>
                    <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                        <input style="width: 300%;" (change)="onChange1($event)" type="file" #fileInput class="
                  form-control form-control-lg form-control-solid bg-white
                  mb-3 mb-lg-0  borderc-secondary custom-input
                " name="fName" />

                    </div>
                </div>
                <br>
                <div class="text-center my-4">
                    <div *ngFor="let data of whatsappmessage_list; let i=index;">
                        <button type="submit" title="Send" class="btn-success btn-sm text-white me-2"
                            data-bs-dismiss="modal" (click)="onupload(data.contact_id)" *ngIf="i === 0">
                            <i class="fas fa-paper-plane fs-3"></i>&nbsp;&nbsp;Send</button>


                        <button title="Back" class="btn-primary btn-sm text-white me-2" data-bs-dismiss="modal"
                            *ngIf="i === 0">
                            <i class="fas fa-arrow-left"></i> &nbsp;&nbsp;Back
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal" id="myModalimage" data-bs-backdrop="static" data-bs-keyboard="false">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="card-header p-1 pb-2 pt-1 rounded-top btn-send">
                <h2 style="margin-top:10px;color:white;font-weight: bold;">&nbsp;&nbsp;<i
                        class="fa-solid fa-upload fs-default-icon"></i> &nbsp;&nbsp;Upload Image</h2>
            </div>
            <div class="modal-body">
                <div class="col-12 col-lg-4 col-md-6 col-sm-12">
                    <span class="font-bold"><b>Upload Image</b><span class="ms-1 text-red">*</span></span>
                    <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                        <input style="width: 300%;" (change)="onChange4($event)" accept="image/*" type="file" #fileInput
                            class="
                      form-control form-control-lg form-control-solid bg-white
                      mb-3 mb-lg-0  borderc-secondary custom-input
                    " name="fName" />
                    </div>
                </div>
                <br>
                <div class="text-center my-4">
                    <div *ngFor="let data of whatsappmessage_list; let i=index;">
                        <button type="submit" title="Send" class="btn-success btn-sm text-white me-2"
                            (click)="onupload(data.contact_id)" data-bs-dismiss="modal" *ngIf="i === 0">
                            <i class="fas fa-paper-plane fs-3"></i>&nbsp;&nbsp;Send</button>
                        <button title="Back" class="btn-primary btn-sm text-white me-2" data-bs-dismiss="modal"
                            *ngIf="i === 0">
                            <i class="fas fa-arrow-left"></i> &nbsp;&nbsp;Back
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!--Add to customer popup-->

<form [formGroup]="reactiveForm" #form="ngForm">
    <div class="modal modal-xl" id="myModaladdtocustomer" data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="card-header p-1 pb-2 pt-1 rounded-top"
                    style="background: rgb(81,183,204);
                     background: linear-gradient(90deg, rgba(81,183,204,1) 0%, rgba(173,221,211,1) 35%, rgba(209,242,255,1) 100%);color:black;font-size: 14px;height:40px;padding-top: 12px;padding-left: 8px;">
                    <h2 style="margin-top:10px;color:white;font-weight: bold;">
                        <i class="fa-solid fa-user-plus fw-bolder fs-1" style="margin-left: 10px;"></i>&nbsp;&nbsp;Lead
                        to Customer
                    </h2>
                </div>
                <br>
                <div class="row m-1">
                    <div class="col-12 col-lg-4 col-md-4 col-sm-4">
                        <span>CustomerName</span>
                        <input type="text" formControlName="customer_name" class="
                                    form-control form-control-lg form-control-solid custom-input
                                    mb-3 mb-lg-0
                                    custom-input
                                                " placeholder="Customer " name="customer_name" required
                            style="height:40px;" readonly />
                    </div>
                    <div class="col-12 col-lg-4 col-md-4 col-sm-4">
                        <span>Contact Person Name<span class="ms-1 text-red">*</span></span>
                        <input formControlName="displayName" type="text" class="
                                                    form-control form-control-lg form-control-solid
                                                    custom-input
                                                    mb-3 mb-lg-0
                                                    bg-white
                                                    custom-input
                                                " [ngStyle]="{
                                                    'border-color':
                                                    displayName.invalid && displayName.touched
                                                        ? 'red'
                                                        : 'rgb(209, 209, 209)'
                                                }" placeholder="" pattern="^(?!\s*$).+" name="displayName" required />

                    </div>

                    <div class="col-12 col-lg-4 col-md-4 col-sm-4">
                        <span [ngClass]="{'error_input_field': mobile.invalid && mobile.touched}">Mobile Number<span
                                class="ms-1 text-red">*</span></span>
                        <div class="col-lg-12 col-md-12 col-sm-12 fv-row">
                            <ngx-intl-tel-input [cssClass]="'form-control'"
                                [preferredCountries]="[CountryISO.UnitedKingdom]" [enableAutoCountrySelect]="true"
                                [enablePlaceholder]="true" [searchCountryFlag]="true"
                                [searchCountryField]="[SearchCountryField.Iso2, SearchCountryField.Name]"
                                [selectedCountryISO]="CountryISO.UnitedKingdom" [phoneValidation]="true" name="phone"
                                [maxLength]="15" formControlName="mobile">
                            </ngx-intl-tel-input>
                        </div>
                    </div>
                </div>

                <div class="row m-1">
                    <div class="col-12 col-lg-4 col-md-4 col-sm-4">
                        <span>Email<span class="ms-1 text-red">*</span></span>
                        <div class="col-lg-12 col-md-12 col-sm-12 fv-row  d-flex ">
                            <input formControlName="email" type="text" class="
                                    form-control form-control-lg form-control-solid
                                    custom-input
                                    mb-3 mb-lg-0
                                    bg-white
                                    custom-input
                                " [ngStyle]="{
                                    'border-color':
                                    email.invalid && email.touched
                                        ? 'red'
                                        : 'rgb(209, 209, 209)'
                                }" placeholder="" pattern="^(?!\s*$).+" name="email" required />
                        </div>
                    </div>

                    <div class="col-12 col-lg-4 col-md-4 col-sm-4">
                        <span>Tax Segment<span class="ms-1 text-red">*</span></span>
                        <ng-select formControlName="taxsegment_name"
                            [class.is-invalid]="taxsegment_name.invalid && (taxsegment_name.dirty || taxsegment_name.touched)"
                            [ngClass]="{'invalid-border': taxsegment_name.invalid && taxsegment_name.touched}"
                            [items]="taxsegment_list" class="custom col-lg-12 col-12 col-md-12 col-sm-11 fv-row "
                            bindLabel="taxsegment_name" bindValue="taxsegment_gid" placeholder="Select a Tax Segment">
                        </ng-select>
                    </div>
                    <div class="col-12 col-lg-4 col-md-4 col-sm-4">
                        <span>Address I<span class="ms-1 text-red">*</span></span>
                        <div class="col-lg-12 col-md-12 col-sm-12 fv-row d-flex ">
                            <input formControlName="address1" type="text" class="
                                        form-control form-control-lg form-control-solid
                                        custom-input
                                        mb-3 mb-lg-0
                                        bg-white
                                        custom-input
                                    " [ngStyle]="{
                                        'border-color':
                                        address1.invalid && address1.touched
                                            ? 'red'
                                            : 'rgb(209, 209, 209)'
                                    }" placeholder="" pattern="^(?!\s*$).+" name="address1" required />
                        </div>
                    </div>
                </div>
                <div class="row m-1">
                    <div class="col-12 col-lg-4 col-md-4 col-sm-4">
                        <span class="font-bold">Address Line II</span>
                        <div class="col-lg-12 col-12 col-md-12 col-sm-12 fv-row mt-2">

                            <input formControlName="address2" type="text" class="
                                                    form-control form-control-lg form-control-solid
                                                    borderc-secondary
                                                    bg-white
                                                    custom-input
                                                    mb-3 mb-lg-0
                                                " placeholder="Address Line II" name="address2" style="height:40px;" />
                            <!-- <textarea type="text"
                                                class="form-control mt-4 form-control-lg form-control-solid bg-secondary custom-input mb-3 mb-lg-0 border-secondary bg-white custom-input"
                                                placeholder="Shipping to"  formControlName="address2"  class="form-control" rows="5"></textarea> -->
                        </div>
                    </div>
                    <div class="col-12 col-lg-4 col-md-4 col-sm-4">
                        <span class="font-bold">City</span>
                        <div class="col-lg-12 col-12 col-md-12 col-sm-12 fv-row mt-2">
                            <input type="text" formControlName="customer_city" class="
                                    form-control form-control-lg form-control-solid
                                    custom-input
                                    mb-3 mb-lg-0
                                    bg-white
                                    custom-input borderc-secondary
                                  " placeholder="Customer city" style="height:40px;" />

                        </div>
                    </div>

                    <div class="col-12 col-lg-4 col-md-4 col-sm-4">
                        <span class="font-bold">Postal code</span>
                        <div class="col-lg-12 col-12 col-md-12 col-sm-12 fv-row mt-2">
                            <input formControlName="postal_code" type="numeric" class="
                                form-control form-control-lg form-control-solid
                                borderc-secondary
                                bg-white
                                custom-input
                                mb-3 mb-lg-0
                              " placeholder="Postal code" name="postal_code" style="height:40px;" />
                        </div>
                    </div>
                </div>
                <div class="row m-1">
                    <div class="col-12 col-lg-4 col-md-4 col-sm-4">
                        <span class="font-bold"
                            [ngClass]="{'error_input_field': countryname.invalid && countryname.touched || countryname.errors?.['pattern'] }">Country<span
                                class="ms-1 text-red">*</span></span>
                        <ng-select formControlName="countryname" [class.is-invalid]="
                                countryname.invalid && (countryname.dirty || countryname.touched)
                                  " [ngClass]="{'invalid-border': countryname.invalid && countryname.touched}"
                            [items]="country_list" class="custom col-lg-12 col-12 col-md-12 col-sm-12 fv-row mt-2"
                            bindLabel="country_name" bindValue="country_gid" placeholder="Select an Country">

                        </ng-select>

                    </div>
                    <div class="col-12 col-lg-4 col-md-4 col-sm-4">
                        <span class="font-bold"
                            [ngClass]="{'error_input_field': currency.invalid && currency.touched || currency.errors?.['pattern'] }">Currency<span
                                class="ms-1 text-red">*</span></span>
                        <ng-select formControlName="currency" [class.is-invalid]="
                        currency.invalid && (currency.dirty || currency.touched)
                                " [ngClass]="{'invalid-border': currency.invalid && currency.touched}"
                            [items]="currency_list" class="custom col-lg-12 col-12 col-md-12 col-sm-12 fv-row mt-2"
                            bindLabel="currency_name" bindValue="currency_gid"
                            placeholder="Select Currency"></ng-select>
                    </div>
                </div>
                <!-- <div class="row m-1">
                    <div class="col-12 col-lg-6 col-md-6 col-sm-12">
                        <span class="font-bold">Region</span>
                        <ng-select formControlName="region_name" [items]="region_list"
                            class="custom col-lg-12 col-12 col-md-12 col-sm-12 fv-row mt-2" bindLabel="region_name"
                            bindValue="region_gid" placeholder="Select an Region"></ng-select>

                    </div>
                 
                </div> -->
                <br>
                <div class="text-center my-4">
                    <button (click)="onaddtocustomer()" [ngClass]="{
                                'primary-button': !reactiveForm.invalid,
                                'secondary-button': reactiveForm.invalid
                              }" data-bs-dismiss="modal" class="btn-success">
                        <i class="fas fa-check text-white fs-5 "></i> &nbsp;Submit
                    </button> &nbsp;&nbsp;
                    <button class="btn-danger btn-sm text-white me-4" (click)="onclose()" data-bs-dismiss="modal">
                        <i class="fa fa-times" aria-hidden="true"></i> Cancel
                    </button>
                </div>
                <br>
            </div>
        </div>
    </div>
</form>
<div class="modal" id="myModalalreadycustomer" data-bs-backdrop="static" data-bs-keyboard="false">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="text-center my-4">
                <h2><b>Lead already added as Customer</b></h2>
                <div class="text-center my-4">
                    <button class="btn-primary btn-sm text-white me-2" data-bs-dismiss="modal">
                        <i class="fas fa-close text-white"></i> &nbsp;Close
                    </button>&nbsp;
                </div>
            </div>
        </div>
    </div>
</div>
<!---Price Segment Notification-->
<form [formGroup]="reactiveForm2" #form="ngForm">
    <div class="modal" id="myModalpricesegmentmsg" data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="card-header p-1 pb-2 pt-1 rounded-top"
                    style="background: rgb(81,183,204);
                     background: linear-gradient(90deg, rgba(81,183,204,1) 0%, rgba(173,221,211,1) 35%, rgba(209,242,255,1) 100%);color:black;font-size: 14px;height:40px;padding-top: 12px;padding-left: 8px;">
                    <h2 style="margin-top:10px;color:white;font-weight: bold;">
                        <i class="fas fa-ticket fw-bolder fs-1" style="margin-left: 10px;"></i>&nbsp;&nbsp;Price Segment
                    </h2>
                </div>
                <div class="row m-3">
                    <div class="col-12">
                        <span class="font-bold me-2">Price Segment:</span>
                        <ng-select formControlName="pricesegment_gid" [items]="pricesegment_list" class="
                                custom
                                col-lg-11 col-12 col-md-11 col-sm-11
                                fv-row" bindLabel="pricesegment_name" bindValue="pricesegment_gid"
                            placeholder="Select a Price Segment">
                        </ng-select>
                    </div>
                </div>
                <div class="text-center my-4">
                    <button (click)="Updatepricesegement()" [ngClass]="{
                                'primary-button': !reactiveForm.invalid,
                                'secondary-button': reactiveForm.invalid
                              }" data-bs-dismiss="modal" class="btn-success">
                        <i class="fas fa-check text-white fs-5 "></i> &nbsp;Submit
                    </button> &nbsp;&nbsp;
                    <button class="btn-danger btn-sm text-white me-4" (click)="onclose()" data-bs-dismiss="modal">
                        <i class="fa fa-times" aria-hidden="true"></i> Cancel
                    </button>
                </div>
            </div>
        </div>
    </div>
</form>

<!-- <div class="modal" id="myModalpricesegmentmsg" data-bs-backdrop="static" data-bs-keyboard="false">
    <div class="modal-dialog modal-dialog-centered modal-sm">
        <div class="modal-content">
            <div class="modal-body">
                <div class="text-center my-4">
                    <h4> Add to customer , to Raise Price Segment
                    </h4>
                </div>
                <div class="text-center my-4">
                    <button class="btn-primary btn-sm text-white me-5" data-bs-dismiss="modal">
                        <i class="fas fa-close text-white"></i> &nbsp;Close
                    </button>&nbsp;
                </div>
            </div>
        </div>
    </div>
</div> -->

<!--Enquiry notification-->
<div class="modal" id="myModalcustomermsg" data-bs-backdrop="static" data-bs-keyboard="false">
    <div class="modal-dialog modal-dialog-centered modal-sm">
        <div class="modal-content">
            <div class="modal-body">
                <!-- <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
            style="position: absolute; top: 5; right: 5px;"></button> -->
                <div class="text-center my-4">
                    <h4> Add to customer ,to Raise Enquiry.

                    </h4>
                </div>
                <div class="text-center my-4">
                    <button class="btn-primary btn-sm text-white me-5" data-bs-dismiss="modal">
                        <i class="fas fa-close text-white"></i> &nbsp;Close
                    </button>&nbsp;
                </div>
            </div>
        </div>
    </div>
</div>

<!--Quotation notification-->
<div class="modal" id="myModalcustomerqotationmsg" data-bs-backdrop="static" data-bs-keyboard="false">
    <div class="modal-dialog modal-dialog-centered modal-sm">
        <div class="modal-content">
            <div class="modal-body">

                <div class="text-center my-4">
                    <h4> Add to customer, to Raise Quotation.</h4>
                </div>
                <div class="text-center my-4">
                    <button class="btn-primary btn-sm text-white me-5" data-bs-dismiss="modal">
                        <i class="fas fa-close text-white"></i> &nbsp;Close
                    </button>&nbsp;
                </div>
            </div>
        </div>
    </div>
</div>


<!--Order notification-->
<div class="modal" id="myModalcustomerordermsg" data-bs-backdrop="static" data-bs-keyboard="false">
    <div class="modal-dialog modal-dialog-centered modal-sm">
        <div class="modal-content">
            <div class="modal-body">
                <div class="text-center my-4">

                    <h4> Add To Customer, to Raise Order.</h4>
                </div>
                <div class="text-center my-4">
                    <button class="btn-primary btn-sm text-white me-2" data-bs-dismiss="modal">
                        <i class="fas fa-close text-white"></i> &nbsp;Close
                    </button>&nbsp;
                </div>
            </div>
        </div>
    </div>
</div>
<!--Invoice notification-->
<div class="modal" id="myModalcustomerinvoicemsg" data-bs-backdrop="static" data-bs-keyboard="false">
    <div class="modal-dialog modal-dialog-centered modal-sm">
        <div class="modal-content">
            <div class="modal-body">
                <div class="text-center my-4">

                    <h4>Add to customer, to Raise Invoice.</h4>
                </div>
                <div class="text-center my-4">
                    <button class="btn-primary btn-sm text-white me-2" data-bs-dismiss="modal">
                        <i class="fas fa-close text-white"></i> &nbsp;Close
                    </button>&nbsp;
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Edit contact -->
<form [formGroup]="reactiveForm" #form="ngForm">
    <div class="modal modal" id="myModaleditcontact" data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="card-header p-1 pb-2 pt-1 rounded-top"
                    style="background: rgb(81,183,204);
                         background: linear-gradient(90deg, rgba(81,183,204,1) 0%, rgba(173,221,211,1) 35%, rgba(209,242,255,1) 100%);color:black;font-size: 14px;height:40px;padding-top: 12px;padding-left: 8px;">
                    <h2 style="margin-top:10px;color:white;font-weight: bold;">
                        <i class="fa-solid fa-user fw-bolder fs-1" style="margin-left: 10px;"></i>&nbsp;&nbsp;Edit
                        Contact
                    </h2>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-12 col-lg-4 col-md-6 col-sm-4">
                            <span class="font-bold">Contact Person Name
                                <span class="ms-1 text-red">*</span></span>
                            <div class="col-lg-12 col-md-12 col-sm-12 fv-row mt-2 d-flex ">
                                <input formControlName="displayName" type="text" class="
             form-control form-control-lg form-control-solid
             custom-input
             mb-3 mb-lg-0
             bg-white
             custom-input
           " [ngStyle]="{
             'border-color':
             displayName.invalid && displayName.touched
                 ? 'red'
                 : 'rgb(209, 209, 209)'
           }" placeholder="" pattern="^(?!\s*$).+" name="displayName" required />
                            </div>

                            <div *ngIf="displayName.invalid && (displayName.dirty || displayName.touched)">
                                <div *ngIf="displayName.errors?.['required']">
                                    <span style="color:red;">Contact person name is required.</span>
                                </div>
                            </div>
                            <div *ngIf="displayName.invalid && (displayName.dirty || displayName.touched)">
                                <div *ngIf="displayName.errors?.['pattern']">
                                    <span style="color:red;">Invalid Format</span>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-lg-4 col-md-4 col-sm-4"> <span class="font-bold"
                                [ngClass]="{'error_input_field': mobile.invalid && mobile.touched}">Mobile Number
                                <span class="ms-1 text-red">*</span></span>
                            <div class=" mt-2">
                                <ngx-intl-tel-input [cssClass]="'form-control custom-width'"
                                    [preferredCountries]="[CountryISO.UnitedKingdom]" [enableAutoCountrySelect]="true"
                                    [enablePlaceholder]="true" [searchCountryFlag]="true"
                                    [searchCountryField]="[SearchCountryField.Iso2, SearchCountryField.Name]"
                                    [selectedCountryISO]="CountryISO.UnitedKingdom" [phoneValidation]="true"
                                    name="mobile" [maxLength]="15" formControlName="mobile"></ngx-intl-tel-input>
                            </div>
                        </div>
                        <div class="col-12 col-lg-4 col-md-4 col-sm-4">
                            <span class="font-bold">Email
                                <span class="ms-1 text-red">*</span></span>
                            <div class="col-lg-12 col-md-12 col-sm-12 fv-row mt-2 d-flex ">
                                <input formControlName="email" type="text" class="
             form-control form-control-lg form-control-solid
             custom-input
             mb-3 mb-lg-0
             bg-white
             custom-input
           " [ngStyle]="{
             'border-color':
             email.invalid && email.touched
                 ? 'red'
                 : 'rgb(209, 209, 209)'
           }" placeholder="" pattern="^(?!\s*$).+" name="email" required />
                            </div>
                        </div>
                        <!-- <div *ngIf="email.invalid && (email.dirty || email.touched)">
                            <div *ngIf="email.errors?.['required']">
                                <span style="color:red;">email address is required.</span>
                            </div>
                        </div>

                        <div *ngIf="email.invalid && (email.dirty || email.touched)">
                            <div *ngIf="email.errors?.['pattern']">
                                <span style="color:red;">Invalid Format</span>
                            </div>
                        </div> -->
                    </div>
                    <!-- <div class="row">
                        <span class="font-bold"><b>Address </b>
                            <span class="ms-1 text-red">*</span></span>
                        <div class="col-lg-12 col-md-12 col-sm-12 fv-row mt-2 d-flex ">
                            <input formControlName="address1" type="text" class="
             form-control form-control-lg form-control-solid
             custom-input
             mb-3 mb-lg-0
             bg-white
             custom-input
           " [ngStyle]="{
             'border-color':
             address1.invalid && address1.touched
                 ? 'red'
                 : 'rgb(209, 209, 209)'
           }" placeholder="" pattern="^(?!\s*$).+" name="address1" required />
                        </div>
                    </div>
                    <div *ngIf="address1.invalid && (address1.dirty || address1.touched)">
                        <div *ngIf="address1.errors?.['required']">
                            <span style="color:red;">Address is required.</span>
                        </div>
                    </div>

                    <div *ngIf="address1.invalid && (address1.dirty || address1.touched)">
                        <div *ngIf="address1.errors?.['pattern']">
                            <span style="color:red;">Invalid Format</span>
                        </div>
                    </div> -->
                    <div class="row">
                        <div class="col-12 col-lg-4 col-md-6 col-sm-12">
                            <span class="font-bold">Address Line 1<span class="ms-1 text-red">*</span></span>
                            <div class="col-lg-12 fv-row mt-2">
                                <input formControlName="leadbank_address1" type="text" class="
                              form-control form-control-lg form-control-solid
                              borderc-secondary
                              bg-white
                              custom-input
                              mb-3 mb-lg-0
                              borderc-secondary
                            " name="leadbank_address1" />
                            </div>
                        </div>

                        <div class="col-12 col-lg-4 col-md-6 col-sm-12">
                            <span class="font-bold">Address Line 2</span>
                            <div class="col-lg-12 fv-row mt-2">
                                <input formControlName="leadbank_address2" type="text" class="
                              form-control form-control-lg form-control-solid
                              borderc-secondary
                              bg-white
                              custom-input
                              mb-3 mb-lg-0
                              borderc-secondary
                            " name="leadbank_address2" />
                            </div>
                        </div>

                        <div class="col-12 col-lg-4 col-md-6 col-sm-12">
                            <span class="font-bold">Country<span class="ms-1 text-red">*</span></span>
                            <ng-select formControlName="country_name" [items]="country_list2" class="
                      custom
                      col-lg-12 col-12 col-md-11 col-sm-11
                      fv-row
                      mt-2
                    " bindLabel="country_name" bindValue="country_gid" placeholder="--Select Country--">
                            </ng-select>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-12 col-lg-4 col-md-6 col-sm-12">
                            <span class="font-bold">State</span>
                            <div class="col-lg-12 fv-row mt-2">
                                <input formControlName="leadbank_state" type="text" class="
                              form-control form-control-lg form-control-solid
                              borderc-secondary
                              bg-white
                              custom-input
                              mb-3 mb-lg-0
                            " name="leadbank_state" />
                            </div>
                        </div>
                        <div class="col-12 col-lg-4 col-md-6 col-sm-12">
                            <span class="font-bold">City</span>
                            <div class="col-lg-12 fv-row mt-2">
                                <input formControlName="leadbank_city" type="text" class="
                              form-control form-control-lg form-control-solid
                              borderc-secondary
                              bg-white
                              custom-input
                              mb-3 mb-lg-0
                            " name="leadbank_city" />
                            </div>
                        </div>

                        <div class="col-12 col-lg-4 col-md-6 col-sm-12">
                            <span class="font-bold">Postal Code</span>
                            <div class="col-lg-12 fv-row mt-2">
                                <input type="text" id="leadbank_pin" name="leadbank_pin" formControlName="leadbank_pin"
                                    class="
                                    form-control form-control-lg form-control-solid
                                    custom-input
                                    mb-3 mb-lg-0
                                    bg-white
                                    custom-input
                                  " [ngStyle]="{
                                    'border-color':
                                    leadbank_pin.invalid && leadbank_pin.touched
                                        ? 'red'
                                        : 'rgb(209, 209, 209)'
                                  }" minlength="5" maxlength="12" autocomplete="off">

                                <div *ngIf="leadbank_pin.errors?.['pattern']" class="error-text">
                                    Enter Valid Postal Code.

                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="text-center my-4">
                        <button (click)="onsubmit()" [ngClass]="{
        'primary-button': !reactiveForm.invalid,
        'secondary-button': reactiveForm.invalid
      }" class="btn-success">
                            <i class="fas fa-check text-white fs-5 "></i> &nbsp;Update
                        </button> &nbsp;&nbsp;
                        <button class="btn-danger btn-sm text-white me-4" (click)="onclose()" data-bs-dismiss="modal">
                            Cancel
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</form>


<form [formGroup]="reactiveMessageForm" #form="ngForm">
    <div class="modal" id="template" data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog" style="max-width: 400px; max-height: 800px; margin-top: 100px;">
            <div class="modal-content">
                <!-- Modal Header -->
                <div class="card-header p-1 pb-2 pt-1 rounded-top btn-send"
                    style="border-bottom: 1px solid rgb(173, 173, 173);">
                    <h2 style="margin-top: 10px; color: white; font-weight: bold;">&nbsp;&nbsp;Templates</h2>
                </div>
                <!-- Modal body -->
                <div class="modal-body">
                    <div id="kt_chat_messenger_body" style="max-height: 250px; overflow-y: auto; ">
                        <!-- contact card body -->
                        <div *ngFor="let data of whatsappMessagetemplatelist; let i=index;"
                            (click)="onTemplatesent(data.id,data.version)" data-bs-dismiss="modal">
                            <div class="d-flex flex-stack py-4 nassar">
                                <div class="d-flex align-items-center">
                                    <div class="ms-5">
                                        <div class="fs-5 fw-bold text-gray-900 text-hover-primary mb-2"
                                            title="Click to send">{{data.p_name}}
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="separator separator-dashed d-none"></div>
                        </div>
                    </div>
                    <div class="text-center my-4">
                        <button class="btn-danger btn-sm text-white me-2" data-bs-dismiss="modal" (click)="onclose()">
                            <i class="fas fa-close text-white"></i> &nbsp;Close
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</form>
<!-- ----------Schedule form ----------- -->
<div class="modal" id="myscheduledetails" data-bs-backdrop="static" data-bs-keyboard="false">
    <div class="modal-dialog ">
        <div class="modal-content">

            <!-- Modal Header -->
            <div class="card-header p-1 pb-2 pt-1 rounded-top"
                style="background: rgb(81,183,204);
background: linear-gradient(90deg, rgba(81,183,204,1) 0%, rgba(173,221,211,1) 35%, rgba(209,242,255,1) 100%);color:black;font-size: 14px;height:40px;padding-top: 12px;padding-left: 8px;">
                <h2 style="margin-top:10px;color:white;font-weight: bold;">
                    <i class="fa-solid fa-calendar-days fw-bolder fs-3" style="margin-left: 10px;"></i>&nbsp;&nbsp;
                    {{leadbank_name}}
                </h2>
            </div>

            <div class="modal-body">
                <div class="log-details-tab-content">
                    <div class="col-12 col-lg-3 col-md-6 col-lg-12">
                        <span class="fw-bold ms-2" style="font-size: small;"><b>Schedule Log Details
                            </b></span><br /><br />

                        <ng-container *ngFor="let schedule of schedulesummary_list; let i = index">
                            <div style="margin-bottom: 5px; padding: 5px; overflow-y: auto; max-height: 300px;"
                                class="panel bg-white">
                                {{schedule.log_legend}}
                                <div style="margin-bottom: 3px; margin-top: 2px;">
                                    <div class="row">
                                        <div class="panel-body" style="font-size: x-small;">{{
                                            schedule.log_details
                                            }}
                                        </div>
                                    </div>
                                </div>
                                <!-- Add a horizontal line after each schedule log -->
                                <hr style="margin-top: 5px; margin-bottom: 5px;">
                            </div>
                        </ng-container>
                    </div>
                </div>

                <div class="text-center my-4">
                    <button class="btn-primary btn-sm text-white me-2" data-bs-dismiss="modal"
                        style="background-color: red;">
                        <i class="fas fa-arrow-left text-white"></i> &nbsp;Back
                    </button>&nbsp;
                </div>
            </div>
        </div>
    </div>
</div>

<!--phone buuton ------------ -->
<div class="modal" id="myModalphone" data-bs-backdrop="static" data-bs-keyboard="false"
    *ngFor="let data of whatsappmessage_list; let i=index;">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="card-header p-1 pb-2 pt-1 rounded-top"
                style="background: rgb(81,183,204);
    background: linear-gradient(90deg, rgba(81,183,204,1) 0%, rgba(173,221,211,1) 35%, rgba(209,242,255,1) 100%);color:black;font-size: 14px;height:40px;padding-top: 12px;padding-left: 8px;">
                <h2 style="margin-top: 10px;justify-content: center;color:white;font-weight: bold;">
                    &nbsp;&nbsp;Phone Number:{{data.identifierValue}}</h2>
            </div>
            <div class="text-center my-4">
                <h2><b>Are you sure?</b></h2>
                <br>
                <p style="display: block;">Do You Want To Place a Call?</p><br>
                <div class="text-center my-4">
                    <button type="submit" class="btn-success btn-sm text-white me-2" data-bs-dismiss="modal"
                        (click)="onclickcall(data.identifierValue)">
                        <i class="fas fa-phone"></i>&nbsp;Call</button>
                    <button class="btn-primary btn-sm text-white me-2" data-bs-dismiss="modal">
                        <i class="fas fa-arrow-left"></i> &nbsp;Back
                    </button>


                </div>
            </div>
        </div>
    </div>
</div>
<!-- gmail starts -->


<form #form="ngForm">
    <div class="modal modal-xl" id="gmailupload" data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="card-header p-1 pb-2 pt-1 rounded-top bg-lightblue text-blue">
                    <h2 style="margin-top:10px;font-weight: bold;" class="text-blue">&nbsp;&nbsp;<i
                            class="fas fa-plus fw-bolder fs-3"></i> &nbsp;&nbsp;Compose Mail</h2>
                </div>
                <div class="modal-body">
                    <div id="kt_app_content" class="app-content  flex-column-fluid ">
                        <div id="kt_app_content_container" class="app-container  container-xxl ">
                            <div>
                                <div>
                                    <div class="">
                                        <div class="card-body p-0">
                                            <form [formGroup]="gamilreactiveForm" #form="ngForm"
                                                id="kt_inbox_compose_form">
                                                <div class="d-block">
                                                    <div
                                                        class="d-flex align-items-center border-bottom px-8 min-h-50px">

                                                        <div class="text-gray-900 fw-bold w-75px">
                                                            From:
                                                        </div>
                                                        <input [readonly]="isReadOnly" type="text" class="
                                                form-control form-control-lg form-control-solid
                                                bg-white
                                                custom-input
                                                mb-3 mb-lg-0
                                                borderc-secondary " [value]="gmail_address"
                                                            formControlName="gmail_address" />
                                                    </div>
                                                    <!-- <div
                                            class="d-flex align-items-center border-bottom px-8 min-h-50px">
                                            <div class="text-gray-900 fw-bold w-75px">
                                                Reply To:
                                            </div>
                                            <input type="text"
                                                class="form-control form-control-transparent border-0"
                                                formControlName="reply_to" value="company@receive.vcidex.com"
                                                data-kt-inbox-form="tagify" />
                                            <div
                                                *ngIf="reply_to.invalid && (reply_to.dirty || reply_to.touched)">
                                                <div *ngIf="reply_to.errors?.['required']">
                                                    <span style="color:red;">&nbsp;Reply Is
                                                        required.</span>
                                                </div>
                                            </div>
                                        </div> -->
                                                    <div
                                                        class="d-flex align-items-center border-bottom px-8 min-h-50px">
                                                        <div class="text-gray-900 fw-bold w-75px">
                                                            To:
                                                        </div>
                                                        <input [readonly]="isReadOnly" type="text" class="
                                                form-control form-control-lg form-control-solid
                                                bg-white
                                                custom-input
                                                mb-3 mb-lg-0
                                                borderc-secondary " formControlName="to" [value]="to_mail"
                                                            data-kt-inbox-form="tagify" />
                                                    </div>
                                                    <div
                                                        class="d-flex align-items-center border-bottom px-8 min-h-50px">
                                                        <div class="text-gray-900 fw-bold w-75px">
                                                            Subject:<span class="ms-1 text-red">*</span>
                                                        </div>
                                                        <input class="
                                    form-control form-control-lg form-control-solid
                                    bg-white
                                    custom-input
                                    mb-3 mb-lg-0
                                    borderc-secondary " formControlName="gmail_sub" />
                                                    </div>
                                                    <!-- <div *ngIf="gmail_sub.invalid && (gmail_sub.dirty || gmail_sub.touched)">
                                                <div *ngIf="gmail_sub.errors?.['required']">
                                                    <span style="color:red;">&nbsp;Subject Is
                                                        required.</span>
                                                </div>
                                            </div><br> --><br>
                                                    <div class="d-flex flex-row m-6 mt-0">
                                                        <div class="col">
                                                            <span class="font-bold">Upload </span>
                                                            <div class="col-lg-12 fv-row mt-2">
                                                                <input (change)="ongamilChange1($event)" accept=".pdf"
                                                                    type="file" #fileInput class="
                                                        form-control form-control-lg form-control-solid bg-white
                                                        mb-3 mb-lg-0  borderc-secondary custom-input
                                                        " name="fName" formControlName="file" />
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-12 col-lg-12 col-sm-12">
                                                        <div class="d-flex flex-row m-6 mt-0 ">
                                                            <div class="col">
                                                                <div class="fv-row mt-2">
                                                                    <div class="text-gray-900 fw-bold w-75px">
                                                                        Body:<span class="ms-1 text-red">*</span>
                                                                    </div>
                                                                    <angular-editor [config]="config_compose_mail"
                                                                        formControlName="gmail_body">
                                                                    </angular-editor>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div
                                                    class="d-flex flex-stack flex-wrap justify-content-center gap-2 py-5 ps-8 pe-5 border-top">
                                                    <div class="d-flex align-items-center me-3">
                                                        <div class="btn-group align-items-center  me-4 ">
                                                            <div class="btn-group">
                                                                <button type="button" [disabled]="reactiveForm.invalid"
                                                                    class="btn-success btn-sm text-white me-4"
                                                                    (click)="onaddmail()" data-bs-dismiss="modal"
                                                                    [ngClass]="{
                                                        'primary-button': !reactiveForm.invalid,
                                                        'secondary-button': reactiveForm.invalid
                                                      }"> <i class="fas fa-paper-plane text-white"></i>
                                                                    &nbsp;Send</button>
                                                                <button class="btn-danger btn-sm text-white me-4"
                                                                    data-bs-dismiss="modal">
                                                                    <i class="fas fa-close text-white"></i>
                                                                    &nbsp;Close
                                                                </button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</form>

<!-- gmail ends -->
<!-- mail compose begins -->

<form #form="ngForm">
    <div class="modal modal-xl" id="mymodalapp" data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="card-header p-1 pb-2 pt-1 rounded-top"
                    style="background: rgb(81,183,204);
        background: linear-gradient(90deg, rgba(81,183,204,1) 0%, rgba(173,221,211,1) 35%, rgba(209,242,255,1) 100%);color:black;font-size: 14px;height:40px;padding-top: 12px;padding-left: 8px;">
                    <h2 style="margin-top:10px;color:white;font-weight: bold;">&nbsp;&nbsp;<i
                            class="fas fa-plus fw-bolder fs-3"></i> &nbsp;&nbsp;Compose Mail</h2>
                </div>
                <div class="modal-body">
                    <div id="kt_app_content" class="app-content  flex-column-fluid ">
                        <div id="kt_app_content_container" class="app-container  container-xxl ">
                            <div>
                                <div>
                                    <div class="">
                                        <div class="card-body p-0">
                                            <form [formGroup]="reactiveForm" #form="ngForm" id="kt_inbox_compose_form">
                                                <div class="d-block">
                                                    <div
                                                        class="d-flex align-items-center border-bottom px-8 min-h-50px">

                                                        <div class="text-gray-900 fw-bold w-75px">
                                                            From:
                                                        </div>
                                                        <input [readonly]="isReadOnly" type="text" class="
                                                form-control form-control-lg form-control-solid
                                                bg-white
                                                custom-input
                                                mb-3 mb-lg-0
                                                borderc-secondary " [value]="sending_domain" />
                                                    </div>
                                                    <!-- <div
                                            class="d-flex align-items-center border-bottom px-8 min-h-50px">
                                            <div class="text-gray-900 fw-bold w-75px">
                                                Reply To:
                                            </div>
                                            <input type="text"
                                                class="form-control form-control-transparent border-0"
                                                formControlName="reply_to" value="company@receive.vcidex.com"
                                                data-kt-inbox-form="tagify" />
                                            <div
                                                *ngIf="reply_to.invalid && (reply_to.dirty || reply_to.touched)">
                                                <div *ngIf="reply_to.errors?.['required']">
                                                    <span style="color:red;">&nbsp;Reply Is
                                                        required.</span>
                                                </div>
                                            </div>
                                        </div> -->
                                                    <div
                                                        class="d-flex align-items-center border-bottom px-8 min-h-50px">
                                                        <div class="text-gray-900 fw-bold w-75px">
                                                            To:
                                                        </div>
                                                        <input [readonly]="isReadOnly" type="text" class="
                                                form-control form-control-lg form-control-solid
                                                bg-white
                                                custom-input
                                                mb-3 mb-lg-0
                                                borderc-secondary " formControlName="to" [value]="to_mail"
                                                            data-kt-inbox-form="tagify" />
                                                    </div>
                                                    <div
                                                        class="d-flex align-items-center border-bottom px-8 min-h-50px">
                                                        <div class="text-gray-900 fw-bold w-75px">
                                                            Subject:<span class="ms-1 text-red">*</span>
                                                        </div>
                                                        <input class="
                                    form-control form-control-lg form-control-solid
                                    bg-white
                                    custom-input
                                    mb-3 mb-lg-0
                                    borderc-secondary " formControlName="sub" />
                                                    </div>
                                                    <div *ngIf="sub.invalid && (sub.dirty || sub.touched)">
                                                        <div *ngIf="sub.errors?.['required']">
                                                            <span style="color:red;">&nbsp;Subject Is
                                                                required.</span>
                                                        </div>
                                                    </div><br>
                                                    <div class="d-flex flex-row m-6 mt-0">
                                                        <div class="col">
                                                            <span class="font-bold">Upload </span>
                                                            <div class="col-lg-12 fv-row mt-2">
                                                                <input (change)="onChange2($event)"
                                                                    accept="image/*,.pdf,.doc,.docx,.txt,.xlsx,.xls,.mp4"
                                                                    type="file" #fileInput class="
                                                        form-control form-control-lg form-control-solid bg-white
                                                        mb-3 mb-lg-0  borderc-secondary custom-input
                                                        " name="fName" multiple />
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-12 col-lg-12 col-sm-12">
                                                        <div class="d-flex flex-row m-6 mt-0 ">
                                                            <div class="col">
                                                                <div class="fv-row mt-2">
                                                                    <div class="text-gray-900 fw-bold w-75px">
                                                                        Body:<span class="ms-1 text-red">*</span>
                                                                    </div>
                                                                    <angular-editor [config]="config_compose_mail"
                                                                        formControlName="body">
                                                                    </angular-editor>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div
                                                    class="d-flex flex-stack flex-wrap justify-content-center gap-2 py-5 ps-8 pe-5 border-top">
                                                    <div class="d-flex align-items-center me-3">
                                                        <div class="btn-group align-items-center  me-4 ">
                                                            <div class="btn-group">
                                                                <button type="button"
                                                                    class="btn-success btn-sm text-white me-4"
                                                                    (click)="onadd()" data-bs-dismiss="modal" [ngClass]="{
                                                        'primary-button': !reactiveForm.invalid,
                                                        'secondary-button': reactiveForm.invalid
                                                      }"> <i class="fas fa-paper-plane text-white"></i>
                                                                    &nbsp;Send</button>
                                                                <button class="btn-danger btn-sm text-white me-4"
                                                                    data-bs-dismiss="modal">
                                                                    <i class="fas fa-close text-white"></i>
                                                                    &nbsp;Close
                                                                </button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</form>
<!-- mail compose end-->

<!-- lead move stage -->
<form [formGroup]="reactiveForm2" #form="ngForm">
    <div class="modal" id="mymovestage" data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog ">
            <div class="modal-content">
                <div class="card-header p-1 pb-2 pt-1 rounded-top"
                    style="background: rgb(81,183,204);
                    background: linear-gradient(90deg, rgba(81,183,204,1) 0%, rgba(173,221,211,1) 35%, rgba(209,242,255,1) 100%);color:black;font-size: 14px;height:40px;padding-top: 12px;padding-left: 8px;">
                    <h2 style="margin-top:10px;color:white;font-weight: bold;">
                        <i class="fa-solid fa-stairs fs-2 ms-3"></i>&nbsp;&nbsp;
                        {{leadbank_name}}
                    </h2>
                </div>
                <div class="modal-body">
                    <div class="log-details-tab-content">
                        <div class="mb-4"><span class="fw-bolder ">Lead Current Stage</span>
                            <div class="col-lg-12 col-12 col-md-11 col-sm-11 fv-row mt-2">
                                <label placeholder="Auto Generate">{{leadstage_name}}</label>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-12 col-12 col-md-11 col-sm-11 fv-row ">
                        <span class="font-bold"><b>Stage </b> <span class="ms-1 text-red">*</span></span>
                        <ng-select style=" width: 400px;" (change)="stagechange()" formControlName="call_response"
                            [class.is-invalid]="
            call_response.invalid && (call_response.dirty || call_response.touched)"
                            [ngClass]="{'invalid-border': call_response.invalid && call_response.touched}"
                            [items]="callresponse_list" class="custom col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2"
                            bindLabel="leadstage_name" bindValue="leadstage_name"
                            placeholder="--Select Stage--"></ng-select>
                        <div *ngIf="call_response.invalid && (call_response.dirty || call_response.touched)"
                            class="invalid-feedback">
                            <div *ngIf="call_response.errors?.['required']">
                                <span style="color:red;">Stage is required.</span>
                            </div>
                        </div>
                    </div>
                    <br>
                    <!-- <ng-container *ngIf="lspage === 'My-TeleAll' || lspage === 'My-TeleDrop' || lspage === 'My-teleProspect' || lspage === 'My-teleFollowup'
|| lspage === 'My-teleNewpending' || lspage === 'My-teleNew' || lspage === 'MM-teleLongestLead' || lspage === 'MM-teleLapsedLead'
|| lspage === 'MM-teleScheduled' || lspage == 'MM-teleDrop' || lspage === 'MM-teleProspect' || lspage === 'MM-teleFollowup' ||
lspage === 'MM-telepending' || lspage === 'MM-teleNew' || lspage === 'MM-teleTotal'">
                <div class="col-lg-12 col-12 col-md-11 col-sm-11 fv-row " [hidden]="!done">

                    <span class="font-bold"><b>Marketing Team </b> <span class="ms-1 text-red">*</span></span>

                    <ng-select style=" width: 400px;" formControlName="team_gid" [class.is-invalid]="
                    team_gid.invalid && (team_gid.dirty || team_gid.touched)"
                        [ngClass]="{'invalid-border': team_gid.invalid && team_gid.touched}"
                        [items]="assignedteamdropdown_list"
                        class="custom col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2"
                        bindLabel="campaign_title" bindValue="campaign_gid"
                        placeholder="--Select Team--"></ng-select>
                    <div *ngIf="
                    team_gid.invalid && (team_gid.dirty || team_gid.touched)
          " class="invalid-feedback">
                        <div *ngIf="team_gid.errors?.['required']">
                            <span style="color:red;">Stage is required.</span>
                        </div>
                    </div>
                </div>
            </ng-container> -->

                    <div class="text-center my-4">
                        <button (click)="onsubmitlog1()" [ngClass]="{
                'primary-button': !reactiveForm2.invalid,
                'secondary-button': reactiveForm2.invalid
                 }" data-bs-dismiss="modal">
                            <i class="fas fa-check text-white fs-5 "></i> &nbsp;Update
                        </button> &nbsp;&nbsp;
                        <button (click)="onclosemovestage()" class="btn-danger btn-sm text-white me-4"
                            data-bs-dismiss="modal">
                            <i class="fas fa-close text-white"></i> &nbsp;Close
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</form>
<!-- For Click to call -->
<div class="modal" id="myModalcall" data-bs-backdrop="static" data-bs-keyboard="false">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="card-header p-1 pb-2 pt-1 rounded-top"
                style="background: rgb(81,183,204);
    background: linear-gradient(90deg, rgba(81,183,204,1) 0%, rgba(173,221,211,1) 35%, rgba(209,242,255,1) 100%);color:black;font-size: 14px;height:40px;padding-top: 12px;padding-left: 8px;">
                <h2 style="margin-top: 10px;justify-content: center;color:white;font-weight: bold;">&nbsp;<i
                        class="fas fa-phone" style="font-size: 20px;"></i>
                    &nbsp;Connect A Call...</h2>
            </div>
            <div class="text-center my-4">

                <p style="display: block;"><b>Do You Want To Place a Call to </b>&nbsp;<b class="fs-3">{{lsmobile}}</b>
                </p><br>
                <div class="text-center my-4">
                    <button type="submit" class="btn-success btn-sm text-white me-2" data-bs-dismiss="modal"
                        (click)="connectcall()">
                        <i class="fas fa-phone"></i>&nbsp;Call</button>
                    <button class="btn-danger btn-sm text-white me-4" data-bs-dismiss="modal">
                        <i class="fas fa-close text-white"></i> &nbsp;Close
                    </button>


                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal" id="myModalaudio1" data-bs-backdrop="static" data-bs-keyboard="false">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">

            <!-- Modal Header -->
            <div class="card-header p-1 pb-2 pt-1 rounded-top"
                style="background: rgb(81,183,204);
background: linear-gradient(90deg, rgba(81,183,204,1) 0%, rgba(173,221,211,1) 35%, rgba(209,242,255,1) 100%);color:black;font-size: 14px;height:40px;padding-top: 12px;padding-left: 8px;">
                <h2 style="margin-top:10px;color:white;font-weight: bold;">
                    &nbsp; <i class="fa-solid fa-volume-up" style="font-size: 17px;"></i>
                    &nbsp;&nbsp;Audio</h2>
            </div><br>
            <div style="margin-left: 100px;"> <audio controls id="html-audio" [src]="recording_path"></audio>
            </div>

            <BR>

            <div class="text-center my-4">
                <button class="btn-danger btn-sm text-white me-2" data-bs-dismiss="modal">
                    <i class="fas fa-close text-white"></i> &nbsp;Close</button>
            </div>
        </div>
    </div>

    <!-- </div> -->
</div>
<div class="modal" id="myModaldelete" data-bs-backdrop="static" data-bs-keyboard="false">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="text-center my-4">
                <h2><b>Are you sure?</b></h2>
                <br>
                <p style="display: block;">Do You Want To Delete this File ?</p>
                <div class="text-center my-4">
                    <button class="btn-primary btn-sm text-white me-2" data-bs-dismiss="modal">
                        <i class="fas fa-close text-white"></i> &nbsp;Close
                    </button>&nbsp;
                    <button class="btn-danger btn-sm text-white me-4" (click)="ondelete()" data-bs-dismiss="modal">
                        <i class="fas fa-trash text-white fs-5 "></i> &nbsp;Delete
                    </button>


                </div>
            </div>
        </div>
    </div>
</div>
<form [formGroup]="reactiveFormdrop" #form="ngForm">
    <div class="modal" id="myModaldelete1" data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="text-center my-4">
                    <h2 style="display: block;">Do You Want Move To Drop ?</h2>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label class="form-label"><b>Remarks</b></label>
                        <textarea formControlName="drop_remarks" type="text" class="
                     form-control form-control-lg form-control-solid
                     custom-input
                     mb-3 mb-lg-0
                     bg-white
                     custom-input
                     " [ngStyle]="{
                        'border-color':
                        drop_remarks.invalid && drop_remarks.touched
                            ? 'red'
                            : 'rgb(209, 209, 209)'
                      }" required placeholder="Drop a Reason" class="form-control" rows="3"></textarea>
                    </div>
                    <div *ngIf="drop_remarks.invalid && (drop_remarks.dirty || drop_remarks.touched)">
                        <div *ngIf="drop_remarks.errors?.['required']">
                            <span style="color:red;">Remarks is required.</span>
                        </div>
                    </div>
                </div>
                <div class="text-center my-4">
                    <button (click)="OnBin()" class="btn-danger btn-sm text-white me-4" data-bs-dismiss="modal">
                        <i class="fa-solid fa-circle-down text-white fs-5 "></i> &nbsp;Drop
                    </button>
                    &nbsp;&nbsp;
                    <button (click)="onclosedrop()" class="btn-primary btn-sm text-white me-4" data-bs-dismiss="modal">
                        <i class="fas fa-close text-white"></i> &nbsp;Close
                    </button>
                </div>
            </div>
        </div>
    </div>
</form>
<div class="modal fade" id="myModalbodymail" tabindex="-1" data-bs-backdrop='static'
    aria-labelledby="editamlcategoryLabel" aria-hidden="true" data-bs-keyboard="false">
    <div class="modal-dialog modal-md modal-dialog-centered">
        <div class="modal-content">
            <div class="card-header p-1 pb-1 pt-1 rounded-top bg-primary"
                style="display: flex; align-items: center; height: 40px;">
                <i class="fas fa-envelope fs-1 ms-3" style="color: white; margin-right: 10px;"></i>
                <h3 style="color: white; font-weight: bold; text-align: center; margin: 0;">
                    Mail Content
                </h3>
            </div>
            <div class="modal-body">
                <div class="col-12 col-lg-3 col-md-6 col-lg-12">
                    <span class="fw-bold">Subject : {{mail_subject}}</span>
                    <p class="mt-2 wrap-text" style="max-width: 100%; overflow: auto; max-height: 200px;"
                        [innerHTML]="mail_body"></p>
                </div>
                <div class="text-center my-4">
                    <button class="btn-danger btn-sm text-white me-2" data-bs-dismiss="modal"
                        style="background-color: red;">
                        <i class="fas fa-close text-white"></i> &nbsp;Close
                    </button>&nbsp;
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="myModalbodyoutlookmail" tabindex="-1" data-bs-backdrop='static'
    aria-labelledby="editamlcategoryLabel" aria-hidden="true" data-bs-keyboard="false">
    <div class="modal-dialog modal-md modal-dialog-centered">
        <div class="modal-content">
            <div class="card-header p-1 pb-1 pt-1 rounded-top bg-primary"
                style="display: flex; align-items: center; height: 40px;">
                <i class="fas fa-envelope fs-1 ms-3" style="color: white; margin-right: 10px;"></i>
                <h3 style="color: white; font-weight: bold; text-align: center; margin: 0;">
                    Mail Content
                </h3>
            </div>
            <div class="modal-body">
                <div class="col-12 col-lg-3 col-md-6 col-lg-12">
                    <span class="fw-bold">Subject : {{outlookmail_subject}}</span>
                    <p class="mt-2 wrap-text" style="max-width: 100%; overflow: auto; max-height: 200px;"
                        [innerHTML]="outlookmail_body"></p>
                </div>
                <div class="text-center my-4">
                    <button class="btn-danger btn-sm text-white me-2" data-bs-dismiss="modal"
                        style="background-color: red;">
                        <i class="fas fa-close text-white"></i> &nbsp;Close
                    </button>&nbsp;
                </div>
            </div>
        </div>
    </div>
</div>
<!-- 360 all popup end -->