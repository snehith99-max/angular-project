<div class="card">
  <div class="card-header bg-mail" style="color: white;">
    <h3 class="card-title"><i class="bi bi-telegram" style="font-size: 20px;"></i>&nbsp;&nbsp;Telegram</h3>
    <div style="margin: 13px">

      <button title="Create Post" class="btn-secondary btn-sm text-black me-4 " data-bs-toggle="modal"
        data-bs-target="#myModaltelegrampost" style="margin-left:25px;background-color:#090a0a;font-size: 12px;"><i
          class="bi bi-send"></i>&nbsp;
        <b>Post</b> </button>
      <button title="Account Details" type="button" data-bs-toggle="modal" data-bs-target="#myModalview2"
        class="btn-secondary btn-sm text-black me-4 ">
        <i class="fa fa-user"></i>&nbsp;
        Account Details
      </button>
    </div>

  </div>

  <br>
  <div class="row">
    <!-- ADD Function -->
    <!-- <div class="col-lg-2 col-md-2 col-sm-2" style="width:170px;">
        <br/>
      <button title="Add Lead" class="btn-primary btn-sm text-white me-4" (click)="onadd()" >
        <i class="fas fa-plus"></i> &nbsp;&nbsp;&nbsp; Add Lead
      </button>
    </div> -->
    <div class="col-lg-3 col-md-3 col-sm-3 mx-auto" style=" cursor: not-allowed;">
      <div class="cardHeadLeads radius-10 border-start border-0 border-3 border-darkgreen">
        <div class="card-body12">
          <div class="d-flex align-items-center">
            <div>
              <h5 class="mb-0 text-secondary"><b>Photos</b></h5>
              <h5 class="badge1 badge-outline1 badge-danger fs-4 mt-2">&nbsp;{{image_count}}</h5>


            </div>
            <div class="widgets-icons-2 rounded-circle bg-gradient-brown text-white ms-auto"><i
                class="fas fa-image fs-3"></i>
            </div>
          </div>



        </div>
      </div>
    </div>


    <div class="col-lg-3 col-md-3 col-sm-3 mx-auto" style=" cursor: not-allowed;">
      <div class="cardHeadLeads radius-10 border-start border-0 border-3 border-darkgreen">
        <div class="card-body12">
          <div class="d-flex align-items-center">
            <div>
              <h5 class="mb-0 text-secondary"><b>Videos</b></h5>
              <h5 class="badge1 badge-outline1 badge-danger fs-4 mt-2">&nbsp;{{video_count}}</h5>


            </div>
            <div class="widgets-icons-2 rounded-circle bg-gradient-brown text-white ms-auto"><i
                class="fas fa-video video-icon"></i>
            </div>
          </div>



        </div>
      </div>
    </div>
    <div class="col-lg-3 col-md-3 col-sm-3 mx-auto" style=" cursor: not-allowed;">
      <div class="cardHeadLeads radius-10 border-start border-0 border-3 border-darkgreen">
        <div class="card-body12">
          <div class="d-flex align-items-center">
            <div>
              <h5 class="mb-0 text-secondary"><b>Caption</b></h5>
              <h5 class="badge1 badge-outline1 badge-danger fs-4 mt-2">&nbsp;{{text_count}}</h5>


            </div>
            <div class="widgets-icons-2 rounded-circle bg-gradient-brown text-white ms-auto"><i
                class="fas fa-comment fs-3"></i>
            </div>
          </div>



        </div>
      </div>
    </div>
    <div class="col-lg-3 col-md-3 col-sm-3 mx-auto" style=" cursor: not-allowed;">
      <div class="cardHeadLeads radius-10 border-start border-0 border-3 border-darkgreen">
        <div class="card-body12">
          <div class="d-flex align-items-center">
            <div>
              <h5 class="mb-0 text-secondary"><b>Total</b></h5>
              <h5 class="badge1 badge-outline1 badge-danger fs-4 mt-2">&nbsp;{{total_count}}</h5>


            </div>
            <div class="widgets-icons-2 rounded-circle bg-gradient-brown text-white ms-auto"> <i
                class="bi bi-columns-gap"></i>
            </div>
          </div>



        </div>
      </div>
    </div>


    <div class="card card-body m-3 shadow-xl p-3 mb-5 bg-white rounded">
      <table id="telegramsummary_list" class="table table-striped table-row-bordered border-bottom gs-7">
        <thead>
          <tr class="fw-bolder fs-5 text-nowrap bg-mail text-white align-middle">

            <th>S.No</th>
            <th>Caption</th>

            <th class="text-center">Post</th>
            <th>Posted Type</th>

            <th>Date Published</th>
            <th class="text-center">Action</th> 

          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let data of telegramsummary_list ;let i=index;">
            <td>{{i+1}}</td>
            <td style="white-space: nowrap;">&nbsp;&nbsp;&nbsp;{{data.telegram_caption}}</td>

            <td>
              <ng-container *ngIf="data.upload_type === 'Image' ">
                &nbsp; <img src="{{ data.upload_path }}" alt="" style="width:69%;height:60px;">
              </ng-container>
              <span *ngIf="!data.upload_path"></span>
              <ng-container *ngIf="data.upload_type === 'Text' ">

                <span style="margin-left: 9px;">-</span>
              </ng-container>

              <ng-container *ngIf="data.upload_type === 'Video'">
                <video controls style="width:69%;height:60px;">
                  <source src="{{data.upload_path}}">
                  Your browser does not support the video tag.
                </video>
              </ng-container>
              <span *ngIf="!data.upload_path"></span>
            </td>
            <td style="white-space: nowrap;">&nbsp;&nbsp;&nbsp;{{data.upload_type}}</td>

            <td style="white-space: nowrap;">{{data.created_date}}</td>

            <td class="text-center">
              <button title="Repost" type="button" (click)="openModalrepost(data)"
              data-bs-target="#myModalrepost" data-bs-toggle="modal" class="btn btn-icon btn-sm bg-view me-2"
              style="height: 10px !important;"><span class="fa-solid fa-retweet fs-3"></span></button>
            <button title="Download" type="button" (click)="downloadImage(data.upload_path,data.upload_type)" class="btn btn-icon btn-sm bg-primary me-2"
              style="height: 10px !important;"><span class="fa-solid fa-download"></span>
            </button>
              <!-- <div style="cursor: pointer;">
                <button class="btn me-2 p-1 " title="Options" (click)="toggleOptions(data.image_id)"><span
                    class="fa-solid fa-ellipsis-vertical fs-1" style="color: #4d4d4d;"></span></button>
                <div *ngIf="showOptionsDivId === data.image_id" class="pb-0 rounded bg-white cursor-pointer icon_menu"
                  style="right: 80px;">
                  <div class="d-flex p-3 pb-3 Icon_hover" (click)="openModalrepost(data)"
                    data-bs-target="#myModalrepost" data-bs-toggle="modal">
                    <span><i class="fa-solid fa-retweet fs-3 me-5"></i></span><span class="tooltip">Repost</span>
                    <span>Repost</span>
                  </div>
                  <div class="d-flex p-3 pb-3 Icon_hover" (click)="downloadImage(data.upload_path,data.upload_type)">
                    <span><i class="fa-solid fa-download fs-3 me-5"></i></span>
                    <span>Download</span><span class="tooltip">Download</span>
                  </div>
                </div>
              </div> -->
            </td>

          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <div class="modal" id="myModalview2" data-bs-backdrop="static" data-bs-keyboard="false">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">

        <!-- Modal Header -->
        <div class="card-header p-1 pb-2 pt-1 rounded-top bg-skyblue">
          <h2 style="margin-top:10px;color:white;font-weight: bold;">
            &nbsp; <i class="fa fa-user" style="color: white; font-size: 20px;"></i>&nbsp;&nbsp;&nbsp;Account Details
          </h2>
        </div>
        <Br>
        <div style="margin-left: 20px;">
          <h2 style="color:#0866FF">Channel Name</h2>
          <b style="margin-left: 10px; font-size: 16px;"> {{title}}</b>
          <h2 style="color:#0866FF">Channel Id </h2>
          <b style="margin-left: 10px;font-size: 16px;">{{id}}</b>
          <h2 style="color:#0866FF">Admin</h2>
          <b style="margin-left: 10px;font-size: 16px;"> {{bot_name}} </b>

          <h2 style="color:#0866FF">Invite Link </h2><b>
            <a href="{{invite_link}}" style="margin-left: 10px; font-size: 16px;color: #181C32;">{{invite_link}}</a>
          </b>
        </div>
        <div class="text-center my-4">
          <button class="btn-primary btn-sm text-black me-4 " data-bs-dismiss="modal"> <i
              class="fas fa-close text-white"></i>
            &nbsp;Close
          </button>
        </div>
      </div>
    </div>

    <!-- </div> -->
  </div>
  <!-- The Modal ADD -->
  <form [formGroup]="TelegramForm" #form="ngForm">
    <div class="modal" id="myModaltelegrampost" data-bs-backdrop="static" data-bs-keyboard="false">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">

          <!-- Modal Header -->

          <div class="card-header p-1 pb-2 pt-1 rounded-top bg-primary">
            <h2 style="margin-top:10px;color:white;font-weight: bold;">&nbsp;&nbsp;<i
                class="fas fa-upload fw-bolder fs-3"></i> &nbsp;&nbsp;Telegram Post</h2>

          </div>
          <!-- Modal body -->
          <div class="modal-body">

            <div class="row"><span class="font-bold"><b>Caption</b><span class="ms-1 text-red">*</span></span>
              <div class="col-lg-12 col-md-12 col-sm-12 fv-row mt-2 d-flex ">


                <input formControlName="telegram_caption" type="text" pattern="^(?!\s*$).+"
                  class="form-control form-control-lg form-control-solid custom-input mb-3 mb-lg-0bg-white custom-input"
                  [ngStyle]="{
                                 'border-color':telegram_caption.invalid && telegram_caption.touched ? 'red': 'rgb(209, 209, 209)' }"
                  placeholder="Enter Caption" pattern="^(?!\s*$).+" name="telegram_caption" required />

              </div>
              <div *ngIf="telegram_caption.invalid && (telegram_caption.dirty || telegram_caption.touched)">
                <div *ngIf="telegram_caption.errors?.['required']  || telegram_caption.errors?.['whitespace']">
                  <span style="color:red;">Caption is required.</span>
                </div>
              </div>

            </div>
            <br>
            <span class="font-bold"><b>Upload Post</b></span>
            <br>
            <div class="input-group mb-4" style="margin-left: 12px;width:97%;">



              <input class="form-control" formControlName="file_path" accept="image/*, video/*"
                (change)="onChange2($event)" style="margin-left:-8px;width:30%;" type="file" #fileInput />





            </div>





          </div>

          <!-- Modal footer -->
          <div class="text-center">
            <button (click)="onsubmit()" [disabled]="TelegramForm.invalid" [ngClass]="{
          'primary-button': !TelegramForm.invalid,
          'secondary-button': TelegramForm.invalid
        }" data-bs-dismiss="modal">
              <i class="bi bi-send"></i> &nbsp;Post
            </button>&nbsp;&nbsp;


            <button class="btn-danger btn-sm text-white me-4" data-bs-dismiss="modal" (click)="onclose()">
              <i class="fas fa-close text-white"></i>&nbsp; Close
            </button>


          </div><br>
        </div>
      </div>
    </div>
  </form>
  <form [formGroup]="repost" #form="ngForm">
    <div class="modal" id="myModalrepost" data-bs-backdrop="static" data-bs-keyboard="false">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="card-header p-1 pb-2 pt-1 rounded-top bg-primary">
            <h2 style="margin-top:10px;color:white;font-weight: bold;">&nbsp;&nbsp;<i
                class="fas fa-upload fw-bolder fs-3"></i> &nbsp;&nbsp;Telegram RePost</h2>

          </div>
          <div class="modal-body">
            <input class="form-control form-control-lg" formControlName="image_id" hidden type="text"
              aria-label=".form-control-lg example" autocomplete="off" required pattern="^(?!\s*$).+">

            <div class="row"><span class="font-bold"><b>Caption</b><span class="ms-1 text-red">*</span></span>
              <div class="col-lg-12 col-md-12 col-sm-12 fv-row mt-2 d-flex ">

                <input formControlName="telegram_caption" type="text" pattern="^(?!\s*$).+"
                  class="form-control form-control-lg form-control-solid custom-input mb-3 mb-lg-0bg-white custom-input"
                  [ngStyle]="{
                                   'border-color':telegram_caption.invalid && telegram_caption.touched ? 'red': 'rgb(209, 209, 209)' }"
                  placeholder="Enter Caption" pattern="^(?!\s*$).+" name="telegram_caption" required />

              </div>
              <div *ngIf="telegram_caption.invalid && (telegram_caption.dirty || telegram_caption.touched)">
                <div *ngIf="telegram_caption.errors?.['required']  || telegram_caption.errors?.['whitespace']">
                  <span style="color:red;">Caption is required.</span>
                </div>
              </div>
            </div>



            <br>

            <div class="mb-3">
              <label for="exampleFormControlTextarea1" class="form-label"><b>Post Type</b></label>
              <input formControlName="upload_type" type="text" [readonly]="isReadOnly" pattern="^(?!\s*$).+"
                class="form-control form-control-lg form-control-solid custom-input mb-3 mb-lg-0bg-white custom-input"
                placeholder="Enter Caption" pattern="^(?!\s*$).+" name="upload_type" />

            </div>


          </div>


          <div class="text-center">
            <button (click)="onupdate(repost.value.image_id)" [disabled]="repost.invalid" [ngClass]="{
            'primary-button': !repost.invalid,
            'secondary-button': repost.invalid
          }" data-bs-dismiss="modal">
              <i class="bi bi-send"></i> &nbsp;Post
            </button>&nbsp;&nbsp;

            <button class="btn-danger btn-sm text-white me-4" data-bs-dismiss="modal" (click)="onclose()">
              <i class="fas fa-close text-white"></i> &nbsp; Close
            </button>


          </div><br>
          <!-- <div class="text-center my-4">
            <button (click)="onupdate(repost.value.image_id)" data-bs-dismiss="modal">
                <i class="fas fa-check text-white fs-5 "></i> &nbsp;Update
            </button> &nbsp;&nbsp;
            <button class="btn-danger btn-sm text-white me-4"  (click)="onclose()" data-bs-dismiss="modal">
                <i class="fas fa-close text-white"></i> &nbsp;Close
            </button>
        </div> -->
        </div>

      </div>
    </div>
  </form>